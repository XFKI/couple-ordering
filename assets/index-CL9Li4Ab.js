import{r as i,a as fe,R as he}from"./vendor-DnjGVpDl.js";import{c as ue}from"./supabase-BBflACvg.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const g of n.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function u(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=u(a);fetch(a.href,n)}})();var ie={exports:{}},W={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pe=i,be=Symbol.for("react.element"),ye=Symbol.for("react.fragment"),je=Object.prototype.hasOwnProperty,ve=pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ne={key:!0,ref:!0,__self:!0,__source:!0};function ce(t,l,u){var o,a={},n=null,g=null;u!==void 0&&(n=""+u),l.key!==void 0&&(n=""+l.key),l.ref!==void 0&&(g=l.ref);for(o in l)je.call(l,o)&&!Ne.hasOwnProperty(o)&&(a[o]=l[o]);if(t&&t.defaultProps)for(o in l=t.defaultProps,l)a[o]===void 0&&(a[o]=l[o]);return{$$typeof:be,type:t,key:n,ref:g,props:a,_owner:ve.current}}W.Fragment=ye;W.jsx=ce;W.jsxs=ce;ie.exports=W;var e=ie.exports,Q={},se=fe;Q.createRoot=se.createRoot,Q.hydrateRoot=se.hydrateRoot;/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var we={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),D=(t,l)=>{const u=i.forwardRef(({color:o="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:g,className:m="",children:w,...N},k)=>i.createElement("svg",{ref:k,...we,width:a,height:a,stroke:o,strokeWidth:g?Number(n)*24/Number(a):n,className:["lucide",`lucide-${ke(t)}`,m].join(" "),...N},[...l.map(([r,d])=>i.createElement(r,d)),...Array.isArray(w)?w:[w]]));return u.displayName=`${t}`,u};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=D("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=D("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=D("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=D("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=D("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=D("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=D("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=D("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=D("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=D("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=D("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=D("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=D("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=D("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=D("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=D("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=D("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=D("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=D("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=D("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=D("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),V=t=>{if(!t)return"N/A";const l=new Date(t),u=l.getFullYear(),o=String(l.getMonth()+1).padStart(2,"0"),a=String(l.getDate()).padStart(2,"0");return`${u}${o}${a}`},G=t=>{if(!t)return"N/A";const l=new Date(t),u=String(l.getHours()).padStart(2,"0"),o=String(l.getMinutes()).padStart(2,"0"),a=String(l.getSeconds()).padStart(2,"0");return`${u}:${o}:${a}`},te=t=>{if(!t||t.length===0)return new Map;const l=[...t].sort((a,n)=>new Date(a.created_at).getTime()-new Date(n.created_at).getTime()),u={},o=new Map;for(const a of l){const n=V(a.created_at);u[n]?u[n]++:u[n]=1,o.set(a.created_at,u[n])}return o},H=(t,l)=>{if(!t)return{displayId:"N/A",displayTime:"N/A"};const u=V(t),o=l.get(t)||0,a=String(o).padStart(3,"0");return{displayId:`${u}-${a}`,displayTime:G(t)}},Le="https://tpenvfpvhvfyftcsmbxb.supabase.co",Re="sb_publishable_jMdHVHJNEuwDAKPjpeowkw__yWb7ZaP",O=ue(Le,Re),Z=[{id:"m-1",name:"é¦™ç‚’åŠ²é“é¢",description:"é¦™æ°”æµ“éƒï¼Œé…æ–™ä¸°å¯Œ",price:19,stock:99,category:"ä¸»é£Ÿ",method:"å¤§ç«å¿«ç‚’ï¼Œé¢æ¡ç­‹é“",flavor:"é¦™æ°”æµ“éƒï¼Œé…æ–™ä¸°å¯Œ",image:"ğŸœ",imageUrl:"https://placehold.co/320x180/facc15/374151?text=é¦™ç‚’åŠ²é“é¢",tags:[]},{id:"m-2",name:"ç»å…¸ç‚’ç±³ç²‰",description:"ç²’ç²’åˆ†æ˜ï¼Œå£æ„Ÿçˆ½æ»‘",price:19,stock:99,category:"ä¸»é£Ÿ",method:"é«˜æ¸©å¿«ç‚’ï¼Œç«å€™ç²¾å‡†",flavor:"ç²’ç²’åˆ†æ˜ï¼Œå£æ„Ÿçˆ½æ»‘",image:"ğŸ",imageUrl:"https://placehold.co/320x180/facc15/374151?text=ç»å…¸ç‚’ç±³ç²‰",tags:[]},{id:"m-3",name:"ç§˜åˆ¶ç‚’é¥­",description:"ç±³é¦™å››æº¢ï¼Œå±‚æ¬¡ä¸°å¯Œ",price:19,stock:99,category:"ä¸»é£Ÿ",method:"ç§˜åˆ¶é…æ–¹ï¼Œå¿«é€Ÿç¿»ç‚’",flavor:"ç±³é¦™å››æº¢ï¼Œå±‚æ¬¡ä¸°å¯Œ",image:"ğŸš",imageUrl:"https://placehold.co/320x180/facc15/374151?text=ç§˜åˆ¶ç‚’é¥­",tags:[]},{id:"m-4",name:"è¾£é¦™è‚‰æœ«ç±³ç²‰",description:"é²œé¦™å¾®è¾£ï¼Œç±³ç²‰æŸ”æ»‘",price:19,stock:99,category:"ä¸»é£Ÿ",method:"è‚‰æœ«ç‚’é¦™ï¼Œè¾£æ¤’æå‘³",flavor:"é²œé¦™å¾®è¾£ï¼Œç±³ç²‰æŸ”æ»‘",image:"ğŸŒ¶ï¸",imageUrl:"https://placehold.co/320x180/facc15/374151?text=è¾£é¦™è‚‰æœ«ç±³ç²‰",tags:[]},{id:"m-5",name:"ç™½ç±³é¥­",description:"æ¸…æ·¡åŸé¦™ï¼Œç™¾æ­ä¸»é£Ÿ",price:19,stock:99,category:"ä¸»é£Ÿ",method:"è’¸ç…®ç±³ç²’ï¼Œæ¾è½¯é¥±æ»¡",flavor:"æ¸…æ·¡åŸé¦™ï¼Œç™¾æ­ä¸»é£Ÿ",image:"ğŸš",imageUrl:"https://placehold.co/320x180/facc15/374151?text=ç™½ç±³é¥­",tags:[]},{id:"m-6",name:"ç…®æ–¹ä¾¿é¢",description:"å¿«æ·é²œé¦™ï¼Œæ±¤æ±æµ“éƒ",price:19,stock:99,category:"ä¸»é£Ÿ",method:"çƒ­æ°´ç…®åˆ¶ï¼Œè°ƒæ–™å…¥å‘³",flavor:"å¿«æ·é²œé¦™ï¼Œæ±¤æ±æµ“éƒ",image:"ğŸœ",imageUrl:"https://placehold.co/320x180/facc15/374151?text=ç…®æ–¹ä¾¿é¢",tags:[]},{id:"m-7",name:"æ¸…æ±¤æŒ‚é¢",description:"æ¸…çˆ½æ·¡é›…ï¼Œé¢æ¡æŸ”æ»‘",price:19,stock:99,category:"ä¸»é£Ÿ",method:"æŒ‚é¢ç…®ç†Ÿï¼Œæ¸…æ±¤è°ƒå‘³",flavor:"æ¸…çˆ½æ·¡é›…ï¼Œé¢æ¡æŸ”æ»‘",image:"ğŸ¥¢",imageUrl:"https://placehold.co/320x180/facc15/374151?text=æ¸…æ±¤æŒ‚é¢",tags:[]},{id:"m-8",name:"é¦™çƒ¤åå¸",description:"æ¾è½¯å¾®ç”œï¼Œç„¦é¦™å¯å£",price:19,stock:99,category:"ä¸»é£Ÿ",method:"çƒ¤åˆ¶é‡‘é»„ï¼Œå¤–è„†å†…è½¯",flavor:"æ¾è½¯å¾®ç”œï¼Œç„¦é¦™å¯å£",image:"ğŸ",imageUrl:"https://placehold.co/320x180/facc15/374151?text=é¦™çƒ¤åå¸",tags:[]},{id:"m-9",name:"å¯ä¹ç‚–é¸¡ç¿…",description:"ç”œé¦™æµ“éƒï¼Œé¸¡ç¿…å«©æ»‘",price:19,stock:99,category:"ä¸»èœ",method:"å¯ä¹æ…¢ç‚–ï¼Œå…¥å‘³é²œç¾",flavor:"ç”œé¦™æµ“éƒï¼Œé¸¡ç¿…å«©æ»‘",image:"ğŸ—",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=å¯ä¹ç‚–é¸¡ç¿…",tags:[]},{id:"m-10",name:"ç„¦é¦™æ’éª¨",description:"å¤–ç„¦é‡Œå«©ï¼Œé¦™æ°”æ‰‘é¼»",price:19,stock:99,category:"ä¸»èœ",method:"é«˜æ¸©ç…åˆ¶ï¼Œæ…¢ç«æ”¶æ±",flavor:"å¤–ç„¦é‡Œå«©ï¼Œé¦™æ°”æ‰‘é¼»",image:"ğŸ–",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=ç„¦é¦™æ’éª¨",tags:[]},{id:"m-11",name:"éº»è¾£çŒªè€³",description:"è„†çˆ½éº»è¾£ï¼Œå¼€èƒƒä¸‹é…’",price:19,stock:99,category:"ä¸»èœ",method:"å¤åˆ¶å…¥å‘³ï¼Œè¾£æ¤’çˆ†ç‚’",flavor:"è„†çˆ½éº»è¾£ï¼Œå¼€èƒƒä¸‹é…’",image:"ğŸŒ¶ï¸",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=éº»è¾£çŒªè€³",tags:[]},{id:"m-12",name:"è€å¹²å¦ˆç‚’ç«è…¿",description:"è¾£é¦™æµ“çƒˆï¼Œç«è…¿å’¸é¦™",price:19,stock:99,category:"ä¸»èœ",method:"è€å¹²å¦ˆé…±çˆ†ç‚’",flavor:"è¾£é¦™æµ“çƒˆï¼Œç«è…¿å’¸é¦™",image:"ğŸ¥“",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=è€å¹²å¦ˆç‚’ç«è…¿",tags:[]},{id:"m-13",name:"çº¢çƒ§ç§˜åˆ¶è‚‰",description:"è‚¥è€Œä¸è…»ï¼Œå…¥å£å³åŒ–",price:19,stock:99,category:"ä¸»èœ",method:"ç§˜åˆ¶é…±æ–™æ…¢ç‚–",flavor:"è‚¥è€Œä¸è…»ï¼Œå…¥å£å³åŒ–",image:"ğŸ–",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=çº¢çƒ§ç§˜åˆ¶è‚‰",tags:["æ‹›ç‰Œ"]},{id:"m-14",name:"é…¸èåœç‰›è‚š",description:"é…¸çˆ½å¼€èƒƒï¼Œç‰›è‚šè„†å«©",price:19,stock:99,category:"ä¸»èœ",method:"é…¸èåœä¸ç‰›è‚šå¿«ç‚’",flavor:"é…¸çˆ½å¼€èƒƒï¼Œç‰›è‚šè„†å«©",image:"ğŸ¥˜",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=é…¸èåœç‰›è‚š",tags:[]},{id:"m-15",name:"é’æ¤’ç‚’è›‹",description:"æ¸…é¦™çˆ½å£ï¼Œè›‹å«©æ¤’è„†",price:19,stock:99,category:"ä¸»èœ",method:"å¿«ç«ç¿»ç‚’ï¼Œä¿æŒé²œå«©",flavor:"æ¸…é¦™çˆ½å£ï¼Œè›‹å«©æ¤’è„†",image:"ğŸ¥š",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=é’æ¤’ç‚’è›‹",tags:[]},{id:"m-16",name:"ç»å…¸è¾£æ¤’ç‚’è‚‰",description:"è¾£é¦™æ‰‘é¼»ï¼Œè‚‰ç‰‡é²œå«©",price:19,stock:99,category:"ä¸»èœ",method:"è¾£æ¤’çˆ†ç‚’ï¼Œè‚‰é¦™å…¥å‘³",flavor:"è¾£é¦™æ‰‘é¼»ï¼Œè‚‰ç‰‡é²œå«©",image:"ğŸŒ¶ï¸",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=ç»å…¸è¾£æ¤’ç‚’è‚‰",tags:[]},{id:"m-17",name:"å°ç‚’é»„ç‰›è‚‰",description:"é²œè¾£çˆ½å£ï¼Œç‰›è‚‰åŠ²é“",price:19,stock:99,category:"ä¸»èœ",method:"å¿«ç«ç¿»ç‚’ï¼Œé¦™è¾£æå‘³",flavor:"é²œè¾£çˆ½å£ï¼Œç‰›è‚‰åŠ²é“",image:"ğŸ¥©",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=å°ç‚’é»„ç‰›è‚‰",tags:[]},{id:"m-18",name:"æ··åˆæ¤’çˆ†ç‚’ç‰›è‚‰",description:"å¤šæ¤’èåˆï¼Œç‰›è‚‰é²œé¦™",price:19,stock:99,category:"ä¸»èœ",method:"å½©æ¤’å¿«ç‚’ï¼Œè‚‰è´¨æ»‘å«©",flavor:"å¤šæ¤’èåˆï¼Œç‰›è‚‰é²œé¦™",image:"ğŸ«‘",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=æ··åˆæ¤’çˆ†ç‚’ç‰›è‚‰",tags:[]},{id:"m-19",name:"é…¸èœé±¼",description:"é…¸è¾£é²œé¦™ï¼Œé±¼ç‰‡å«©æ»‘",price:19,stock:99,category:"ä¸»èœ",method:"é…¸èœç†¬æ±¤ï¼Œé±¼ç‰‡å…¥å‘³",flavor:"é…¸è¾£é²œé¦™ï¼Œé±¼ç‰‡å«©æ»‘",image:"ğŸŸ",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=é…¸èœé±¼",tags:["æ‹›ç‰Œ"]},{id:"m-20",name:"çº¢çƒ§æ’éª¨",description:"æµ“é¦™é…±æ±ï¼Œæ’éª¨è½¯çƒ‚",price:19,stock:99,category:"ä¸»èœ",method:"æ…¢ç«çº¢çƒ§ï¼Œé…±é¦™æµ“éƒ",flavor:"æµ“é¦™é…±æ±ï¼Œæ’éª¨è½¯çƒ‚",image:"ğŸ–",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=çº¢çƒ§æ’éª¨",tags:[]},{id:"m-21",name:"é²œæ¤’å°ç‚’é¸¡",description:"é²œè¾£çˆ½å£ï¼Œé¸¡è‚‰å«©æ»‘",price:19,stock:99,category:"ä¸»èœ",method:"é²œæ¤’çˆ†ç‚’ï¼Œé¸¡è‚‰å…¥å‘³",flavor:"é²œè¾£çˆ½å£ï¼Œé¸¡è‚‰å«©æ»‘",image:"ğŸ”",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=é²œæ¤’å°ç‚’é¸¡",tags:[]},{id:"m-22",name:"å†œå®¶ä¸€ç¢—é¦™",description:"å®¶å¸¸æµ“é¦™ï¼Œé£Ÿæä¸°å¯Œ",price:19,stock:99,category:"ä¸»èœ",method:"å¤šæ–™åˆç‚’ï¼Œå±‚æ¬¡åˆ†æ˜",flavor:"å®¶å¸¸æµ“é¦™ï¼Œé£Ÿæä¸°å¯Œ",image:"ğŸ¥˜",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=å†œå®¶ä¸€ç¢—é¦™",tags:[]},{id:"m-23",name:"éº»å©†è±†è…",description:"éº»è¾£é²œé¦™ï¼Œè±†è…å«©æ»‘",price:19,stock:99,category:"ä¸»èœ",method:"è±†è…å…¥é”…ï¼Œéº»è¾£è°ƒå‘³",flavor:"éº»è¾£é²œé¦™ï¼Œè±†è…å«©æ»‘",image:"ğŸŒ¶ï¸",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=éº»å©†è±†è…",tags:[]},{id:"m-24",name:"è‚‰æœ«èŒ„å­",description:"å’¸é¦™å…¥å‘³ï¼ŒèŒ„å­è½¯ç³¯",price:19,stock:99,category:"ä¸»èœ",method:"è‚‰æœ«ç‚’é¦™ï¼ŒèŒ„å­ç‚–ç…®",flavor:"å’¸é¦™å…¥å‘³ï¼ŒèŒ„å­è½¯ç³¯",image:"ğŸ†",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=è‚‰æœ«èŒ„å­",tags:[]},{id:"m-25",name:"æ¸…ç‚’æ—¶è”¬",description:"æ¸…ç”œçˆ½å£ï¼Œå¥åº·ç¾å‘³",price:19,stock:99,category:"ç´ èœ",method:"è½»æ²¹å¿«ç‚’ï¼Œä¿ç•™åŸå‘³",flavor:"æ¸…ç”œçˆ½å£ï¼Œå¥åº·ç¾å‘³",image:"ğŸ¥¬",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=æ¸…ç‚’æ—¶è”¬",tags:[]},{id:"m-26",name:"é…¸è¾£åœŸè±†ä¸",description:"é…¸è¾£å¼€èƒƒï¼Œè„†çˆ½ä¸‹é¥­",price:19,stock:99,category:"ç´ èœ",method:"å¿«ç‚’åœŸè±†ä¸ï¼Œè°ƒé…¸è¾£æ±",flavor:"é…¸è¾£å¼€èƒƒï¼Œè„†çˆ½ä¸‹é¥­",image:"ğŸ¥”",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=é…¸è¾£åœŸè±†ä¸",tags:[]},{id:"m-27",name:"é…¸è¾£è—•ä¸",description:"çˆ½è„†é…¸è¾£ï¼Œæ¸…æ–°è§£è…»",price:19,stock:99,category:"ç´ èœ",method:"è—•ä¸å¿«ç‚’ï¼Œé…¸è¾£è°ƒå‘³",flavor:"çˆ½è„†é…¸è¾£ï¼Œæ¸…æ–°è§£è…»",image:"ğŸŒ±",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=é…¸è¾£è—•ä¸",tags:[]},{id:"m-28",name:"æ¸…ç‚’å„¿èœ",description:"æ¸…é¦™è„†å«©ï¼Œé²œç”œçˆ½å£",price:19,stock:99,category:"ç´ èœ",method:"å¿«ç«æ¸…ç‚’ï¼Œä¿æŒåŸå‘³",flavor:"æ¸…é¦™è„†å«©ï¼Œé²œç”œçˆ½å£",image:"ğŸ¥¬",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=æ¸…ç‚’å„¿èœ",tags:[]},{id:"m-29",name:"å®¶å¸¸è±†è…",description:"å’¸é¦™å…¥å‘³ï¼Œè±†è…å«©æ»‘",price:19,stock:99,category:"ç´ èœ",method:"ç…åˆ¶è±†è…ï¼Œé…±æ±æ”¶å‘³",flavor:"å’¸é¦™å…¥å‘³ï¼Œè±†è…å«©æ»‘",image:"ğŸ§ˆ",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=å®¶å¸¸è±†è…",tags:[]},{id:"m-30",name:"æ—¶è”¬æ··æ­",description:"å¤šå½©æ¸…æ–°ï¼Œè¥å…»å‡è¡¡",price:19,stock:99,category:"ç´ èœ",method:"å¤šç§è”¬èœå¿«ç‚’",flavor:"å¤šå½©æ¸…æ–°ï¼Œè¥å…»å‡è¡¡",image:"ğŸ¥—",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=æ—¶è”¬æ··æ­",tags:[]},{id:"m-31",name:"ç‚’ä¸‰ä¸",description:"æ¸…çˆ½è„†å£ï¼Œé…¸è¾£é€‚ä¸­",price:19,stock:99,category:"ç´ èœ",method:"åœŸè±†ã€èƒ¡èåœã€é’æ¤’ä¸å¿«ç‚’",flavor:"æ¸…çˆ½è„†å£ï¼Œé…¸è¾£é€‚ä¸­",image:"ğŸ¥•",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=ç‚’ä¸‰ä¸",tags:[]},{id:"m-32",name:"é¦™è‡é’èœ",description:"æ¸…é¦™é²œç¾ï¼Œçˆ½å£å¥åº·",price:19,stock:99,category:"ç´ èœ",method:"é¦™è‡ä¸é’èœæ¸…ç‚’",flavor:"æ¸…é¦™é²œç¾ï¼Œçˆ½å£å¥åº·",image:"ğŸ„",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=é¦™è‡é’èœ",tags:[]},{id:"m-33",name:"æ¸…ç‚’ä¸ç“œ",description:"æ¸…ç”œçˆ½æ»‘ï¼Œæ±æ°´ä¸°å¯Œ",price:19,stock:99,category:"ç´ èœ",method:"ä¸ç“œå¿«ç‚’ï¼Œä¿æŒé²œå«©",flavor:"æ¸…ç”œçˆ½æ»‘ï¼Œæ±æ°´ä¸°å¯Œ",image:"ğŸ¥’",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=æ¸…ç‚’ä¸ç“œ",tags:[]},{id:"m-34",name:"å¹²é”…èŠ±èœ",description:"é¦™è¾£è„†å«©ï¼Œé”…æ°”åè¶³",price:19,stock:99,category:"ç´ èœ",method:"å¹²é”…çˆ†ç‚’ï¼ŒèŠ±èœå…¥å‘³",flavor:"é¦™è¾£è„†å«©ï¼Œé”…æ°”åè¶³",image:"ğŸ¥¦",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=å¹²é”…èŠ±èœ",tags:[]},{id:"m-35",name:"ç•ªèŒ„ç‚’è›‹",description:"é…¸ç”œå¯å£ï¼Œè›‹å«©æ±æµ“",price:19,stock:99,category:"ç´ èœ",method:"ç•ªèŒ„ä¸é¸¡è›‹å¿«ç‚’",flavor:"é…¸ç”œå¯å£ï¼Œè›‹å«©æ±æµ“",image:"ğŸ…",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=ç•ªèŒ„ç‚’è›‹",tags:[]},{id:"m-36",name:"ç²‰è—•æ’éª¨æ±¤",description:"æ±¤æ¸…å‘³æµ“ï¼Œè—•ç²‰æ’éª¨é¦™",price:19,stock:99,category:"æ±¤å“",method:"æ…¢ç«ç‚–ç…®ï¼Œæ¸…çˆ½æ»‹è¡¥",flavor:"æ±¤æ¸…å‘³æµ“ï¼Œè—•ç²‰æ’éª¨é¦™",image:"ğŸ²",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=ç²‰è—•æ’éª¨æ±¤",tags:[]},{id:"m-37",name:"è™«è‰èŠ±ç‚–é¸¡æ±¤",description:"æ»‹è¡¥å…»ç”Ÿï¼Œé²œé¦™æµ“éƒ",price:19,stock:99,category:"æ±¤å“",method:"è™«è‰èŠ±ä¸é¸¡è‚‰æ…¢ç‚–",flavor:"æ»‹è¡¥å…»ç”Ÿï¼Œé²œé¦™æµ“éƒ",image:"ğŸ²",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=è™«è‰èŠ±ç‚–é¸¡æ±¤",tags:["æ‹›ç‰Œ"]},{id:"m-38",name:"é²œé¦™é±¼æ±¤",description:"é±¼é²œæ±¤æµ“ï¼Œè±†è…å«©æ»‘",price:19,stock:99,category:"æ±¤å“",method:"é±¼éª¨ç†¬æ±¤ï¼Œè±†è…å…¥å‘³",flavor:"é±¼é²œæ±¤æµ“ï¼Œè±†è…å«©æ»‘",image:"ğŸ ",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=é²œé¦™é±¼æ±¤",tags:[]},{id:"m-39",name:"é²«é±¼è±†è…æ±¤",description:"é±¼é²œè±†é¦™ï¼Œæ±¤æ±æ¸…æ¶¦",price:19,stock:99,category:"æ±¤å“",method:"é²«é±¼ç†¬æ±¤ï¼Œè±†è…å…¥å‘³",flavor:"é±¼é²œè±†é¦™ï¼Œæ±¤æ±æ¸…æ¶¦",image:"ğŸ¥£",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=é²«é±¼è±†è…æ±¤",tags:[]},{id:"m-40",name:"ç‚–é›ªæ¢¨",description:"æ¸…ç”œæ¶¦å–‰ï¼Œæ¸©æ¶¦æ»‹å…»",price:19,stock:99,category:"æ±¤å“",method:"é›ªæ¢¨æ…¢ç‚–ï¼Œç”œæ±¤å…¥å‘³",flavor:"æ¸…ç”œæ¶¦å–‰ï¼Œæ¸©æ¶¦æ»‹å…»",image:"ğŸ",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=ç‚–é›ªæ¢¨",tags:[]},{id:"m-41",name:"ç½—å®‹æ±¤",description:"é…¸ç”œæµ“éƒï¼Œè¥¿å¼é£å‘³",price:19,stock:99,category:"æ±¤å“",method:"ç•ªèŒ„ç‰›è‚‰æ…¢ç‚–",flavor:"é…¸ç”œæµ“éƒï¼Œè¥¿å¼é£å‘³",image:"ğŸ¥£",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=ç½—å®‹æ±¤",tags:[]},{id:"m-42",name:"èŒè‡æ±¤",description:"æ¸…é²œçˆ½å£ï¼ŒèŒé¦™æµ“éƒ",price:19,stock:99,category:"æ±¤å“",method:"å¤šç§èŒè‡ç†¬ç…®",flavor:"æ¸…é²œçˆ½å£ï¼ŒèŒé¦™æµ“éƒ",image:"ğŸ„",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=èŒè‡æ±¤",tags:[]},{id:"m-43",name:"èƒ¡æ¤’çŒªè‚šé¸¡æ±¤",description:"èƒ¡æ¤’è¾›é¦™ï¼Œæ»‹è¡¥æš–èƒƒ",price:19,stock:99,category:"æ±¤å“",method:"çŒªè‚šé¸¡è‚‰æ…¢ç‚–ï¼Œèƒ¡æ¤’æå‘³",flavor:"èƒ¡æ¤’è¾›é¦™ï¼Œæ»‹è¡¥æš–èƒƒ",image:"ğŸ²",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=èƒ¡æ¤’çŒªè‚šé¸¡æ±¤",tags:[]}],Te=()=>{let t=localStorage.getItem("food_app_user_id");return t||(t=crypto.randomUUID(),localStorage.setItem("food_app_user_id",t)),t},ze=Te(),Fe=()=>e.jsxs("div",{className:"flex items-center justify-center h-screen bg-orange-50",children:[e.jsx("div",{className:"animate-bounce text-4xl",children:"ğŸ¥˜"}),e.jsx("span",{className:"ml-2 text-orange-600 font-bold",children:"æ­£åœ¨è¿æ¥ç¾å‘³æ˜Ÿçƒ (Supabase)..."})]}),K=({isOpen:t,onClose:l,children:u})=>t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto animate-in fade-in zoom-in duration-200",children:u})}):null,me=({message:t,onClose:l})=>(i.useEffect(()=>{if(t){const u=setTimeout(()=>l(),3e3);return()=>clearTimeout(u)}},[t,l]),t?e.jsx("div",{className:"fixed top-14 left-1/2 -translate-x-1/2 z-50",children:e.jsx("div",{className:"bg-green-500 text-white px-4 py-2 rounded-full shadow-lg text-sm font-medium animate-in slide-in-from-top-4 duration-300",children:t})}):null),ge=({order:t,onClose:l,sequenceMap:u})=>{if(!t)return null;const{displayId:o,displayTime:a}=H(t.created_at,u),n={pending:{bg:"bg-orange-100",text:"text-orange-600",label:"å¾…æ¥å•",icon:"â³"},cooking:{bg:"bg-blue-100",text:"text-blue-600",label:"çƒ¹é¥ªä¸­",icon:"ğŸ‘¨â€ğŸ³"},completed:{bg:"bg-green-100",text:"text-green-600",label:"å·²å®Œæˆ",icon:"âœ…"},rejected:{bg:"bg-red-100",text:"text-red-600",label:"å·²æ‹’ç»",icon:"âŒ"},cancelled:{bg:"bg-gray-100",text:"text-gray-600",label:"å·²æ’¤é”€",icon:"ğŸš«"},deleted:{bg:"bg-gray-200",text:"text-gray-700",label:"å·²åˆ é™¤",icon:"ğŸ—‘ï¸"}},g=n[t.status]||n.pending;return e.jsx(K,{isOpen:!0,onClose:l,children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"è®¢å•è¯¦æƒ…"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["è®¢å•å·: ",o]})]}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-full transition",children:e.jsx(Ae,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:`${g.bg} ${g.text} rounded-xl p-4 mb-4 flex items-center justify-between`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:g.icon}),e.jsx("span",{className:"font-bold text-lg",children:g.label})]}),t.urgent&&e.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded-full text-xs font-bold animate-pulse",children:"âš¡ å‚¬å•ä¸­"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-4 space-y-3",children:[e.jsx("h4",{className:"font-bold text-gray-700 text-sm mb-3",children:"ğŸ“… æ—¶é—´çº¿"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-1.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"ä¸‹å•æ—¶é—´"}),e.jsx("p",{className:"text-xs text-gray-500",children:a})]})]}),t.cooking_started_at&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-1.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"å¼€å§‹åˆ¶ä½œ"}),e.jsx("p",{className:"text-xs text-gray-500",children:G(t.cooking_started_at)})]})]}),t.completed_at&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-1.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"å®Œæˆæ—¶é—´"}),e.jsx("p",{className:"text-xs text-gray-500",children:G(t.completed_at)})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"font-bold text-gray-700 text-sm mb-3",children:"ğŸ½ï¸ èœå“æ˜ç»†"}),e.jsx("div",{className:"space-y-2",children:t.items.map((m,w)=>e.jsxs("div",{className:"flex justify-between items-start py-2 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium text-gray-800",children:[m.name," x",m.quantity]}),m.special_request&&m.special_request!=="æ— ç‰¹æ®Šå¤‡æ³¨"&&e.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:["ğŸ’¬ ",m.special_request]})]}),e.jsxs("p",{className:"text-sm font-bold text-gray-600",children:["Â¥",m.price*m.quantity]})]},w))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4 flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-gray-700",children:"è®¢å•æ€»ä»·"}),e.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:["Â¥",t.total_price]})]}),e.jsx("button",{onClick:l,className:"w-full mt-4 py-3 bg-gray-200 text-gray-700 rounded-xl font-bold active:scale-95 transition",children:"å…³é—­"})]})})},Pe=({userId:t,allOrders:l,showToast:u})=>{const o=i.useMemo(()=>te(l),[l]),[a,n]=i.useState("all"),[g,m]=i.useState(null),w=i.useMemo(()=>{const r=new Set;return l.forEach(d=>{if(d.status!=="cancelled"){const v=V(d.created_at);r.add(v)}}),Array.from(r).sort().reverse()},[l]),N=i.useMemo(()=>l.filter(r=>r.status!=="cancelled"&&r.status!=="deleted").filter(r=>a==="all"?!0:V(r.created_at)===a).sort((r,d)=>new Date(d.created_at).getTime()-new Date(r.created_at).getTime()),[l,a]),k=async r=>{if(window.confirm("ç¡®å®šè¦æ’¤é”€è¿™ä¸ªè®¢å•å—ï¼Ÿ"))try{const{error:d}=await O.from("orders").update({status:"cancelled"}).eq("id",r).select();if(d)throw new Error(d.message);u("è®¢å•å·²æ’¤é”€")}catch(d){console.error("æ’¤é”€å¤±è´¥:",d),u("æ’¤é”€å¤±è´¥ï¼Œè¯·é‡è¯•")}};return e.jsxs("div",{className:"p-4 pt-10 pb-24 space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"æ‰€æœ‰è®¢å•"}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-4",children:[e.jsx("button",{onClick:()=>n("all"),className:`px-4 py-2 rounded-full whitespace-nowrap text-sm font-medium transition-all ${a==="all"?"bg-orange-500 text-white shadow-lg":"bg-white text-gray-600 border border-gray-200"}`,children:"å…¨éƒ¨æ—¥æœŸ"}),w.map(r=>{r.substring(0,4);const d=r.substring(4,6),v=r.substring(6,8);return e.jsxs("button",{onClick:()=>n(r),className:`px-4 py-2 rounded-full whitespace-nowrap text-sm font-medium transition-all ${a===r?"bg-orange-500 text-white shadow-lg":"bg-white text-gray-600 border border-gray-200"}`,children:[d,"/",v]},r)})]}),N.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-10",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ğŸ˜­"}),e.jsx("p",{children:a==="all"?"è¿˜æ²¡æœ‰ä»»ä½•è®¢å•å“¦":"è¯¥æ—¥æœŸæ²¡æœ‰è®¢å•"})]}):N.map(r=>{const{displayId:d,displayTime:v}=H(r.created_at,o),S=r.status==="pending",E=r.status==="cooking";r.status,r.status,r.status;const p={pending:{bg:"bg-orange-100",text:"text-orange-600",label:"å¾…æ¥å•"},cooking:{bg:"bg-blue-100",text:"text-blue-600",label:"çƒ¹é¥ªä¸­"},completed:{bg:"bg-green-100",text:"text-green-600",label:"å·²å®Œæˆ"},rejected:{bg:"bg-red-100",text:"text-red-600",label:"å·²æ‹’ç»"},cancelled:{bg:"bg-gray-100",text:"text-gray-600",label:"å·²æ’¤é”€"},deleted:{bg:"bg-gray-200",text:"text-gray-700",label:"å·²åˆ é™¤"}},C=p[r.status]||p.pending;return e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("span",{className:"font-bold text-gray-700 text-lg",children:["è®¢å•å·: ",d]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${C.bg} ${C.text}`,children:C.label})]}),e.jsxs("p",{className:"text-xs text-gray-400 mb-2",children:["æ—¶é—´: ",v]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["æ€»ä»·: ",e.jsxs("span",{className:"font-bold text-orange-600",children:["Â¥",r.total_price]})]}),r.items.map((A,T)=>e.jsxs("div",{className:"text-sm text-gray-600 flex justify-between mb-1",children:[e.jsxs("span",{children:[A.name," x",A.quantity]}),A.special_request&&A.special_request!=="æ— ç‰¹æ®Šå¤‡æ³¨"&&e.jsx("span",{className:"text-xs text-gray-400 italic ml-2",children:A.special_request})]},T)),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsxs("button",{onClick:()=>m(r),className:"flex-1 py-2 bg-blue-500 text-white rounded-lg font-bold text-sm active:scale-95 transition-transform flex items-center justify-center gap-1",children:[e.jsx(X,{className:"w-4 h-4"})," æŸ¥çœ‹è¯¦æƒ…"]}),(S||E)&&e.jsx("button",{onClick:()=>k(r.id),className:"flex-1 py-2 bg-red-500 text-white rounded-lg font-bold text-sm active:scale-95 transition-transform",children:"æ’¤é”€è®¢å•"})]})]},r.id)}),g&&e.jsx(ge,{order:g,onClose:()=>m(null),sequenceMap:o})]})},Ve=({cartItems:t,setCartItems:l,setView:u,userId:o,setActiveOrder:a})=>{const[n,g]=i.useState(!1),m=i.useMemo(()=>t.reduce((k,r)=>k+r.price*r.quantity,0),[t]),w=(k,r)=>{l(d=>{const v=d.findIndex(E=>E.cart_id===k);if(v===-1)return d;const S=[...d];return S[v].quantity+=r,S[v].quantity<=0?S.filter(E=>E.cart_id!==k):S})},N=async()=>{if(t.length===0)return;g(!0);const k={user_id:o,items:t.map(({cart_id:r,...d})=>d),total_price:m,status:"pending",customer_name:"åƒè´§",urgent:!1,urgent_count:0};console.log("å‡†å¤‡ä¸‹å•ï¼Œè®¢å•æ•°æ®:",k);try{const{data:r,error:d}=await O.from("orders").insert([k]).select();if(d)throw console.error("Supabase æ’å…¥é”™è¯¯:",d),alert("ä¸‹å•å¤±è´¥: "+d.message),d;console.log("ä¸‹å•æˆåŠŸï¼Œè¿”å›æ•°æ®:",r),l([]),u("history"),alert("ä¸‹å•æˆåŠŸï¼")}catch(r){console.error("ä¸‹å•å¤±è´¥ Error:",r),alert("ä¸‹å•å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ§åˆ¶å°")}finally{g(!1)}};return e.jsxs("div",{className:"p-4 pt-10 pb-28 flex flex-col min-h-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"çˆ±å¿ƒè´­ç‰©è½¦"}),e.jsx("div",{className:"flex-1 space-y-4 overflow-y-auto pb-4",children:t.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-10",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ğŸ›’"}),e.jsx("p",{children:"è´­ç‰©è½¦é‡Œè¿˜æ²¡æœ‰å®è´å“¦"})]}):t.map(k=>e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm flex flex-col border border-orange-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:k.image}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:k.name}),e.jsxs("p",{className:"text-sm text-orange-500",children:["Â¥",k.price]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-full p-1 shrink-0",children:[e.jsx("button",{onClick:()=>w(k.cart_id,-1),className:"p-1 bg-white rounded-full text-gray-600 border border-gray-200",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold text-sm w-4 text-center",children:k.quantity}),e.jsx("button",{onClick:()=>w(k.cart_id,1),className:"p-1 bg-orange-400 text-white rounded-full",children:e.jsx(ee,{className:"w-4 h-4"})})]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2 pt-2 border-t border-gray-100 italic",children:["å¤‡æ³¨: ",k.special_request]})]},k.cart_id))}),t.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-white rounded-2xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-lg font-medium text-gray-700",children:"æ€»è®¡:"}),e.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:["Â¥",m]})]}),e.jsx("button",{onClick:N,disabled:n,className:"w-full py-3 rounded-xl bg-red-500 text-white font-bold shadow-lg shadow-red-200 flex items-center justify-center gap-2 active:scale-95 transition-transform",children:n?"ä¸‹å•ä¸­...":e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-5 h-5 fill-current"})," ç¡®è®¤ä¸‹å• (",t.length," é¡¹)"]})})]})]})},Ie=({userId:t,setRole:l,menuItems:u,allOrders:o,initialView:a="menu"})=>{const[n,g]=i.useState(a),[m,w]=i.useState(null),[N,k]=i.useState(null),[r,d]=i.useState([]),[v,S]=i.useState(1),[E,p]=i.useState("æ— ç‰¹æ®Šå¤‡æ³¨"),[C,A]=i.useState({spicy:!1,cilantro:!1,scallion:!1}),[T,R]=i.useState(""),x=i.useCallback(y=>{R(y)},[]),M=i.useCallback(async y=>{try{const{error:c}=await O.from("orders").update({urgent:!0,urgent_count:((N==null?void 0:N.urgent_count)||0)+1}).eq("id",y).select();if(c)throw new Error(c.message);x("å·²å‚¬å•ï¼å¤§å¨æ”¶åˆ°é€šçŸ¥å•¦ï½")}catch(c){console.error("å‚¬å•å¤±è´¥:",c)}},[N,x]);i.useEffect(()=>{if(!t)return;const y=o.filter(c=>c.user_id===t&&c.status!=="completed"&&c.status!=="rejected"&&c.status!=="cancelled"&&c.status!=="deleted").sort((c,U)=>new Date(U.created_at).getTime()-new Date(c.created_at).getTime())[0];y?k(y):(k(null),n==="status"&&g("menu"))},[t,o,n]);const b=y=>{w(y),S(1),p("æ— ç‰¹æ®Šå¤‡æ³¨"),A({spicy:!1,cilantro:!1,scallion:!1})},_=()=>{if(!m||v<=0)return;const y=[];C.spicy&&y.push("åŠ ç‚¹è¾£"),C.cilantro&&y.push("åŠ é¦™èœ"),C.scallion&&y.push("åŠ è‘±");let c=E.trim()||"æ— ç‰¹æ®Šå¤‡æ³¨";if(y.length>0){const U=y.join("ã€");c=c==="æ— ç‰¹æ®Šå¤‡æ³¨"?U:`${U}ï¼›${c}`}d(U=>[...U,{...m,quantity:v,special_request:c,quick_options:C,cart_id:crypto.randomUUID()}]),w(null),S(1),p("æ— ç‰¹æ®Šå¤‡æ³¨"),A({spicy:!1,cilantro:!1,scallion:!1}),x(`${m.name} x${v} (${c}) å·²åŠ å…¥è´­ç‰©è½¦! ğŸ‰`)},q=u,[f,s]=i.useState("å…¨éƒ¨"),h=["å…¨éƒ¨","ä¸»é£Ÿ","ä¸»èœ","ç´ èœ","æ±¤å“"],j=i.useMemo(()=>(f==="å…¨éƒ¨"?q:q.filter(c=>c.category===f)).sort((c,U)=>{var P,B;const z=((P=c.tags)==null?void 0:P.includes("æ‹›ç‰Œ"))||!1,F=((B=U.tags)==null?void 0:B.includes("æ‹›ç‰Œ"))||!1;return z&&!F?-1:!z&&F?1:0}),[q,f]),$=()=>{const y=te(o);if(n==="menu")return e.jsxs("div",{className:"px-4 pt-10 pb-28",children:[e.jsx("h2",{className:"font-bold text-2xl text-gray-800 mb-4",children:"ä»Šæ—¥èœå•"}),e.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:h.map(c=>e.jsx("button",{onClick:()=>s(c),className:`px-4 py-2 rounded-full font-bold text-sm whitespace-nowrap transition-all ${f===c?"bg-orange-500 text-white shadow-lg shadow-orange-200 scale-105":"bg-white text-gray-600 border border-gray-200 hover:border-orange-300"}`,children:c},c))}),e.jsx("div",{className:"space-y-4",children:j.map((c,U)=>e.jsxs("div",{onClick:()=>b(c),className:`bg-white rounded-2xl p-3 shadow-md border border-orange-50 flex gap-4 cursor-pointer transform transition-all duration-300 hover:shadow-xl ${c.stock<=0?"opacity-50 grayscale":"hover:scale-[1.02] active:scale-[0.98]"}`,style:{animation:`slideIn 0.3s ease-out ${U*.05}s backwards`},children:[e.jsxs("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-100 to-orange-200 rounded-xl flex items-center justify-center text-4xl shrink-0 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("span",{className:"relative transform group-hover:scale-110 transition-transform duration-300",children:c.image})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between py-1",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-gray-800",children:c.name}),c.tags&&c.tags.includes("æ‹›ç‰Œ")&&e.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-600 text-xs font-bold rounded-full",children:"æ‹›ç‰Œ"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1 line-clamp-2",children:c.description})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("span",{className:"text-orange-500 font-bold text-lg flex items-center",children:[e.jsx(Y,{className:"w-4 h-4 mr-1 fill-current animate-pulse"})," Â¥",c.price]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold shadow-md transition-all ${c.stock>0?"bg-orange-400 text-white shadow-orange-200 hover:bg-orange-500":"bg-gray-300 text-gray-600"}`,children:c.stock>0?"æ¥ä¸€ä»½":"å”®ç½„"})]})]})]},c.id))})]});if(n==="cart")return e.jsx(Ve,{cartItems:r,setCartItems:d,setView:g,userId:t,setActiveOrder:k});if(n==="history")return e.jsx(Pe,{userId:t,allOrders:o,showToast:x});if(n==="status"&&N){const c=N.status==="cooking",U=N.status==="pending",{displayId:z,displayTime:F}=H(N.created_at,y);return e.jsxs("div",{className:"min-h-full bg-[#FFFAF0] flex flex-col relative pb-10",children:[e.jsx("div",{className:"absolute top-0 w-full h-64 bg-orange-400 rounded-b-[40px] z-0"}),e.jsxs("div",{className:"relative z-10 px-6 pt-12 pb-6 flex-1 flex flex-col overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center text-white mb-8",children:[e.jsx("button",{onClick:()=>g("menu"),className:"p-2 bg-white/20 rounded-full backdrop-blur-sm",children:e.jsx(Ue,{})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"font-bold text-lg",children:["è®¢å•è¿½è¸ª - #",z]}),e.jsx("p",{className:"text-xs opacity-80",children:F})]}),e.jsx("div",{className:"w-8"})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 flex-1 flex flex-col items-center text-center",children:[e.jsxs("div",{className:"w-32 h-32 bg-orange-50 rounded-full flex items-center justify-center text-6xl mb-6 relative",children:[c?"ğŸ³":"ğŸ›ï¸",c&&e.jsx("div",{className:"absolute top-0 right-0 animate-ping w-4 h-4 bg-red-400 rounded-full"})]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:U?"ç­‰å¾…å¤§å¨æ¥å•":"å¤§å¨æ­£åœ¨çƒ¹é¥ªä¸­!"}),e.jsx("p",{className:"text-gray-500 text-sm mb-8",children:U?"å¤§å¨å¯èƒ½æ­£åœ¨æ‰“æ¸¸æˆï¼Œç¨ç­‰ä¸€ä¸‹...":"é¢„è®¡é€è¾¾ï¼šé©¬ä¸Šï¼ˆå¨æˆ¿ -> å®¢å…ï¼‰"}),e.jsx("div",{className:"w-full bg-gray-100 h-3 rounded-full overflow-hidden mb-8 relative",children:e.jsx("div",{className:`h-full bg-orange-400 rounded-full transition-all duration-1000 ${c?"w-2/3 animate-pulse":"w-1/6"}`})}),e.jsx("div",{className:"w-full bg-orange-50 h-px mb-6"}),e.jsxs("div",{className:"w-full bg-orange-50 rounded-xl p-4 text-left space-y-3 mb-auto",children:[e.jsx("h3",{className:"text-xs font-bold text-orange-400 uppercase tracking-wider",children:"è®¢å•è¯¦æƒ…"}),N.items.map((P,B)=>e.jsx("div",{className:"flex justify-between items-start border-b border-orange-100 last:border-b-0 last:pb-0 pb-2 mb-2",children:e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-gray-700",children:[P.name," x",P.quantity]}),e.jsxs("p",{className:"text-xs text-gray-500 italic mt-0.5",children:["å¤‡æ³¨: ",P.special_request]})]})},B))]}),e.jsx("button",{onClick:()=>M(N.id),className:"w-full py-4 mt-6 mb-4 bg-gray-900 text-white rounded-xl font-bold shadow-lg active:scale-95 transition-transform hover:bg-red-600",children:U?"ğŸ”” ç–¯ç‹‚å‚¬å•":"ğŸ¶ ä¹–ä¹–ç­‰å¾…"})]})]})]})}},L=({targetView:y,icon:c,label:U})=>e.jsxs("button",{onClick:()=>g(y),className:`flex flex-col items-center p-2 rounded-lg transition ${n===y?"text-orange-500":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(c,{className:"w-6 h-6 mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:U})]});return e.jsxs("div",{className:"min-h-screen bg-[#FFFAF0] flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-[#FFFAF0]/90 backdrop-blur-md px-4 py-3 flex justify-between items-center shadow-sm",children:[e.jsxs("h1",{className:"text-xl font-bold text-gray-800 flex items-center",children:[e.jsx(Y,{className:"w-6 h-6 text-red-500 mr-2 fill-current"}),"åƒè´§çš„ç‚¹å•æœº"]}),e.jsx("button",{onClick:()=>l(null),className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center hover:bg-red-100 transition shadow-md",title:"åˆ‡æ¢èº«ä»½",children:e.jsx(de,{className:"w-5 h-5 text-gray-600 hover:text-red-500"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pb-24",children:$()}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white border-t py-2 flex justify-around shadow-lg z-20",children:[e.jsx(L,{targetView:"menu",icon:Me,label:"èœå•"}),e.jsx(L,{targetView:"cart",icon:ae,label:`è´­ç‰©è½¦ (${r.length})`}),e.jsx(L,{targetView:"status",icon:oe,label:N?"è®¢å•çŠ¶æ€":"æ— è®¢å•"}),e.jsx(L,{targetView:"history",icon:J,label:"æˆ‘çš„è®¢å•"})]}),e.jsx(me,{message:T,onClose:()=>R("")}),e.jsx(K,{isOpen:!!m,onClose:()=>w(null),children:m&&e.jsxs("div",{className:"p-4 pb-6",children:[e.jsx("div",{className:"w-full aspect-square bg-gray-100 rounded-2xl overflow-hidden flex items-center justify-center text-6xl mb-3 shadow-lg",children:m.imageUrl?e.jsx("img",{src:m.imageUrl,alt:m.name,className:"w-full h-full object-cover",onError:y=>{y.target.onerror=null,y.target.src="https://placehold.co/400x400/f3f4f6/6b7280?text=æ— å®æ‹å›¾/é“¾æ¥å¤±æ•ˆ"}}):m.image}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:m.name}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:m.description}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm bg-gray-50 p-3 rounded-xl",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-gray-600",children:"ç±»åˆ«:"})," ",m.category]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-gray-600",children:"åšæ³•:"})," ",m.method]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-gray-600",children:"å£å‘³:"})," ",m.flavor]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-gray-600",children:"åº“å­˜:"})," ",m.stock>0?`${m.stock} ä»½`:"å”®ç½„"]})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl border border-blue-100",children:[e.jsx("label",{className:"text-xs font-bold text-blue-600 block mb-2",children:"å¿«æ·é€‰é¡¹"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>A(y=>({...y,spicy:!y.spicy})),className:`px-3 py-1.5 rounded-full text-sm font-bold transition-all ${C.spicy?"bg-red-500 text-white shadow-md":"bg-white text-gray-600 border border-gray-200"}`,children:"ğŸŒ¶ï¸ åŠ ç‚¹è¾£"}),e.jsx("button",{onClick:()=>A(y=>({...y,cilantro:!y.cilantro})),className:`px-3 py-1.5 rounded-full text-sm font-bold transition-all ${C.cilantro?"bg-green-500 text-white shadow-md":"bg-white text-gray-600 border border-gray-200"}`,children:"ğŸŒ¿ åŠ é¦™èœ"}),e.jsx("button",{onClick:()=>A(y=>({...y,scallion:!y.scallion})),className:`px-3 py-1.5 rounded-full text-sm font-bold transition-all ${C.scallion?"bg-green-600 text-white shadow-md":"bg-white text-gray-600 border border-gray-200"}`,children:"ğŸ§… åŠ è‘±"})]})]}),e.jsxs("div",{className:"bg-red-50 p-3 rounded-xl border border-red-100",children:[e.jsx("label",{className:"text-xs font-bold text-red-400 block mb-1",children:"æ•°é‡é€‰æ‹©"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 py-2",children:[e.jsx("button",{onClick:()=>S(y=>Math.max(1,y-1)),className:"p-2 bg-white rounded-full text-gray-600 border shadow-sm active:scale-95",children:e.jsx(xe,{})}),e.jsx("span",{className:"text-2xl font-bold text-gray-800",children:v}),e.jsx("button",{onClick:()=>S(y=>y+1),className:"p-2 bg-orange-400 text-white rounded-full shadow-md active:scale-95",children:e.jsx(ee,{})})]})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded-xl border border-green-100",children:[e.jsx("label",{className:"text-xs font-bold text-green-600 block mb-1",children:"æœ¬èœå“ç‰¹æ®Šå¤‡æ³¨"}),e.jsx("textarea",{value:E==="æ— ç‰¹æ®Šå¤‡æ³¨"?"":E,onChange:y=>p(y.target.value),className:"w-full bg-white rounded-lg p-2 text-sm border-none focus:ring-2 focus:ring-green-200 outline-none",rows:2,placeholder:"ä¾‹å¦‚ï¼šå¤šæ”¾é¦™èœï¼Œä¸è¦å¤ªç”œ"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-3",children:[e.jsx("button",{onClick:()=>w(null),className:"flex-1 py-3 rounded-xl bg-gray-100 font-bold text-gray-600 active:scale-95",children:"å–æ¶ˆ"}),e.jsxs("button",{onClick:_,disabled:m.stock<=0,className:`flex-1 py-3 rounded-xl text-white font-bold shadow-lg flex items-center justify-center gap-2 active:scale-95 ${m.stock>0?"bg-orange-500 shadow-orange-200":"bg-gray-400 shadow-gray-200 cursor-not-allowed"}`,children:[e.jsx(ae,{className:"w-5 h-5 fill-current"}),m.stock>0?"åŠ å…¥è´­ç‰©è½¦":"å·²å”®ç½„"]})]})]})})]})},ne=({item:t,onSave:l,onCancel:u,showToast:o})=>{var k;const[a,n]=i.useState({...t,isSignature:((k=t==null?void 0:t.tags)==null?void 0:k.includes("æ‹›ç‰Œ"))||!1}),[g,m]=i.useState(!1),w=r=>{const{name:d,value:v}=r.target;n(S=>({...S,[d]:d==="price"||d==="stock"?parseInt(v)||0:v}))},N=async r=>{const d=r.target.files[0];if(d){m(!0);try{const v=`${a.id}-${Date.now()}-${d.name.replace(/\s/g,"_")}`,S="menu_images",{data:E,error:p}=await O.storage.from(S).upload(v,d);if(p)throw new Error(p.message);const{data:C,error:A}=O.storage.from(S).getPublicUrl(v);if(A)throw new Error(A.message);if(C.publicUrl)n(T=>({...T,imageUrl:C.publicUrl})),o("å®æ‹å›¾å·²æˆåŠŸä¸Šä¼ è‡³äº‘ç«¯å¹¶è·å–é“¾æ¥ï¼");else throw new Error("æœªèƒ½è·å–åˆ°å…¬å…± URLã€‚è¯·æ£€æŸ¥ Storage æƒé™ã€‚")}catch(v){console.error("å›¾ç‰‡ä¸Šä¼ å¤±è´¥:",v),o(`ä¸Šä¼ å¤±è´¥: ${v.message}`)}finally{m(!1),r.target.value=""}}};return e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800",children:["ç¼–è¾‘ ",t.name]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"èœå"}),e.jsx("input",{name:"name",value:a.name,onChange:w,className:"mt-1 w-full p-2 border rounded-lg focus:ring-orange-500"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ä»·æ ¼ (Â¥)"}),e.jsx("input",{type:"number",name:"price",value:a.price,onChange:w,className:"mt-1 w-full p-2 border rounded-lg focus:ring-orange-500"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"åº“å­˜ (ä»½)"}),e.jsx("input",{type:"number",name:"stock",value:a.stock,onChange:w,className:"mt-1 w-full p-2 border rounded-lg focus:ring-orange-500"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ç±»åˆ«"}),e.jsx("select",{name:"category",value:a.category,onChange:w,className:"mt-1 w-full p-2 border rounded-lg focus:ring-orange-500",children:["ä¸»èœ","ä¸»é£Ÿ","ç”œç‚¹","æ±¤å“"].map(r=>e.jsx("option",{value:r,children:r},r))})]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-red-50 p-3 rounded-lg border border-red-100",children:[e.jsx("input",{type:"checkbox",id:"isSignature",checked:a.isSignature,onChange:r=>n(d=>({...d,isSignature:r.target.checked})),className:"w-5 h-5 text-red-600 rounded focus:ring-red-500"}),e.jsxs("label",{htmlFor:"isSignature",className:"text-sm font-bold text-red-600 cursor-pointer flex items-center gap-1",children:[e.jsx("span",{className:"text-lg",children:"â­"})," è®¾ä¸ºæ‹›ç‰Œèœå“"]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"æè¿°"}),e.jsx("textarea",{name:"description",value:a.description,onChange:w,className:"mt-1 w-full p-2 border rounded-lg focus:ring-orange-500",rows:"2"})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl border border-blue-100 space-y-2",children:[e.jsxs("span",{className:"text-sm font-bold text-blue-700 flex items-center",children:[e.jsx(De,{className:"w-4 h-4 mr-1"})," èœå“å®æ‹å›¾ç®¡ç† (Supabase Storage)"]}),e.jsx("input",{type:"file",accept:"image/*",onChange:N,disabled:g,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600 cursor-pointer disabled:opacity-50"}),e.jsx("div",{className:"flex items-center text-xs text-gray-500 pt-2 border-t border-blue-100",children:g?e.jsxs("span",{className:"flex items-center text-blue-600 font-semibold",children:[e.jsx(qe,{className:"w-4 h-4 mr-2 animate-spin"})," æ­£åœ¨ä¸Šä¼ åˆ° Supabase Storage..."]}):e.jsxs("span",{className:"text-gray-700",children:["å½“å‰ URL:",e.jsx("span",{className:"font-mono text-xs block truncate text-gray-700 bg-white p-1 rounded mt-1",children:a.imageUrl})]})}),e.jsxs("label",{className:"block pt-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"æˆ–æ‰‹åŠ¨è¾“å…¥å›¾ç‰‡ URL (å¤‡ç”¨)"}),e.jsx("input",{name:"imageUrl",value:a.imageUrl,onChange:w,className:"mt-1 w-full p-2 border rounded-lg focus:ring-orange-500 text-sm",placeholder:"ç²˜è´´å›¾ç‰‡é“¾æ¥"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:u,className:"flex-1 py-2 bg-gray-300 text-gray-700 rounded-lg font-bold active:scale-95",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:()=>{var d,v;const r=a.isSignature?(d=a.tags)!=null&&d.includes("æ‹›ç‰Œ")?a.tags:[...a.tags||[],"æ‹›ç‰Œ"]:((v=a.tags)==null?void 0:v.filter(S=>S!=="æ‹›ç‰Œ"))||[];l({...a,tags:r})},disabled:g,className:`flex-1 py-2 text-white rounded-lg font-bold shadow-md shadow-orange-200 active:scale-95 ${g?"bg-gray-400 cursor-not-allowed":"bg-orange-500"}`,children:g?"è¯·ç¨å€™...":"ä¿å­˜ä¿®æ”¹"})]})]})},He=({menuItems:t,updateMenu:l,deleteMenu:u,addMenu:o,showToast:a})=>{const[n,g]=i.useState(null),[m,w]=i.useState(!1),[N,k]=i.useState("å…¨éƒ¨"),r=["å…¨éƒ¨","ä¸»é£Ÿ","ä¸»èœ","ç´ èœ","æ±¤å“"],d=p=>{l(p),g(null),a("èœå“æ›´æ–°æˆåŠŸï¼")},v=p=>{o(p),w(!1),a("æ–°èœå“æ·»åŠ æˆåŠŸï¼")},S=(p,C)=>{window.confirm(`ç¡®å®šè¦åˆ é™¤ã€${C}ã€‘å—ï¼Ÿ`)&&(u(p),a("èœå“å·²åˆ é™¤"))},E=N==="å…¨éƒ¨"?t:t.filter(p=>p.category===N);return e.jsxs("div",{className:"p-4 pt-8 pb-20 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[e.jsx(Ee,{className:"w-6 h-6 mr-2 text-gray-500"}),"èœå•åŠåº“å­˜ç®¡ç†"]}),e.jsxs("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-green-500 text-white rounded-full font-bold shadow-lg active:scale-95 flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5"})," æ–°å¢èœå“"]})]}),e.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:r.map(p=>e.jsxs("button",{onClick:()=>k(p),className:`px-4 py-2 rounded-full font-bold text-sm whitespace-nowrap transition-all ${N===p?"bg-orange-500 text-white shadow-lg":"bg-white text-gray-600 border border-gray-200"}`,children:[p," (",p==="å…¨éƒ¨"?t.length:t.filter(C=>C.category===p).length,")"]},p))}),E.map(p=>e.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("span",{className:"text-4xl",children:p.image}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-bold text-gray-800",children:p.name}),e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-600 text-xs rounded-full",children:p.category})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:p.description}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["åº“å­˜: ",e.jsx("span",{className:`font-bold ${p.stock<=5?"text-red-500":"text-green-500"}`,children:p.stock})," ä»½"]}),e.jsxs("p",{className:"text-sm text-orange-500 font-bold",children:["Â¥",p.price]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(p),className:"p-2 bg-orange-500 text-white rounded-full shadow-md active:scale-95 transition-transform",children:e.jsx($e,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>S(p.id,p.name),className:"p-2 bg-red-500 text-white rounded-full shadow-md active:scale-95 transition-transform",children:e.jsx(Oe,{className:"w-5 h-5"})})]})]})},p.id)),E.length===0&&e.jsxs("div",{className:"text-center text-gray-400 py-10",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ğŸ½ï¸"}),e.jsx("p",{children:"è¯¥åˆ†ç±»æš‚æ— èœå“"})]}),e.jsx(K,{isOpen:!!n,onClose:()=>g(null),children:n&&e.jsx(ne,{item:n,onSave:d,onCancel:()=>g(null),showToast:a})}),e.jsx(K,{isOpen:m,onClose:()=>w(!1),children:e.jsx(ne,{item:{id:"m-"+Date.now(),name:"",description:"",price:19,stock:99,category:"ä¸»é£Ÿ",method:"",flavor:"",image:"ğŸ½ï¸",imageUrl:"https://placehold.co/320x180/facc15/374151?text=æ–°èœå“",tags:[]},onSave:v,onCancel:()=>w(!1),showToast:a})})]})},Be=({setRole:t,menuItems:l,updateMenu:u,deleteMenu:o,addMenu:a,allOrders:n,showToast:g})=>{const[m,w]=i.useState("orders"),[N,k]=i.useState("pending"),[r,d]=i.useState("all"),[v,S]=i.useState(null),E=i.useMemo(()=>te(n),[n]),p=i.useMemo(()=>{const f=new Set;return n.forEach(s=>{if(s.status!=="cancelled"&&s.status!=="rejected"){const h=V(s.created_at);f.add(h)}}),Array.from(f).sort().reverse()},[n]),C=async(f,s)=>{try{const h={status:s};s==="cooking"?h.cooking_started_at=new Date().toISOString():s==="completed"&&(h.completed_at=new Date().toISOString());const{error:j}=await O.from("orders").update(h).eq("id",f).select();if(j)throw new Error(j.message)}catch(h){console.error("æ›´æ–°çŠ¶æ€å¤±è´¥ Error:",h)}},A=[{key:"all",label:"æ‰€æœ‰è®¢å•",Icon:J,activeBg:"bg-gray-100",activeText:"text-gray-700"},{key:"pending",label:"å¾…å¤„ç†",Icon:oe,activeBg:"bg-orange-100",activeText:"text-orange-600"},{key:"cooking",label:"çƒ¹é¥ªä¸­",Icon:le,activeBg:"bg-blue-100",activeText:"text-blue-600"},{key:"completed",label:"å·²å®Œæˆ",Icon:_e,activeBg:"bg-green-100",activeText:"text-green-600"}],T=i.useMemo(()=>[...n].filter(s=>s.status!=="rejected"&&s.status!=="cancelled"&&s.status!=="deleted").filter(s=>r==="all"?!0:V(s.created_at)===r).sort((s,h)=>{const j={pending:0,cooking:1,completed:2},$=j[s.status]-j[h.status];return $!==0?$:new Date(h.created_at).getTime()-new Date(s.created_at).getTime()}).filter(s=>N==="all"?!0:s.status===N),[n,N,r]),R=i.useMemo(()=>[...n].filter(f=>f.status==="deleted").sort((f,s)=>new Date(s.created_at).getTime()-new Date(f.created_at).getTime()),[n]),x=async f=>{if(window.confirm("ç¡®å®šè¦æ°¸ä¹…åˆ é™¤æ­¤è®¢å•å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼"))try{const{error:s}=await O.from("orders").delete().eq("id",f);if(s)throw new Error(s.message);g("è®¢å•å·²æ°¸ä¹…åˆ é™¤")}catch(s){console.error("æ°¸ä¹…åˆ é™¤å¤±è´¥:",s),g("åˆ é™¤å¤±è´¥ï¼Œè¯·é‡è¯•")}},M=async f=>{try{const{error:s}=await O.from("orders").update({status:"pending"}).eq("id",f);if(s)throw new Error(s.message);g("è®¢å•å·²æ¢å¤åˆ°å¾…å¤„ç†")}catch(s){console.error("æ¢å¤å¤±è´¥:",s),g("æ¢å¤å¤±è´¥ï¼Œè¯·é‡è¯•")}},b=async()=>{if(window.confirm(`ç¡®å®šè¦æ¸…ç©ºå›æ”¶ç«™å—ï¼Ÿè¿™å°†æ°¸ä¹…åˆ é™¤ ${R.length} ä¸ªè®¢å•ï¼Œæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼`))try{const f=R.map(h=>h.id),{error:s}=await O.from("orders").delete().in("id",f);if(s)throw new Error(s.message);g(`å·²æ¸…ç©ºå›æ”¶ç«™ï¼Œåˆ é™¤äº† ${f.length} ä¸ªè®¢å•`)}catch(f){console.error("æ¸…ç©ºå›æ”¶ç«™å¤±è´¥:",f),g("æ¸…ç©ºå¤±è´¥ï¼Œè¯·é‡è¯•")}},_=()=>e.jsxs("div",{className:"px-4 space-y-4 pt-8 pb-24",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-700",children:["ğŸ—‘ï¸ å›æ”¶ç«™ (",R.length,")"]}),R.length>0&&e.jsx("button",{onClick:b,className:"px-4 py-2 bg-red-500 text-white rounded-lg font-bold text-sm hover:bg-red-600 transition active:scale-95",children:"æ¸…ç©ºå›æ”¶ç«™"})]}),R.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-20",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ğŸ—‘ï¸"}),e.jsx("p",{className:"text-lg",children:"å›æ”¶ç«™æ˜¯ç©ºçš„"}),e.jsx("p",{className:"text-sm mt-2",children:"å·²åˆ é™¤çš„è®¢å•ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ"})]}):R.map(f=>{const{displayId:s,displayTime:h}=H(f.created_at,E);return e.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-md border-l-4 border-gray-400 opacity-75",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-start bg-gray-50/50",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 text-lg",children:["è®¢å•å·: ",s]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["æ—¶é—´: ",h]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.customer_name})]}),e.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold bg-gray-200 text-gray-600",children:"å·²åˆ é™¤"})]}),e.jsx("div",{className:"p-4",children:f.items.map((j,$)=>e.jsxs("div",{className:"flex justify-between items-center mb-2 pb-2 border-b border-gray-50 last:border-b-0 last:pb-0",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-700",children:j.name}),j.special_request&&j.special_request!=="æ— ç‰¹æ®Šå¤‡æ³¨"&&e.jsxs("span",{className:"text-xs text-red-500 italic",children:["âš ï¸ å¤‡æ³¨: ",j.special_request]})]}),e.jsxs("span",{className:"font-bold text-gray-900",children:["x",j.quantity]})]},$))}),e.jsxs("div",{className:"p-3 bg-gray-50 flex gap-3",children:[e.jsx("button",{onClick:()=>M(f.id),className:"flex-1 py-2 bg-green-500 text-white rounded-lg font-bold text-sm hover:bg-green-600 transition active:scale-95",children:"æ¢å¤è®¢å•"}),e.jsx("button",{onClick:()=>x(f.id),className:"flex-1 py-2 bg-red-500 text-white rounded-lg font-bold text-sm hover:bg-red-600 transition active:scale-95",children:"æ°¸ä¹…åˆ é™¤"})]})]},f.id)})]}),q=()=>{var f;return e.jsxs("div",{className:"px-4 space-y-4 pt-8 pb-24",children:[e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[e.jsx("button",{onClick:()=>d("all"),className:`px-4 py-2 rounded-full whitespace-nowrap text-sm font-medium transition-all ${r==="all"?"bg-orange-500 text-white shadow-lg":"bg-white text-gray-600 border border-gray-200"}`,children:"å…¨éƒ¨æ—¥æœŸ"}),p.map(s=>{s.substring(0,4);const h=s.substring(4,6),j=s.substring(6,8);return e.jsxs("button",{onClick:()=>d(s),className:`px-4 py-2 rounded-full whitespace-nowrap text-sm font-medium transition-all ${r===s?"bg-orange-500 text-white shadow-lg":"bg-white text-gray-600 border border-gray-200"}`,children:[h,"/",j]},s)})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:A.map(({key:s,label:h,Icon:j,activeBg:$,activeText:L})=>{const y=s==="all"?n.filter(U=>U.status!=="rejected"&&U.status!=="cancelled").length:n.filter(U=>U.status===s).length,c=N===s;return e.jsxs("button",{onClick:()=>k(s),className:`rounded-xl p-2 text-center transition-all shadow-sm active:scale-95 ${c?$:"bg-white text-gray-50 hover:bg-gray-50"} border ${c?"border-transparent":"border-gray-100"}`,children:[e.jsxs("div",{className:`text-xl font-bold flex items-center justify-center ${c?L:"text-gray-700"}`,children:[e.jsx(j,{className:"w-5 h-5 mr-1"}),y]}),e.jsx("div",{className:`text-xs ${c?L:"text-gray-500"}`,children:h})]},s)})}),T.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-10",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ğŸ˜´"}),e.jsx("p",{children:N==="all"?"å½“å‰æ²¡æœ‰è®¢å•":`æ²¡æœ‰å¤„äºã€${(f=A.find(s=>s.key===N))==null?void 0:f.label}ã€‘çŠ¶æ€çš„è®¢å•`})]}):T.map(s=>{const{displayId:h,displayTime:j}=H(s.created_at,E);return e.jsxs("div",{className:`bg-white rounded-xl overflow-hidden shadow-md border-l-4 ${s.status==="pending"?"border-orange-500":s.status==="cooking"?"border-blue-500":"border-green-500"}`,children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-start bg-gray-50/50",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 text-lg",children:["è®¢å•å·: ",h]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["æ—¶é—´: ",j]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.customer_name})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${s.status==="pending"?"bg-orange-100 text-orange-600":s.status==="cooking"?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"}`,children:s.status==="pending"?"å¾…æ¥å•":s.status==="cooking"?"çƒ¹é¥ªä¸­":"å·²å®Œæˆ"})]}),e.jsx("div",{className:"p-4",children:s.items.map(($,L)=>e.jsxs("div",{className:"flex justify-between items-center mb-2 pb-2 border-b border-gray-50 last:border-b-0 last:pb-0",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-700",children:$.name}),$.special_request&&$.special_request!=="æ— ç‰¹æ®Šå¤‡æ³¨"&&e.jsxs("span",{className:"text-xs text-red-500 italic",children:["âš ï¸ å¤‡æ³¨: ",$.special_request]})]}),e.jsxs("span",{className:"font-bold text-gray-900",children:["x",$.quantity]})]},L))}),s.status!=="completed"&&e.jsxs("div",{className:"p-3 bg-gray-50 space-y-2",children:[e.jsxs("button",{onClick:()=>S(s),className:"w-full py-2 bg-gray-100 text-gray-700 rounded-lg font-bold text-sm active:scale-95 transition-transform flex items-center justify-center gap-1",children:[e.jsx(X,{className:"w-4 h-4"})," æŸ¥çœ‹è¯¦æƒ…"]}),e.jsxs("div",{className:"flex gap-3",children:[s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>C(s.id,"rejected"),className:"flex-1 py-2 bg-white border border-gray-200 text-gray-500 rounded-lg font-bold text-sm hover:bg-red-50 transition active:scale-95",children:"æ®‹å¿æ‹’ç»"}),e.jsx("button",{onClick:()=>C(s.id,"cooking"),className:"flex-1 py-2 bg-orange-500 text-white rounded-lg font-bold text-sm shadow-md shadow-orange-200 hover:bg-orange-600 transition active:scale-95",children:"å¼€å§‹çƒ¹é¥ª"})]}),s.status==="cooking"&&e.jsx("button",{onClick:()=>C(s.id,"completed"),className:"flex-1 py-2 bg-green-500 text-white rounded-lg font-bold text-sm shadow-md shadow-green-200 hover:bg-green-600 transition active:scale-95",children:"å®Œæˆå‡ºé¤"})]}),e.jsxs("button",{onClick:()=>C(s.id,"deleted"),className:"w-full py-2 bg-red-50 text-red-600 border border-red-200 rounded-lg font-bold text-sm hover:bg-red-100 transition active:scale-95 flex items-center justify-center gap-1",children:[e.jsx(re,{className:"w-4 h-4"})," åˆ é™¤è®¢å•"]})]}),s.status==="completed"&&e.jsxs("div",{className:"p-3 bg-gray-50 space-y-2",children:[e.jsxs("button",{onClick:()=>S(s),className:"w-full py-2 bg-gray-100 text-gray-700 rounded-lg font-bold text-sm active:scale-95 transition-transform flex items-center justify-center gap-1",children:[e.jsx(X,{className:"w-4 h-4"})," æŸ¥çœ‹è¯¦æƒ…"]}),e.jsxs("button",{onClick:()=>C(s.id,"deleted"),className:"w-full py-2 bg-red-50 text-red-600 border border-red-200 rounded-lg font-bold text-sm hover:bg-red-100 transition active:scale-95 flex items-center justify-center gap-1",children:[e.jsx(re,{className:"w-4 h-4"})," åˆ é™¤è®¢å•"]})]})]},s.id)})]})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsxs("div",{className:"bg-white px-4 py-4 shadow-sm flex justify-between items-center sticky top-0 z-10",children:[e.jsxs("h1",{className:"text-xl font-bold text-gray-800 flex items-center",children:[e.jsx(Se,{className:"w-6 h-6 text-gray-800 mr-2"}),"å¤§å¨æ§åˆ¶å°"]}),e.jsx("button",{onClick:()=>t(null),className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center hover:bg-red-100 transition shadow-md",title:"åˆ‡æ¢èº«ä»½",children:e.jsx(de,{className:"w-5 h-5 text-gray-600 hover:text-red-500"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pb-20",children:m==="orders"?q():m==="trash"?_():e.jsx(He,{menuItems:l,updateMenu:u,deleteMenu:o,addMenu:a,showToast:g})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white border-t py-2 flex justify-around shadow-lg z-20",children:[e.jsxs("button",{onClick:()=>w("orders"),className:`flex flex-col items-center p-2 rounded-lg transition ${m==="orders"?"text-orange-500":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(le,{className:"w-6 h-6 mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"è®¢å•ç®¡ç†"})]}),e.jsxs("button",{onClick:()=>w("trash"),className:`flex flex-col items-center p-2 rounded-lg transition ${m==="trash"?"text-orange-500":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(Ce,{className:"w-6 h-6 mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"å›æ”¶ç«™"})]}),e.jsxs("button",{onClick:()=>w("menu"),className:`flex flex-col items-center p-2 rounded-lg transition ${m==="menu"?"text-orange-500":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(J,{className:"w-6 h-6 mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"èœå•ç®¡ç†"})]})]}),v&&e.jsx(ge,{order:v,onClose:()=>S(null),sequenceMap:E})]})};function Ke(){const[t,l]=i.useState(null),[u,o]=i.useState([]),[a,n]=i.useState([]),[g,m]=i.useState(""),[w,N]=i.useState(!0),[k,r]=i.useState("menu"),d={uid:ze},v=i.useRef([]),S=i.useRef(!1),E=i.useRef(null),p=i.useCallback(x=>{m(x)},[]),C=i.useCallback((x,M,b="ğŸ””")=>{if(!("Notification"in window)){console.log("æµè§ˆå™¨ä¸æ”¯æŒç³»ç»Ÿé€šçŸ¥"),p(M);return}Notification.permission==="granted"?new Notification(x,{body:M,icon:b,badge:b,tag:"order-notification",requireInteraction:!1}):Notification.permission!=="denied"?Notification.requestPermission().then(_=>{_==="granted"?new Notification(x,{body:M,icon:b,badge:b,tag:"order-notification",requireInteraction:!1}):p(M)}):p(M)},[p]);i.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]),i.useEffect(()=>{(async()=>{const{data:b,error:_}=await O.from("menu").select("*").order("id",{ascending:!0});if(_){if(console.error("åŠ è½½èœå•å¤±è´¥:",_),b===null||b.length===0){console.log("æ•°æ®åº“èœå•ä¸ºç©ºï¼Œæ’å…¥åˆå§‹æ•°æ®...");const{error:q}=await O.from("menu").insert(Z);q||o(Z)}N(!1);return}if(!b||b.length===0){console.log("æ•°æ®åº“èœå•ä¸ºç©ºï¼Œæ’å…¥åˆå§‹æ•°æ®...");const q=Z.map(({imageUrl:h,...j})=>({...j,image_url:h})),{data:f,error:s}=await O.from("menu").insert(q).select();if(!s&&f){const h=f.map(j=>({...j,imageUrl:j.image_url}));o(h)}else console.error("æ’å…¥åˆå§‹èœå•å¤±è´¥:",s)}else{const q=b.map(f=>({...f,imageUrl:f.image_url}));o(q)}N(!1)})();const M=O.channel("menu-realtime-channel").on("postgres_changes",{event:"INSERT",schema:"public",table:"menu"},b=>{console.log("æ–°èœå“:",b.new);const _={...b.new,imageUrl:b.new.image_url};o(q=>[...q,_])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"menu"},b=>{console.log("èœå“æ›´æ–°:",b.new);const _={...b.new,imageUrl:b.new.image_url};o(q=>q.map(f=>f.id===_.id?_:f))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"menu"},b=>{console.log("èœå“åˆ é™¤:",b.old),o(_=>_.filter(q=>q.id!==b.old.id))}).subscribe();return()=>{O.removeChannel(M)}},[]),i.useEffect(()=>{(async()=>{const{data:b,error:_}=await O.from("orders").select("*").order("created_at",{ascending:!1});if(_){console.error("Supabase query failed:",_);return}n(b||[])})();const M=O.channel("orders-realtime-channel").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},b=>{console.log("æ–°è®¢å•:",b.new),n(_=>[b.new,..._])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders"},b=>{console.log("è®¢å•æ›´æ–°:",b.new),n(_=>_.map(q=>q.id===b.new.id?b.new:q))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"orders"},b=>{console.log("è®¢å•åˆ é™¤:",b.old),n(_=>_.filter(q=>q.id!==b.old.id))}).subscribe();return()=>{O.removeChannel(M)}},[]),i.useEffect(()=>{var q,f;if(!t){v.current=a,E.current=t;return}if(!S.current){S.current=!0,v.current=a,E.current=t;return}if(E.current!==t){E.current=t,v.current=a;return}const x=v.current||[];if(x.length===0&&a.length===0)return;const M=a.filter(s=>!x.some(h=>h.id===s.id));if(t==="kitchen"&&M.length>0){const s=M[0],h=((f=(q=s.items)==null?void 0:q[0])==null?void 0:f.name)||"çˆ±å¿ƒæ–™ç†",j=s.customer_name||"å®¢äºº";C("ğŸ´ æ–°è®¢å•",`${j} åˆšä¸‹å•äº† ${h}`,"ğŸ´")}a.reduce((s,h)=>{const j=x.find($=>$.id===h.id);return j&&j.status!==h.status&&s.push(h),s},[]).forEach(s=>{var h,j,$,L,y,c;if(t==="customer"&&s.user_id===d.uid){const z={cooking:{title:"ğŸ‘¨â€ğŸ³ å¤§å¨å·²æ¥å•",msg:"æ­£åœ¨çƒ¹é¥ªä¸­ï½"},completed:{title:"âœ… å‡ºé¤å®Œæˆ",msg:"å¿«æ¥é¢†å–ç¾å‘³ï½"},rejected:{title:"âŒ è®¢å•è¢«æ‹’ç»",msg:"å¤§å¨æš‚æ—¶å¿™ä¸è¿‡æ¥ï¼Œç¨åå†è¯•å“¦ï½"},cancelled:{title:"ğŸš« è®¢å•å·²å–æ¶ˆ",msg:"æ‚¨çš„è®¢å•å·²å–æ¶ˆ"}}[s.status];if(z){const F=((j=(h=s.items)==null?void 0:h[0])==null?void 0:j.name)||"èœå“";C(z.title,`${F} - ${z.msg}`)}}if(t==="kitchen"){if(s.status==="pending"){const U=((L=($=s.items)==null?void 0:$[0])==null?void 0:L.name)||"èœå“";C("ğŸ”” è®¢å•çŠ¶æ€å˜åŒ–",`æœ‰è®¢å•å›åˆ°äº†å¾…å¤„ç†çŠ¶æ€: ${U}`)}if(s.status==="cancelled"){const U=((c=(y=s.items)==null?void 0:y[0])==null?void 0:c.name)||"èœå“";C("âŒ è®¢å•å–æ¶ˆ",`å®¢äººå–æ¶ˆäº†è®¢å•: ${U}`)}}}),a.reduce((s,h)=>{const j=x.find($=>$.id===h.id);return j&&h.urgent&&(!j.urgent||h.urgent_count>(j.urgent_count||0))&&s.push(h),s},[]).forEach(s=>{var h,j;if(t==="kitchen"){const $=((j=(h=s.items)==null?void 0:h[0])==null?void 0:j.name)||"èœå“";C("ğŸ”” å‚¬å•é€šçŸ¥",`å®¢äººåœ¨å‚¬å•å•¦ï¼è®¢å•: ${$}`,"ğŸ””")}}),v.current=a},[a,t,C,d.uid]);const A=i.useCallback(async x=>{o(b=>b.map(_=>_.id===x.id?x:_));const{error:M}=await O.from("menu").update({name:x.name,description:x.description,price:x.price,stock:x.stock,category:x.category,method:x.method,flavor:x.flavor,image:x.image,image_url:x.imageUrl||x.image_url,tags:x.tags||[],updated_at:new Date().toISOString()}).eq("id",x.id);M&&console.error("æ›´æ–°èœå•åˆ°äº‘ç«¯å¤±è´¥:",M)},[]),T=i.useCallback(async x=>{o(b=>b.filter(_=>_.id!==x));const{error:M}=await O.from("menu").delete().eq("id",x);M&&console.error("ä»äº‘ç«¯åˆ é™¤èœå•å¤±è´¥:",M)},[]),R=i.useCallback(async x=>{o(b=>[...b,x]);const{error:M}=await O.from("menu").insert([{id:x.id,name:x.name,description:x.description,price:x.price,stock:x.stock,category:x.category,method:x.method,flavor:x.flavor,image:x.image,image_url:x.imageUrl||x.image_url,tags:x.tags||[]}]);M&&console.error("æ·»åŠ èœå•åˆ°äº‘ç«¯å¤±è´¥:",M)},[]);return!d||w?e.jsx(Fe,{}):t?e.jsxs("div",{className:"font-sans max-w-md mx-auto bg-white min-h-screen shadow-2xl overflow-hidden",children:[e.jsx(me,{message:g,onClose:()=>m("")}),t==="customer"?e.jsx(Ie,{userId:d.uid,setRole:l,menuItems:u,allOrders:a,initialView:k}):e.jsx(Be,{setRole:l,menuItems:u,updateMenu:A,deleteMenu:T,addMenu:R,allOrders:a,showToast:p})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 via-yellow-50 to-orange-100 flex flex-col items-center justify-between p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-10 left-10 text-6xl opacity-20 animate-bounce",children:"ğŸ³"}),e.jsx("div",{className:"absolute top-32 right-16 text-5xl opacity-20 animate-pulse",children:"ğŸ¥˜"}),e.jsx("div",{className:"absolute bottom-32 left-20 text-5xl opacity-20 animate-bounce delay-100",children:"ğŸœ"}),e.jsx("div",{className:"absolute bottom-20 right-12 text-6xl opacity-20 animate-pulse delay-200",children:"ğŸ²"}),e.jsxs("div",{className:"text-center mt-12 z-10",children:[e.jsx("div",{className:"inline-block mb-4 animate-in zoom-in duration-500",children:e.jsx("div",{className:"text-7xl mb-2",children:"â¤ï¸"})}),e.jsx("h1",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-orange-600 to-red-500 mb-3 animate-in slide-in-from-top duration-700",children:"å°è’‹ç‚’èœé¦†"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-600 animate-in fade-in duration-1000",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ‘¨â€ğŸ³"}),e.jsx("p",{className:"text-base font-medium",children:"çˆ±å¿ƒå¨æˆ¿ Â· æ¸©æš–æ–™ç†"}),e.jsx("span",{className:"text-2xl",children:"ğŸ½ï¸"})]})]}),e.jsx("div",{className:"z-10 animate-in zoom-in duration-700 delay-200",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-9xl filter drop-shadow-2xl",children:"ğŸ‘¨â€ğŸ³"}),e.jsx("div",{className:"absolute -top-2 -right-2 text-4xl animate-bounce",children:"â¤ï¸"}),e.jsx("div",{className:"absolute -bottom-2 -left-2 text-3xl animate-pulse",children:"âœ¨"})]})}),e.jsxs("div",{className:"w-full max-w-sm space-y-4 mb-8 z-10",children:[e.jsxs("button",{onClick:()=>{l("customer"),r("menu")},className:"w-full bg-gradient-to-r from-orange-400 to-orange-500 hover:from-orange-500 hover:to-orange-600 p-6 rounded-3xl shadow-2xl shadow-orange-200 flex items-center gap-4 transition-all duration-300 hover:scale-105 active:scale-95 border-2 border-white animate-in slide-in-from-bottom duration-500",children:[e.jsx("div",{className:"w-20 h-20 bg-white rounded-2xl flex items-center justify-center text-5xl shadow-lg transform -rotate-6 hover:rotate-0 transition-transform",children:"ğŸ½ï¸"}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:"æˆ‘è¦ç‚¹èœ"}),e.jsx("p",{className:"text-orange-100 text-sm font-medium",children:"è‚šå­é¥¿äº†ï¼Œæƒ³åƒå¥½åƒçš„ï½"})]}),e.jsx("div",{className:"text-3xl text-white",children:"â†’"})]}),e.jsxs("button",{onClick:()=>{l("customer"),r("history")},className:"w-full bg-gradient-to-r from-red-400 to-pink-500 hover:from-red-500 hover:to-pink-600 p-6 rounded-3xl shadow-2xl shadow-pink-200 flex items-center gap-4 transition-all duration-300 hover:scale-105 active:scale-95 border-2 border-white animate-in slide-in-from-bottom duration-500 delay-100",children:[e.jsx("div",{className:"w-20 h-20 bg-white rounded-2xl flex items-center justify-center text-5xl shadow-lg transform rotate-6 hover:rotate-0 transition-transform",children:"ğŸ“"}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:"æˆ‘çš„è®¢å•"}),e.jsx("p",{className:"text-pink-100 text-sm font-medium",children:"æŸ¥çœ‹è®¢å•çŠ¶æ€å’Œå†å²ï½"})]}),e.jsx("div",{className:"text-3xl text-white",children:"â†’"})]}),e.jsxs("button",{onClick:()=>l("kitchen"),className:"w-full bg-gradient-to-r from-purple-400 to-indigo-500 hover:from-purple-500 hover:to-indigo-600 p-6 rounded-3xl shadow-2xl shadow-purple-200 flex items-center gap-4 transition-all duration-300 hover:scale-105 active:scale-95 border-2 border-white animate-in slide-in-from-bottom duration-500 delay-200",children:[e.jsx("div",{className:"w-20 h-20 bg-white rounded-2xl flex items-center justify-center text-5xl shadow-lg transform -rotate-6 hover:rotate-0 transition-transform",children:"ğŸ"}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:"å¤§å¨ç‰¹ä¾›"}),e.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"ç®¡ç†èœå•ï¼Œç²¾å¿ƒçƒ¹é¥ªï½"})]}),e.jsx("div",{className:"text-3xl text-white",children:"â†’"})]})]}),e.jsx("div",{className:"absolute bottom-2 text-center text-xs text-gray-400 animate-in fade-in duration-1000 delay-500",children:e.jsx("p",{children:"ğŸ’ ç”¨çˆ±çƒ¹é¥ªæ¯ä¸€é¤ ğŸ’"})})]})}const I="/couple-ordering/";"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register(I+"sw.js",{scope:I}).then(t=>{console.log("SW registered:",t)}).catch(t=>{console.error("SW registration failed:",t)})});const We=()=>{const t=document.createElement("link");t.rel="manifest",t.href=I+"manifest.json",document.head.appendChild(t);const l=document.createElement("link");l.rel="icon",l.type="image/png",l.sizes="192x192",l.href=I+"icon-192.png",document.head.appendChild(l);const u=document.createElement("link");u.rel="apple-touch-icon",u.href=I+"icon-192.png",document.head.appendChild(u)};We();Q.createRoot(document.getElementById("root")).render(e.jsx(he.StrictMode,{children:e.jsx(Ke,{})}));
