import{r as l,a as Ie,R as Oe}from"./vendor-DnjGVpDl.js";import{c as Fe}from"./supabase-BBflACvg.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))x(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const g of n.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&x(g)}).observe(document,{childList:!0,subtree:!0});function f(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function x(s){if(s.ep)return;s.ep=!0;const n=f(s);fetch(s.href,n)}})();var _e={exports:{}},re={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Le=l,Re=Symbol.for("react.element"),ze=Symbol.for("react.fragment"),Be=Object.prototype.hasOwnProperty,Ve=Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,He={key:!0,ref:!0,__self:!0,__source:!0};function Ue(t,r,f){var x,s={},n=null,g=null;f!==void 0&&(n=""+f),r.key!==void 0&&(n=""+r.key),r.ref!==void 0&&(g=r.ref);for(x in r)Be.call(r,x)&&!He.hasOwnProperty(x)&&(s[x]=r[x]);if(t&&t.defaultProps)for(x in r=t.defaultProps,r)s[x]===void 0&&(s[x]=r[x]);return{$$typeof:Re,type:t,key:n,ref:g,props:s,_owner:Ve.current}}re.Fragment=ze;re.jsx=Ue;re.jsxs=Ue;_e.exports=re;var e=_e.exports,oe={},ve=Ie;oe.createRoot=ve.createRoot,oe.hydrateRoot=ve.hydrateRoot;/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ke={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),B=(t,r)=>{const f=l.forwardRef(({color:x="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:g,className:c="",children:y,...C},v)=>l.createElement("svg",{ref:v,...Ke,width:s,height:s,stroke:x,strokeWidth:g?Number(n)*24/Number(s):n,className:["lucide",`lucide-${Qe(t)}`,c].join(" "),...C},[...r.map(([p,b])=>l.createElement(p,b)),...Array.isArray(y)?y:[y]]));return f.displayName=`${t}`,f};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=B("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=B("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=B("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=B("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=B("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=B("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=B("FileUp",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=B("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=B("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=B("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=B("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=B("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=B("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=B("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=B("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=B("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=B("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=B("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=B("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=B("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=B("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ee=t=>{if(!t)return"N/A";const r=new Date(t),f=r.getFullYear(),x=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0");return`${f}${x}${s}`},ge=t=>{if(!t)return"N/A";const r=new Date(t),f=String(r.getHours()).padStart(2,"0"),x=String(r.getMinutes()).padStart(2,"0"),s=String(r.getSeconds()).padStart(2,"0");return`${f}:${x}:${s}`},pe=t=>{if(!t||t.length===0)return new Map;const r=[...t].sort((s,n)=>new Date(s.created_at).getTime()-new Date(n.created_at).getTime()),f={},x=new Map;for(const s of r){const n=ee(s.created_at);f[n]?f[n]++:f[n]=1,x.set(s.created_at,f[n])}return x},se=(t,r)=>{if(!t)return{displayId:"N/A",displayTime:"N/A"};const f=ee(t),x=r.get(t)||0,s=String(x).padStart(3,"0");return{displayId:`${f}-${s}`,displayTime:ge(t)}},Ye="https://tpenvfpvhvfyftcsmbxb.supabase.co",et="sb_publishable_jMdHVHJNEuwDAKPjpeowkw__yWb7ZaP",T=Fe(Ye,et),Se=async(t,r,f,x="html",s=null)=>{if(!t)return console.log("PushPlus token æœªé…ç½®ï¼Œè·³è¿‡å¾®ä¿¡æŽ¨é€"),!1;try{const n={token:t,title:r,content:f,template:x,channel:"wechat"};s&&(n.to=s);const c=await(await fetch("https://www.pushplus.plus/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json();return c.code===200?(console.log("PushPlus æŽ¨é€æˆåŠŸ:",r,s?`(å¥½å‹: ${s.substring(0,8)}...)`:"(è‡ªå·±)"),!0):(console.error("PushPlus æŽ¨é€å¤±è´¥:",c.msg),!1)}catch(n){return console.error("PushPlus æŽ¨é€å¼‚å¸¸:",n),!1}},le=[{id:"m-1",name:"é¦™ç‚’åŠ²é“é¢",description:"é¦™æ°”æµ“éƒï¼Œé…æ–™ä¸°å¯Œ",price:19,stock:99,sales:0,category:"ä¸»é£Ÿ",method:"å¤§ç«å¿«ç‚’ï¼Œé¢æ¡ç­‹é“",flavor:"é¦™æ°”æµ“éƒï¼Œé…æ–™ä¸°å¯Œ",image:"ðŸœ",imageUrl:"https://placehold.co/320x180/facc15/374151?text=é¦™ç‚’åŠ²é“é¢",tags:[]},{id:"m-2",name:"ç»å…¸ç‚’ç±³ç²‰",description:"ç²’ç²’åˆ†æ˜Žï¼Œå£æ„Ÿçˆ½æ»‘",price:19,stock:99,sales:0,category:"ä¸»é£Ÿ",method:"é«˜æ¸©å¿«ç‚’ï¼Œç«å€™ç²¾å‡†",flavor:"ç²’ç²’åˆ†æ˜Žï¼Œå£æ„Ÿçˆ½æ»‘",image:"ðŸ",imageUrl:"https://placehold.co/320x180/facc15/374151?text=ç»å…¸ç‚’ç±³ç²‰",tags:[]},{id:"m-3",name:"ç§˜åˆ¶ç‚’é¥­",description:"ç±³é¦™å››æº¢ï¼Œå±‚æ¬¡ä¸°å¯Œ",price:19,stock:99,sales:0,category:"ä¸»é£Ÿ",method:"ç§˜åˆ¶é…æ–¹ï¼Œå¿«é€Ÿç¿»ç‚’",flavor:"ç±³é¦™å››æº¢ï¼Œå±‚æ¬¡ä¸°å¯Œ",image:"ðŸš",imageUrl:"https://placehold.co/320x180/facc15/374151?text=ç§˜åˆ¶ç‚’é¥­",tags:[]},{id:"m-4",name:"è¾£é¦™è‚‰æœ«ç±³ç²‰",description:"é²œé¦™å¾®è¾£ï¼Œç±³ç²‰æŸ”æ»‘",price:19,stock:99,sales:0,category:"ä¸»é£Ÿ",method:"è‚‰æœ«ç‚’é¦™ï¼Œè¾£æ¤’æå‘³",flavor:"é²œé¦™å¾®è¾£ï¼Œç±³ç²‰æŸ”æ»‘",image:"ðŸŒ¶ï¸",imageUrl:"https://placehold.co/320x180/facc15/374151?text=è¾£é¦™è‚‰æœ«ç±³ç²‰",tags:[]},{id:"m-5",name:"ç™½ç±³é¥­",description:"æ¸…æ·¡åŽŸé¦™ï¼Œç™¾æ­ä¸»é£Ÿ",price:19,stock:99,sales:0,category:"ä¸»é£Ÿ",method:"è’¸ç…®ç±³ç²’ï¼Œæ¾è½¯é¥±æ»¡",flavor:"æ¸…æ·¡åŽŸé¦™ï¼Œç™¾æ­ä¸»é£Ÿ",image:"ðŸš",imageUrl:"https://placehold.co/320x180/facc15/374151?text=ç™½ç±³é¥­",tags:[]},{id:"m-6",name:"ç…®æ–¹ä¾¿é¢",description:"å¿«æ·é²œé¦™ï¼Œæ±¤æ±æµ“éƒ",price:19,stock:99,sales:0,category:"ä¸»é£Ÿ",method:"çƒ­æ°´ç…®åˆ¶ï¼Œè°ƒæ–™å…¥å‘³",flavor:"å¿«æ·é²œé¦™ï¼Œæ±¤æ±æµ“éƒ",image:"ðŸœ",imageUrl:"https://placehold.co/320x180/facc15/374151?text=ç…®æ–¹ä¾¿é¢",tags:[]},{id:"m-7",name:"æ¸…æ±¤æŒ‚é¢",description:"æ¸…çˆ½æ·¡é›…ï¼Œé¢æ¡æŸ”æ»‘",price:19,stock:99,sales:0,category:"ä¸»é£Ÿ",method:"æŒ‚é¢ç…®ç†Ÿï¼Œæ¸…æ±¤è°ƒå‘³",flavor:"æ¸…çˆ½æ·¡é›…ï¼Œé¢æ¡æŸ”æ»‘",image:"ðŸ¥¢",imageUrl:"https://placehold.co/320x180/facc15/374151?text=æ¸…æ±¤æŒ‚é¢",tags:[]},{id:"m-8",name:"é¦™çƒ¤åå¸",description:"æ¾è½¯å¾®ç”œï¼Œç„¦é¦™å¯å£",price:19,stock:99,sales:0,category:"ä¸»é£Ÿ",method:"çƒ¤åˆ¶é‡‘é»„ï¼Œå¤–è„†å†…è½¯",flavor:"æ¾è½¯å¾®ç”œï¼Œç„¦é¦™å¯å£",image:"ðŸž",imageUrl:"https://placehold.co/320x180/facc15/374151?text=é¦™çƒ¤åå¸",tags:[]},{id:"m-9",name:"å¯ä¹ç‚–é¸¡ç¿…",description:"ç”œé¦™æµ“éƒï¼Œé¸¡ç¿…å«©æ»‘",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"å¯ä¹æ…¢ç‚–ï¼Œå…¥å‘³é²œç¾Ž",flavor:"ç”œé¦™æµ“éƒï¼Œé¸¡ç¿…å«©æ»‘",image:"ðŸ—",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=å¯ä¹ç‚–é¸¡ç¿…",tags:[]},{id:"m-10",name:"ç„¦é¦™æŽ’éª¨",description:"å¤–ç„¦é‡Œå«©ï¼Œé¦™æ°”æ‰‘é¼»",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"é«˜æ¸©ç…Žåˆ¶ï¼Œæ…¢ç«æ”¶æ±",flavor:"å¤–ç„¦é‡Œå«©ï¼Œé¦™æ°”æ‰‘é¼»",image:"ðŸ–",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=ç„¦é¦™æŽ’éª¨",tags:[]},{id:"m-11",name:"éº»è¾£çŒªè€³",description:"è„†çˆ½éº»è¾£ï¼Œå¼€èƒƒä¸‹é…’",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"å¤åˆ¶å…¥å‘³ï¼Œè¾£æ¤’çˆ†ç‚’",flavor:"è„†çˆ½éº»è¾£ï¼Œå¼€èƒƒä¸‹é…’",image:"ðŸŒ¶ï¸",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=éº»è¾£çŒªè€³",tags:[]},{id:"m-12",name:"è€å¹²å¦ˆç‚’ç«è…¿",description:"è¾£é¦™æµ“çƒˆï¼Œç«è…¿å’¸é¦™",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"è€å¹²å¦ˆé…±çˆ†ç‚’",flavor:"è¾£é¦™æµ“çƒˆï¼Œç«è…¿å’¸é¦™",image:"ðŸ¥“",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=è€å¹²å¦ˆç‚’ç«è…¿",tags:[]},{id:"m-13",name:"çº¢çƒ§ç§˜åˆ¶è‚‰",description:"è‚¥è€Œä¸è…»ï¼Œå…¥å£å³åŒ–",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"ç§˜åˆ¶é…±æ–™æ…¢ç‚–",flavor:"è‚¥è€Œä¸è…»ï¼Œå…¥å£å³åŒ–",image:"ðŸ–",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=çº¢çƒ§ç§˜åˆ¶è‚‰",tags:["æ‹›ç‰Œ"]},{id:"m-14",name:"é…¸èåœç‰›è‚š",description:"é…¸çˆ½å¼€èƒƒï¼Œç‰›è‚šè„†å«©",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"é…¸èåœä¸Žç‰›è‚šå¿«ç‚’",flavor:"é…¸çˆ½å¼€èƒƒï¼Œç‰›è‚šè„†å«©",image:"ðŸ¥˜",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=é…¸èåœç‰›è‚š",tags:[]},{id:"m-15",name:"é’æ¤’ç‚’è›‹",description:"æ¸…é¦™çˆ½å£ï¼Œè›‹å«©æ¤’è„†",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"å¿«ç«ç¿»ç‚’ï¼Œä¿æŒé²œå«©",flavor:"æ¸…é¦™çˆ½å£ï¼Œè›‹å«©æ¤’è„†",image:"ðŸ¥š",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=é’æ¤’ç‚’è›‹",tags:[]},{id:"m-16",name:"ç»å…¸è¾£æ¤’ç‚’è‚‰",description:"è¾£é¦™æ‰‘é¼»ï¼Œè‚‰ç‰‡é²œå«©",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"è¾£æ¤’çˆ†ç‚’ï¼Œè‚‰é¦™å…¥å‘³",flavor:"è¾£é¦™æ‰‘é¼»ï¼Œè‚‰ç‰‡é²œå«©",image:"ðŸŒ¶ï¸",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=ç»å…¸è¾£æ¤’ç‚’è‚‰",tags:[]},{id:"m-17",name:"å°ç‚’é»„ç‰›è‚‰",description:"é²œè¾£çˆ½å£ï¼Œç‰›è‚‰åŠ²é“",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"å¿«ç«ç¿»ç‚’ï¼Œé¦™è¾£æå‘³",flavor:"é²œè¾£çˆ½å£ï¼Œç‰›è‚‰åŠ²é“",image:"ðŸ¥©",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=å°ç‚’é»„ç‰›è‚‰",tags:[]},{id:"m-18",name:"æ··åˆæ¤’çˆ†ç‚’ç‰›è‚‰",description:"å¤šæ¤’èžåˆï¼Œç‰›è‚‰é²œé¦™",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"å½©æ¤’å¿«ç‚’ï¼Œè‚‰è´¨æ»‘å«©",flavor:"å¤šæ¤’èžåˆï¼Œç‰›è‚‰é²œé¦™",image:"ðŸ«‘",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=æ··åˆæ¤’çˆ†ç‚’ç‰›è‚‰",tags:[]},{id:"m-19",name:"é…¸èœé±¼",description:"é…¸è¾£é²œé¦™ï¼Œé±¼ç‰‡å«©æ»‘",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"é…¸èœç†¬æ±¤ï¼Œé±¼ç‰‡å…¥å‘³",flavor:"é…¸è¾£é²œé¦™ï¼Œé±¼ç‰‡å«©æ»‘",image:"ðŸŸ",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=é…¸èœé±¼",tags:["æ‹›ç‰Œ"]},{id:"m-20",name:"çº¢çƒ§æŽ’éª¨",description:"æµ“é¦™é…±æ±ï¼ŒæŽ’éª¨è½¯çƒ‚",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"æ…¢ç«çº¢çƒ§ï¼Œé…±é¦™æµ“éƒ",flavor:"æµ“é¦™é…±æ±ï¼ŒæŽ’éª¨è½¯çƒ‚",image:"ðŸ–",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=çº¢çƒ§æŽ’éª¨",tags:[]},{id:"m-21",name:"é²œæ¤’å°ç‚’é¸¡",description:"é²œè¾£çˆ½å£ï¼Œé¸¡è‚‰å«©æ»‘",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"é²œæ¤’çˆ†ç‚’ï¼Œé¸¡è‚‰å…¥å‘³",flavor:"é²œè¾£çˆ½å£ï¼Œé¸¡è‚‰å«©æ»‘",image:"ðŸ”",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=é²œæ¤’å°ç‚’é¸¡",tags:[]},{id:"m-22",name:"å†œå®¶ä¸€ç¢—é¦™",description:"å®¶å¸¸æµ“é¦™ï¼Œé£Ÿæä¸°å¯Œ",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"å¤šæ–™åˆç‚’ï¼Œå±‚æ¬¡åˆ†æ˜Ž",flavor:"å®¶å¸¸æµ“é¦™ï¼Œé£Ÿæä¸°å¯Œ",image:"ðŸ¥˜",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=å†œå®¶ä¸€ç¢—é¦™",tags:[]},{id:"m-23",name:"éº»å©†è±†è…",description:"éº»è¾£é²œé¦™ï¼Œè±†è…å«©æ»‘",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"è±†è…å…¥é”…ï¼Œéº»è¾£è°ƒå‘³",flavor:"éº»è¾£é²œé¦™ï¼Œè±†è…å«©æ»‘",image:"ðŸŒ¶ï¸",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=éº»å©†è±†è…",tags:[]},{id:"m-24",name:"è‚‰æœ«èŒ„å­",description:"å’¸é¦™å…¥å‘³ï¼ŒèŒ„å­è½¯ç³¯",price:19,stock:99,sales:0,category:"ä¸»èœ",method:"è‚‰æœ«ç‚’é¦™ï¼ŒèŒ„å­ç‚–ç…®",flavor:"å’¸é¦™å…¥å‘³ï¼ŒèŒ„å­è½¯ç³¯",image:"ðŸ†",imageUrl:"https://placehold.co/320x180/ea580c/ffffff?text=è‚‰æœ«èŒ„å­",tags:[]},{id:"m-25",name:"æ¸…ç‚’æ—¶è”¬",description:"æ¸…ç”œçˆ½å£ï¼Œå¥åº·ç¾Žå‘³",price:19,stock:99,sales:0,category:"ç´ èœ",method:"è½»æ²¹å¿«ç‚’ï¼Œä¿ç•™åŽŸå‘³",flavor:"æ¸…ç”œçˆ½å£ï¼Œå¥åº·ç¾Žå‘³",image:"ðŸ¥¬",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=æ¸…ç‚’æ—¶è”¬",tags:[]},{id:"m-26",name:"é…¸è¾£åœŸè±†ä¸",description:"é…¸è¾£å¼€èƒƒï¼Œè„†çˆ½ä¸‹é¥­",price:19,stock:99,sales:0,category:"ç´ èœ",method:"å¿«ç‚’åœŸè±†ä¸ï¼Œè°ƒé…¸è¾£æ±",flavor:"é…¸è¾£å¼€èƒƒï¼Œè„†çˆ½ä¸‹é¥­",image:"ðŸ¥”",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=é…¸è¾£åœŸè±†ä¸",tags:[]},{id:"m-27",name:"é…¸è¾£è—•ä¸",description:"çˆ½è„†é…¸è¾£ï¼Œæ¸…æ–°è§£è…»",price:19,stock:99,sales:0,category:"ç´ èœ",method:"è—•ä¸å¿«ç‚’ï¼Œé…¸è¾£è°ƒå‘³",flavor:"çˆ½è„†é…¸è¾£ï¼Œæ¸…æ–°è§£è…»",image:"ðŸŒ±",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=é…¸è¾£è—•ä¸",tags:[]},{id:"m-28",name:"æ¸…ç‚’å„¿èœ",description:"æ¸…é¦™è„†å«©ï¼Œé²œç”œçˆ½å£",price:19,stock:99,sales:0,category:"ç´ èœ",method:"å¿«ç«æ¸…ç‚’ï¼Œä¿æŒåŽŸå‘³",flavor:"æ¸…é¦™è„†å«©ï¼Œé²œç”œçˆ½å£",image:"ðŸ¥¬",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=æ¸…ç‚’å„¿èœ",tags:[]},{id:"m-29",name:"å®¶å¸¸è±†è…",description:"å’¸é¦™å…¥å‘³ï¼Œè±†è…å«©æ»‘",price:19,stock:99,sales:0,category:"ç´ èœ",method:"ç…Žåˆ¶è±†è…ï¼Œé…±æ±æ”¶å‘³",flavor:"å’¸é¦™å…¥å‘³ï¼Œè±†è…å«©æ»‘",image:"ðŸ§ˆ",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=å®¶å¸¸è±†è…",tags:[]},{id:"m-30",name:"æ—¶è”¬æ··æ­",description:"å¤šå½©æ¸…æ–°ï¼Œè¥å…»å‡è¡¡",price:19,stock:99,sales:0,category:"ç´ èœ",method:"å¤šç§è”¬èœå¿«ç‚’",flavor:"å¤šå½©æ¸…æ–°ï¼Œè¥å…»å‡è¡¡",image:"ðŸ¥—",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=æ—¶è”¬æ··æ­",tags:[]},{id:"m-31",name:"ç‚’ä¸‰ä¸",description:"æ¸…çˆ½è„†å£ï¼Œé…¸è¾£é€‚ä¸­",price:19,stock:99,sales:0,category:"ç´ èœ",method:"åœŸè±†ã€èƒ¡èåœã€é’æ¤’ä¸å¿«ç‚’",flavor:"æ¸…çˆ½è„†å£ï¼Œé…¸è¾£é€‚ä¸­",image:"ðŸ¥•",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=ç‚’ä¸‰ä¸",tags:[]},{id:"m-32",name:"é¦™è‡é’èœ",description:"æ¸…é¦™é²œç¾Žï¼Œçˆ½å£å¥åº·",price:19,stock:99,sales:0,category:"ç´ èœ",method:"é¦™è‡ä¸Žé’èœæ¸…ç‚’",flavor:"æ¸…é¦™é²œç¾Žï¼Œçˆ½å£å¥åº·",image:"ðŸ„",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=é¦™è‡é’èœ",tags:[]},{id:"m-33",name:"æ¸…ç‚’ä¸ç“œ",description:"æ¸…ç”œçˆ½æ»‘ï¼Œæ±æ°´ä¸°å¯Œ",price:19,stock:99,sales:0,category:"ç´ èœ",method:"ä¸ç“œå¿«ç‚’ï¼Œä¿æŒé²œå«©",flavor:"æ¸…ç”œçˆ½æ»‘ï¼Œæ±æ°´ä¸°å¯Œ",image:"ðŸ¥’",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=æ¸…ç‚’ä¸ç“œ",tags:[]},{id:"m-34",name:"å¹²é”…èŠ±èœ",description:"é¦™è¾£è„†å«©ï¼Œé”…æ°”åè¶³",price:19,stock:99,sales:0,category:"ç´ èœ",method:"å¹²é”…çˆ†ç‚’ï¼ŒèŠ±èœå…¥å‘³",flavor:"é¦™è¾£è„†å«©ï¼Œé”…æ°”åè¶³",image:"ðŸ¥¦",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=å¹²é”…èŠ±èœ",tags:[]},{id:"m-35",name:"ç•ªèŒ„ç‚’è›‹",description:"é…¸ç”œå¯å£ï¼Œè›‹å«©æ±æµ“",price:19,stock:99,sales:0,category:"ç´ èœ",method:"ç•ªèŒ„ä¸Žé¸¡è›‹å¿«ç‚’",flavor:"é…¸ç”œå¯å£ï¼Œè›‹å«©æ±æµ“",image:"ðŸ…",imageUrl:"https://placehold.co/320x180/10b981/ffffff?text=ç•ªèŒ„ç‚’è›‹",tags:[]},{id:"m-36",name:"ç²‰è—•æŽ’éª¨æ±¤",description:"æ±¤æ¸…å‘³æµ“ï¼Œè—•ç²‰æŽ’éª¨é¦™",price:19,stock:99,sales:0,category:"æ±¤å“",method:"æ…¢ç«ç‚–ç…®ï¼Œæ¸…çˆ½æ»‹è¡¥",flavor:"æ±¤æ¸…å‘³æµ“ï¼Œè—•ç²‰æŽ’éª¨é¦™",image:"ðŸ²",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=ç²‰è—•æŽ’éª¨æ±¤",tags:[]},{id:"m-37",name:"è™«è‰èŠ±ç‚–é¸¡æ±¤",description:"æ»‹è¡¥å…»ç”Ÿï¼Œé²œé¦™æµ“éƒ",price:19,stock:99,sales:0,category:"æ±¤å“",method:"è™«è‰èŠ±ä¸Žé¸¡è‚‰æ…¢ç‚–",flavor:"æ»‹è¡¥å…»ç”Ÿï¼Œé²œé¦™æµ“éƒ",image:"ðŸ²",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=è™«è‰èŠ±ç‚–é¸¡æ±¤",tags:["æ‹›ç‰Œ"]},{id:"m-38",name:"é²œé¦™é±¼æ±¤",description:"é±¼é²œæ±¤æµ“ï¼Œè±†è…å«©æ»‘",price:19,stock:99,sales:0,category:"æ±¤å“",method:"é±¼éª¨ç†¬æ±¤ï¼Œè±†è…å…¥å‘³",flavor:"é±¼é²œæ±¤æµ“ï¼Œè±†è…å«©æ»‘",image:"ðŸ ",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=é²œé¦™é±¼æ±¤",tags:[]},{id:"m-39",name:"é²«é±¼è±†è…æ±¤",description:"é±¼é²œè±†é¦™ï¼Œæ±¤æ±æ¸…æ¶¦",price:19,stock:99,sales:0,category:"æ±¤å“",method:"é²«é±¼ç†¬æ±¤ï¼Œè±†è…å…¥å‘³",flavor:"é±¼é²œè±†é¦™ï¼Œæ±¤æ±æ¸…æ¶¦",image:"ðŸ¥£",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=é²«é±¼è±†è…æ±¤",tags:[]},{id:"m-40",name:"ç‚–é›ªæ¢¨",description:"æ¸…ç”œæ¶¦å–‰ï¼Œæ¸©æ¶¦æ»‹å…»",price:19,stock:99,sales:0,category:"æ±¤å“",method:"é›ªæ¢¨æ…¢ç‚–ï¼Œç”œæ±¤å…¥å‘³",flavor:"æ¸…ç”œæ¶¦å–‰ï¼Œæ¸©æ¶¦æ»‹å…»",image:"ðŸ",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=ç‚–é›ªæ¢¨",tags:[]},{id:"m-41",name:"ç½—å®‹æ±¤",description:"é…¸ç”œæµ“éƒï¼Œè¥¿å¼é£Žå‘³",price:19,stock:99,sales:0,category:"æ±¤å“",method:"ç•ªèŒ„ç‰›è‚‰æ…¢ç‚–",flavor:"é…¸ç”œæµ“éƒï¼Œè¥¿å¼é£Žå‘³",image:"ðŸ¥£",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=ç½—å®‹æ±¤",tags:[]},{id:"m-42",name:"èŒè‡æ±¤",description:"æ¸…é²œçˆ½å£ï¼ŒèŒé¦™æµ“éƒ",price:19,stock:99,sales:0,category:"æ±¤å“",method:"å¤šç§èŒè‡ç†¬ç…®",flavor:"æ¸…é²œçˆ½å£ï¼ŒèŒé¦™æµ“éƒ",image:"ðŸ„",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=èŒè‡æ±¤",tags:[]},{id:"m-43",name:"èƒ¡æ¤’çŒªè‚šé¸¡æ±¤",description:"èƒ¡æ¤’è¾›é¦™ï¼Œæ»‹è¡¥æš–èƒƒ",price:19,stock:99,sales:0,category:"æ±¤å“",method:"çŒªè‚šé¸¡è‚‰æ…¢ç‚–ï¼Œèƒ¡æ¤’æå‘³",flavor:"èƒ¡æ¤’è¾›é¦™ï¼Œæ»‹è¡¥æš–èƒƒ",image:"ðŸ²",imageUrl:"https://placehold.co/320x180/3b82f6/ffffff?text=èƒ¡æ¤’çŒªè‚šé¸¡æ±¤",tags:[]},{id:"m-44",name:"å°è’‹ç‰¹è°ƒç¾Žå¼",description:"è‹¦ä¸­å¸¦ç”˜ï¼Œé†‡åŽšå›žå‘³",price:15,stock:99,sales:0,category:"é¥®å“",method:"æ„å¼æµ“ç¼©+çƒ­æ°´",flavor:"è‹¦ä¸­å¸¦ç”˜ï¼Œé†‡åŽšå›žå‘³",image:"â˜•",imageUrl:"https://placehold.co/320x180/8b4513/ffffff?text=å°è’‹ç‰¹è°ƒç¾Žå¼",tags:["æ‹›ç‰Œ"]},{id:"m-45",name:"ä¸æ»‘æ‹¿é“",description:"å¥¶é¦™æµ“éƒï¼ŒæŸ”æ»‘ç»†è…»",price:18,stock:99,sales:0,category:"é¥®å“",method:"æµ“ç¼©å’–å•¡+è’¸æ±½ç‰›å¥¶",flavor:"å¥¶é¦™æµ“éƒï¼ŒæŸ”æ»‘ç»†è…»",image:"ðŸ¥›",imageUrl:"https://placehold.co/320x180/8b4513/ffffff?text=ä¸æ»‘æ‹¿é“",tags:[]},{id:"m-46",name:"ç„¦ç³–çŽ›å¥‡æœµ",description:"é¦™ç”œæµ“éƒï¼Œå±‚æ¬¡ä¸°å¯Œ",price:20,stock:99,sales:0,category:"é¥®å“",method:"æµ“ç¼©+ç‰›å¥¶+ç„¦ç³–",flavor:"é¦™ç”œæµ“éƒï¼Œå±‚æ¬¡ä¸°å¯Œ",image:"ðŸ®",imageUrl:"https://placehold.co/320x180/8b4513/ffffff?text=ç„¦ç³–çŽ›å¥‡æœµ",tags:[]},{id:"m-47",name:"æ‘©å¡å¥‡é‡",description:"å’–å•¡å·§å…‹åŠ›åŒé‡å¥",price:20,stock:99,sales:0,category:"é¥®å“",method:"æµ“ç¼©+å·§å…‹åŠ›+ç‰›å¥¶",flavor:"å’–å•¡å·§å…‹åŠ›åŒé‡å¥",image:"ðŸ«",imageUrl:"https://placehold.co/320x180/8b4513/ffffff?text=æ‘©å¡å¥‡é‡",tags:[]},{id:"m-48",name:"å†°èƒå†·brew",description:"é¡ºæ»‘æ¸…ç”œï¼Œå†°çˆ½è§£æ¸´",price:16,stock:99,sales:0,category:"é¥®å“",method:"å†·æ°´æ…¢èƒ12å°æ—¶",flavor:"é¡ºæ»‘æ¸…ç”œï¼Œå†°çˆ½è§£æ¸´",image:"ðŸ§Š",imageUrl:"https://placehold.co/320x180/8b4513/ffffff?text=å†°èƒå†·brew",tags:[]},{id:"m-49",name:"æ‰‹å†²å•å“",description:"æžœé…¸æ˜Žäº®ï¼Œé¦™æ°”é¦¥éƒ",price:22,stock:99,sales:0,category:"é¥®å“",method:"æ‰‹å·¥å†²æ³¡ç²¾å“è±†",flavor:"æžœé…¸æ˜Žäº®ï¼Œé¦™æ°”é¦¥éƒ",image:"ðŸ«–",imageUrl:"https://placehold.co/320x180/8b4513/ffffff?text=æ‰‹å†²å•å“",tags:[]}],tt=()=>{let t=localStorage.getItem("food_app_user_id");return t||(t=crypto.randomUUID(),localStorage.setItem("food_app_user_id",t)),t},st=tt(),at=()=>e.jsxs("div",{className:"flex items-center justify-center h-screen bg-orange-50",children:[e.jsx("div",{className:"animate-bounce text-4xl",children:"ðŸ¥˜"}),e.jsx("span",{className:"ml-2 text-orange-600 font-bold",children:"æ­£åœ¨è¿žæŽ¥ç¾Žå‘³æ˜Ÿçƒ (Supabase)..."})]}),Y=({isOpen:t,onClose:r,children:f})=>t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto animate-in fade-in zoom-in duration-200",children:f})}):null,Pe=({message:t,onClose:r})=>(l.useEffect(()=>{if(t){const f=setTimeout(()=>r(),3e3);return()=>clearTimeout(f)}},[t,r]),t?e.jsx("div",{className:"fixed top-14 left-1/2 -translate-x-1/2 z-50",children:e.jsx("div",{className:"bg-green-500 text-white px-4 py-2 rounded-full shadow-lg text-sm font-medium animate-in slide-in-from-top-4 duration-300",children:t})}):null),De=({order:t,onClose:r,sequenceMap:f})=>{if(!t)return null;const{displayId:x,displayTime:s}=se(t.created_at,f),n={pending:{bg:"bg-orange-100",text:"text-orange-600",label:"å¾…æŽ¥å•",icon:"â³"},cooking:{bg:"bg-blue-100",text:"text-blue-600",label:"çƒ¹é¥ªä¸­",icon:"ðŸ‘¨â€ðŸ³"},completed:{bg:"bg-green-100",text:"text-green-600",label:"å·²å®Œæˆ",icon:"âœ…"},rejected:{bg:"bg-red-100",text:"text-red-600",label:"å·²æ‹’ç»",icon:"âŒ"},cancelled:{bg:"bg-gray-100",text:"text-gray-600",label:"å·²æ’¤é”€",icon:"ðŸš«"},deleted:{bg:"bg-gray-200",text:"text-gray-700",label:"å·²åˆ é™¤",icon:"ðŸ—‘ï¸"}},g=n[t.status]||n.pending;return e.jsx(Y,{isOpen:!0,onClose:r,children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"è®¢å•è¯¦æƒ…"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["è®¢å•å·: ",x]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full transition",children:e.jsx(Ae,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:`${g.bg} ${g.text} rounded-xl p-4 mb-4 flex items-center justify-between`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:g.icon}),e.jsx("span",{className:"font-bold text-lg",children:g.label})]}),t.urgent&&e.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded-full text-xs font-bold animate-pulse",children:"âš¡ å‚¬å•ä¸­"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-4 space-y-3",children:[e.jsx("h4",{className:"font-bold text-gray-700 text-sm mb-3",children:"ðŸ“… æ—¶é—´çº¿"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-1.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"ä¸‹å•æ—¶é—´"}),e.jsx("p",{className:"text-xs text-gray-500",children:s})]})]}),t.cooking_started_at&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-1.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"å¼€å§‹åˆ¶ä½œ"}),e.jsx("p",{className:"text-xs text-gray-500",children:ge(t.cooking_started_at)})]})]}),t.completed_at&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-1.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"å®Œæˆæ—¶é—´"}),e.jsx("p",{className:"text-xs text-gray-500",children:ge(t.completed_at)})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 mb-4",children:[e.jsx("h4",{className:"font-bold text-gray-700 text-sm mb-3",children:"ðŸ½ï¸ èœå“æ˜Žç»†"}),e.jsx("div",{className:"space-y-2",children:t.items.map((c,y)=>e.jsxs("div",{className:"flex justify-between items-start py-2 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium text-gray-800",children:[c.name," x",c.quantity]}),c.special_request&&c.special_request!=="æ— ç‰¹æ®Šå¤‡æ³¨"&&e.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:["ðŸ’¬ ",c.special_request]})]}),e.jsxs("p",{className:"text-sm font-bold text-gray-600",children:["Â¥",c.price*c.quantity]})]},y))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4 flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-gray-700",children:"è®¢å•æ€»ä»·"}),e.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:["Â¥",t.total_price]})]}),e.jsx("button",{onClick:r,className:"w-full mt-4 py-3 bg-gray-200 text-gray-700 rounded-xl font-bold active:scale-95 transition",children:"å…³é—­"})]})})},lt=({order:t,onClose:r,onSave:f})=>{const[x,s]=l.useState(t.items),n=(c,y)=>{s(C=>{const v=[...C],p=Math.max(0,v[c].quantity+y);return p===0?v.filter((b,k)=>k!==c):(v[c]={...v[c],quantity:p},v)})},g=x.reduce((c,y)=>c+y.price*y.quantity,0);return e.jsx(Y,{isOpen:!0,onClose:r,children:e.jsxs("div",{className:"p-5 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"ç¼–è¾‘è®¢å•"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"è°ƒæ•´èœå“æ•°é‡"})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full transition",children:e.jsx(Ae,{className:"w-5 h-5 text-gray-500"})})]}),x.length===0?e.jsx("div",{className:"text-center py-10 text-gray-400",children:e.jsx("p",{children:"è®¢å•ä¸èƒ½ä¸ºç©º"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3 mb-4",children:x.map((c,y)=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800",children:c.name}),c.special_request&&c.special_request!=="æ— ç‰¹æ®Šå¤‡æ³¨"&&e.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:["ðŸ’¬ ",c.special_request]})]}),e.jsxs("p",{className:"text-sm font-bold text-gray-600",children:["Â¥",c.price]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>n(y,-1),className:"w-8 h-8 bg-white rounded-full flex items-center justify-center border border-gray-300 active:scale-95",children:e.jsx(ue,{className:"w-4 h-4 text-gray-600"})}),e.jsx("span",{className:"font-bold text-lg text-gray-800 w-8 text-center",children:c.quantity}),e.jsx("button",{onClick:()=>n(y,1),className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center active:scale-95",children:e.jsx(ne,{className:"w-4 h-4 text-white"})})]}),e.jsxs("p",{className:"text-sm font-bold text-orange-600",children:["å°è®¡: Â¥",c.price*c.quantity]})]})]},y))}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4 flex justify-between items-center mb-4",children:[e.jsx("span",{className:"font-bold text-gray-700",children:"æ–°æ€»ä»·"}),e.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:["Â¥",g]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:r,className:"flex-1 py-3 bg-gray-200 text-gray-700 rounded-xl font-bold active:scale-95 transition",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:()=>f(t.id,x),className:"flex-1 py-3 bg-orange-500 text-white rounded-xl font-bold active:scale-95 transition",disabled:x.length===0,children:"ä¿å­˜ä¿®æ”¹"})]})]})]})})},rt=({userId:t,allOrders:r,showToast:f})=>{const x=l.useMemo(()=>pe(r),[r]),[s,n]=l.useState("all"),[g,c]=l.useState(null),[y,C]=l.useState(null),v=l.useMemo(()=>{const i=new Set;return r.forEach(S=>{if(S.status!=="cancelled"){const D=ee(S.created_at);i.add(D)}}),Array.from(i).sort().reverse()},[r]),p=l.useMemo(()=>r.filter(i=>i.status!=="cancelled"&&i.status!=="deleted").filter(i=>s==="all"?!0:ee(i.created_at)===s).sort((i,S)=>new Date(S.created_at).getTime()-new Date(i.created_at).getTime()),[r,s]),b=async i=>{if(window.confirm("ç¡®å®šè¦æ’¤é”€è¿™ä¸ªè®¢å•å—ï¼Ÿ"))try{const{error:S}=await T.from("orders").update({status:"cancelled"}).eq("id",i).select();if(S)throw new Error(S.message);f("è®¢å•å·²æ’¤é”€")}catch(S){console.error("æ’¤é”€å¤±è´¥:",S),f("æ’¤é”€å¤±è´¥ï¼Œè¯·é‡è¯•")}},k=async(i,S)=>{try{const D=S.reduce(($,h)=>$+h.price*h.quantity,0),{error:_}=await T.from("orders").update({items:S,total_price:D,updated_at:new Date().toISOString()}).eq("id",i);if(_)throw new Error(_.message);f("è®¢å•å·²æ›´æ–°"),C(null)}catch(D){console.error("æ›´æ–°å¤±è´¥:",D),f("æ›´æ–°å¤±è´¥ï¼Œè¯·é‡è¯•")}};return e.jsxs("div",{className:"p-4 pt-10 pb-24 space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"æ‰€æœ‰è®¢å•"}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-4",children:[e.jsx("button",{onClick:()=>n("all"),className:`px-4 py-2 rounded-full whitespace-nowrap text-sm font-medium transition-all ${s==="all"?"bg-orange-500 text-white shadow-lg":"bg-white text-gray-600 border border-gray-200"}`,children:"å…¨éƒ¨æ—¥æœŸ"}),v.map(i=>{i.substring(0,4);const S=i.substring(4,6),D=i.substring(6,8);return e.jsxs("button",{onClick:()=>n(i),className:`px-4 py-2 rounded-full whitespace-nowrap text-sm font-medium transition-all ${s===i?"bg-orange-500 text-white shadow-lg":"bg-white text-gray-600 border border-gray-200"}`,children:[S,"/",D]},i)})]}),p.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-10",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ˜­"}),e.jsx("p",{children:s==="all"?"è¿˜æ²¡æœ‰ä»»ä½•è®¢å•å“¦":"è¯¥æ—¥æœŸæ²¡æœ‰è®¢å•"})]}):p.map(i=>{const{displayId:S,displayTime:D}=se(i.created_at,x),_=i.status==="pending",$=i.status==="cooking";i.status,i.status,i.status;const h={pending:{bg:"bg-orange-100",text:"text-orange-600",label:"å¾…æŽ¥å•"},cooking:{bg:"bg-blue-100",text:"text-blue-600",label:"çƒ¹é¥ªä¸­"},completed:{bg:"bg-green-100",text:"text-green-600",label:"å·²å®Œæˆ"},rejected:{bg:"bg-red-100",text:"text-red-600",label:"å·²æ‹’ç»"},cancelled:{bg:"bg-gray-100",text:"text-gray-600",label:"å·²æ’¤é”€"},deleted:{bg:"bg-gray-200",text:"text-gray-700",label:"å·²åˆ é™¤"}},q=h[i.status]||h.pending;return e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("span",{className:"font-bold text-gray-700 text-lg",children:["è®¢å•å·: ",S]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${q.bg} ${q.text}`,children:q.label})]}),e.jsxs("p",{className:"text-xs text-gray-400 mb-2",children:["æ—¶é—´: ",D]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["æ€»ä»·: ",e.jsxs("span",{className:"font-bold text-orange-600",children:["Â¥",i.total_price]})]}),i.items.map((d,N)=>e.jsxs("div",{className:"text-sm text-gray-600 flex justify-between mb-1",children:[e.jsxs("span",{children:[d.name," x",d.quantity]}),d.special_request&&d.special_request!=="æ— ç‰¹æ®Šå¤‡æ³¨"&&e.jsx("span",{className:"text-xs text-gray-400 italic ml-2",children:d.special_request})]},N)),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsxs("button",{onClick:()=>c(i),className:"flex-1 py-2 bg-blue-500 text-white rounded-lg font-bold text-sm active:scale-95 transition-transform flex items-center justify-center gap-1",children:[e.jsx(ce,{className:"w-4 h-4"})," æŸ¥çœ‹è¯¦æƒ…"]}),_&&e.jsxs("button",{onClick:()=>C(i),className:"flex-1 py-2 bg-green-500 text-white rounded-lg font-bold text-sm active:scale-95 transition-transform flex items-center justify-center gap-1",children:[e.jsx(Me,{className:"w-4 h-4"})," ç¼–è¾‘"]}),(_||$)&&e.jsx("button",{onClick:()=>b(i.id),className:"flex-1 py-2 bg-red-500 text-white rounded-lg font-bold text-sm active:scale-95 transition-transform",children:"æ’¤é”€è®¢å•"})]})]},i.id)}),g&&e.jsx(De,{order:g,onClose:()=>c(null),sequenceMap:x}),y&&e.jsx(lt,{order:y,onClose:()=>C(null),onSave:k})]})},nt=({cartItems:t,setCartItems:r,setView:f,userId:x,setActiveOrder:s})=>{const[n,g]=l.useState(!1),c=l.useMemo(()=>t.reduce((v,p)=>v+p.price*p.quantity,0),[t]),y=(v,p)=>{r(b=>{const k=b.findIndex(S=>S.cart_id===v);if(k===-1)return b;const i=[...b];return i[k].quantity+=p,i[k].quantity<=0?i.filter(S=>S.cart_id!==v):i})},C=async()=>{if(t.length===0)return;g(!0);const v={user_id:x,items:t.map(({cart_id:p,...b})=>b),total_price:c,status:"pending",customer_name:"åƒè´§",urgent:!1,urgent_count:0};console.log("å‡†å¤‡ä¸‹å•ï¼Œè®¢å•æ•°æ®:",v);try{const{data:p,error:b}=await T.from("orders").insert([v]).select();if(b)throw console.error("Supabase æ’å…¥é”™è¯¯:",b),alert("ä¸‹å•å¤±è´¥: "+b.message),b;console.log("ä¸‹å•æˆåŠŸï¼Œè¿”å›žæ•°æ®:",p),r([]),f("history"),alert("ä¸‹å•æˆåŠŸï¼")}catch(p){console.error("ä¸‹å•å¤±è´¥ Error:",p),alert("ä¸‹å•å¤±è´¥ï¼Œè¯·æ£€æŸ¥æŽ§åˆ¶å°")}finally{g(!1)}};return e.jsxs("div",{className:"p-4 pt-10 pb-28 flex flex-col min-h-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"çˆ±å¿ƒè´­ç‰©è½¦"}),e.jsx("div",{className:"flex-1 space-y-4 overflow-y-auto pb-4",children:t.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-10",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ›’"}),e.jsx("p",{children:"è´­ç‰©è½¦é‡Œè¿˜æ²¡æœ‰å®è´å“¦"})]}):t.map(v=>e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm flex flex-col border border-orange-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:v.image}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-800",children:v.name}),e.jsxs("p",{className:"text-sm text-orange-500",children:["Â¥",v.price]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-full p-1 shrink-0",children:[e.jsx("button",{onClick:()=>y(v.cart_id,-1),className:"p-1 bg-white rounded-full text-gray-600 border border-gray-200",children:e.jsx(ue,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold text-sm w-4 text-center",children:v.quantity}),e.jsx("button",{onClick:()=>y(v.cart_id,1),className:"p-1 bg-orange-400 text-white rounded-full",children:e.jsx(ne,{className:"w-4 h-4"})})]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2 pt-2 border-t border-gray-100 italic",children:["å¤‡æ³¨: ",v.special_request]})]},v.cart_id))}),t.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-white rounded-2xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-lg font-medium text-gray-700",children:"æ€»è®¡:"}),e.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:["Â¥",c]})]}),e.jsx("button",{onClick:C,disabled:n,className:"w-full py-3 rounded-xl bg-red-500 text-white font-bold shadow-lg shadow-red-200 flex items-center justify-center gap-2 active:scale-95 transition-transform",children:n?"ä¸‹å•ä¸­...":e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"w-5 h-5 fill-current"})," ç¡®è®¤ä¸‹å• (",t.length," é¡¹)"]})})]})]})},it=({userId:t,setRole:r,menuItems:f,allOrders:x,initialView:s="menu"})=>{const[n,g]=l.useState(s),[c,y]=l.useState(null),[C,v]=l.useState(null),[p,b]=l.useState([]),[k,i]=l.useState(1),[S,D]=l.useState("æ— ç‰¹æ®Šå¤‡æ³¨"),[_,$]=l.useState({spicy:!1,cilantro:!1,scallion:!1}),[h,q]=l.useState(""),d=l.useCallback(o=>{q(o)},[]),N=l.useCallback(async o=>{try{const{error:u}=await T.from("orders").update({urgent:!0,urgent_count:((C==null?void 0:C.urgent_count)||0)+1}).eq("id",o).select();if(u)throw new Error(u.message);d("å·²å‚¬å•ï¼å¤§åŽ¨æ”¶åˆ°é€šçŸ¥å•¦ï½ž")}catch(u){console.error("å‚¬å•å¤±è´¥:",u)}},[C,d]);l.useEffect(()=>{if(!t)return;const o=x.filter(u=>u.user_id===t&&u.status!=="completed"&&u.status!=="rejected"&&u.status!=="cancelled"&&u.status!=="deleted").sort((u,U)=>new Date(U.created_at).getTime()-new Date(u.created_at).getTime())[0];o?v(o):(v(null),n==="status"&&g("menu"))},[t,x,n]);const L=o=>{y(o),i(1),D("æ— ç‰¹æ®Šå¤‡æ³¨"),$({spicy:!1,cilantro:!1,scallion:!1})},K=()=>{if(!c||k<=0)return;const o=[];c.category==="é¥®å“"?(_.spicy&&o.push("å†°"),_.cilantro&&o.push("çƒ­"),_.scallion&&o.push("å¸¸æ¸©")):(_.spicy&&o.push("åŠ ç‚¹è¾£"),_.cilantro&&o.push("åŠ é¦™èœ"),_.scallion&&o.push("åŠ è‘±"));let U=S.trim()||"æ— ç‰¹æ®Šå¤‡æ³¨";if(o.length>0){const H=o.join("ã€");U=U==="æ— ç‰¹æ®Šå¤‡æ³¨"?H:`${H}ï¼›${U}`}b(H=>[...H,{...c,quantity:k,special_request:U,quick_options:_,cart_id:crypto.randomUUID()}]),y(null),i(1),D("æ— ç‰¹æ®Šå¤‡æ³¨"),$({spicy:!1,cilantro:!1,scallion:!1}),d(`${c.name} x${k} (${U}) å·²åŠ å…¥è´­ç‰©è½¦! ðŸŽ‰`)},Z=f,[j,a]=l.useState("ä¸»èœ"),E=["ä¸»èœ","ä¸»é£Ÿ","ç´ èœ","æ±¤å“","é¥®å“"],A=l.useMemo(()=>Z.filter(u=>u.category===j).sort((u,U)=>{var Q,X;const H=((Q=u.tags)==null?void 0:Q.includes("æ‹›ç‰Œ"))||!1,W=((X=U.tags)==null?void 0:X.includes("æ‹›ç‰Œ"))||!1;return H&&!W?-1:!H&&W?1:0}),[Z,j]),O=()=>{const o=pe(x);if(n==="menu")return e.jsxs("div",{className:"px-4 pt-10 pb-28",children:[e.jsx("h2",{className:"font-bold text-2xl text-gray-800 mb-4",children:"ä»Šæ—¥èœå•"}),e.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:E.map(u=>e.jsx("button",{onClick:()=>a(u),className:`px-4 py-2 rounded-full font-bold text-sm whitespace-nowrap transition-all ${j===u?"bg-orange-500 text-white shadow-lg shadow-orange-200 scale-105":"bg-white text-gray-600 border border-gray-200 hover:border-orange-300"}`,children:u},u))}),e.jsx("div",{className:"space-y-4",children:A.map((u,U)=>e.jsxs("div",{onClick:()=>L(u),className:"bg-white rounded-2xl p-3 shadow-md border border-orange-50 flex gap-4 cursor-pointer transform transition-all duration-300 hover:shadow-xl hover:scale-[1.02] active:scale-[0.98]",style:{animation:`slideIn 0.3s ease-out ${U*.05}s backwards`},children:[e.jsxs("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-100 to-orange-200 rounded-xl flex items-center justify-center text-4xl shrink-0 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("span",{className:"relative transform group-hover:scale-110 transition-transform duration-300",children:u.image})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between py-1",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-bold text-gray-800",children:u.name}),u.tags&&u.tags.includes("æ‹›ç‰Œ")&&e.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-600 text-xs font-bold rounded-full",children:"æ‹›ç‰Œ"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1 line-clamp-2",children:u.description})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("span",{className:"text-orange-500 font-bold text-lg flex items-center",children:[e.jsx(de,{className:"w-4 h-4 mr-1 fill-current animate-pulse"})," Â¥",u.price]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-bold shadow-md transition-all bg-orange-400 text-white shadow-orange-200 hover:bg-orange-500",children:"æ¥ä¸€ä»½"})]})]})]},u.id))})]});if(n==="cart")return e.jsx(nt,{cartItems:p,setCartItems:b,setView:g,userId:t,setActiveOrder:v});if(n==="history")return e.jsx(rt,{userId:t,allOrders:x,showToast:d});if(n==="status"&&C){const u=C.status==="cooking",U=C.status==="pending",{displayId:H,displayTime:W}=se(C.created_at,o);return e.jsxs("div",{className:"min-h-full bg-[#FFFAF0] flex flex-col relative pb-10",children:[e.jsx("div",{className:"absolute top-0 w-full h-64 bg-orange-400 rounded-b-[40px] z-0"}),e.jsxs("div",{className:"relative z-10 px-6 pt-12 pb-6 flex-1 flex flex-col overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center text-white mb-8",children:[e.jsx("button",{onClick:()=>g("menu"),className:"p-2 bg-white/20 rounded-full backdrop-blur-sm",children:e.jsx(We,{})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"font-bold text-lg",children:["è®¢å•è¿½è¸ª - #",H]}),e.jsx("p",{className:"text-xs opacity-80",children:W})]}),e.jsx("div",{className:"w-8"})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 flex-1 flex flex-col items-center text-center",children:[e.jsxs("div",{className:"w-32 h-32 bg-orange-50 rounded-full flex items-center justify-center text-6xl mb-6 relative",children:[u?"ðŸ³":"ðŸ›Žï¸",u&&e.jsx("div",{className:"absolute top-0 right-0 animate-ping w-4 h-4 bg-red-400 rounded-full"})]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:U?"ç­‰å¾…å¤§åŽ¨æŽ¥å•":"å¤§åŽ¨æ­£åœ¨çƒ¹é¥ªä¸­!"}),e.jsx("p",{className:"text-gray-500 text-sm mb-8",children:U?"å¤§åŽ¨å¯èƒ½æ­£åœ¨æ‰“æ¸¸æˆï¼Œç¨ç­‰ä¸€ä¸‹...":"é¢„è®¡é€è¾¾ï¼šé©¬ä¸Šï¼ˆåŽ¨æˆ¿ -> å®¢åŽ…ï¼‰"}),e.jsx("div",{className:"w-full bg-gray-100 h-3 rounded-full overflow-hidden mb-8 relative",children:e.jsx("div",{className:`h-full bg-orange-400 rounded-full transition-all duration-1000 ${u?"w-2/3 animate-pulse":"w-1/6"}`})}),e.jsx("div",{className:"w-full bg-orange-50 h-px mb-6"}),e.jsxs("div",{className:"w-full bg-orange-50 rounded-xl p-4 text-left space-y-3 mb-auto",children:[e.jsx("h3",{className:"text-xs font-bold text-orange-400 uppercase tracking-wider",children:"è®¢å•è¯¦æƒ…"}),C.items.map((Q,X)=>{const m=Q.special_request&&(Q.special_request.includes("å†°")||Q.special_request.includes("çƒ­")||Q.special_request.includes("å¸¸æ¸©"));return e.jsx("div",{className:"flex justify-between items-start border-b border-orange-100 last:border-b-0 last:pb-0 pb-2 mb-2",children:e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-gray-700",children:[Q.name," x",Q.quantity]}),Q.special_request&&Q.special_request!=="æ— ç‰¹æ®Šå¤‡æ³¨"&&e.jsxs("p",{className:"text-xs text-gray-500 italic mt-0.5",children:[m?"æ¸©åº¦: ":"å¤‡æ³¨: ",Q.special_request]})]})},X)})]}),e.jsx("button",{onClick:()=>N(C.id),className:"w-full py-4 mt-6 mb-4 bg-gray-900 text-white rounded-xl font-bold shadow-lg active:scale-95 transition-transform hover:bg-red-600",children:U?"ðŸ”” ç–¯ç‹‚å‚¬å•":"ðŸ¶ ä¹–ä¹–ç­‰å¾…"})]})]})]})}},R=({targetView:o,icon:u,label:U})=>e.jsxs("button",{onClick:()=>g(o),className:`flex flex-col items-center p-2 rounded-lg transition ${n===o?"text-orange-500":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(u,{className:"w-6 h-6 mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:U})]});return e.jsxs("div",{className:"min-h-screen bg-[#FFFAF0] flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-[#FFFAF0]/90 backdrop-blur-md px-4 py-3 flex justify-between items-center shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-6 h-6 text-red-500 fill-current"}),e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"åƒè´§çš„ç‚¹å•æœº"})]}),e.jsx("button",{onClick:()=>r(null),className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center hover:bg-orange-100 transition shadow-md",title:"è¿”å›žé¦–é¡µ",children:e.jsx(xe,{className:"w-5 h-5 text-gray-600 hover:text-orange-500"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pb-24",children:O()}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white border-t py-2 flex justify-around shadow-lg z-20",children:[e.jsx(R,{targetView:"menu",icon:xe,label:"èœå•"}),e.jsx(R,{targetView:"cart",icon:Ne,label:`è´­ç‰©è½¦ (${p.length})`}),e.jsx(R,{targetView:"status",icon:fe,label:C?"è®¢å•çŠ¶æ€":"æ— è®¢å•"}),e.jsx(R,{targetView:"history",icon:me,label:"æˆ‘çš„è®¢å•"})]}),e.jsx(Pe,{message:h,onClose:()=>q("")}),e.jsx(Y,{isOpen:!!c,onClose:()=>y(null),children:c&&e.jsxs("div",{className:"p-3 pb-4 max-h-[92vh] overflow-y-auto",children:[e.jsx("div",{className:"w-full max-h-[18vh] bg-gray-100 rounded-xl overflow-hidden flex items-center justify-center text-5xl mb-2 shadow-lg",children:c.imageUrl?e.jsx("img",{src:c.imageUrl,alt:c.name,className:"w-full h-auto max-h-[18vh] object-contain",onError:o=>{o.target.onerror=null,o.target.src="https://placehold.co/400x400/f3f4f6/6b7280?text=æ— å®žæ‹å›¾/é“¾æŽ¥å¤±æ•ˆ"}}):c.image}),e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:c.name}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:c.description}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs bg-gray-50 p-2 rounded-lg",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-gray-600",children:"ç±»åˆ«:"})," ",c.category]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-gray-600",children:"åšæ³•:"})," ",c.method]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-gray-600",children:"å£å‘³:"})," ",c.flavor]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-gray-600",children:"é”€é‡:"})," ",e.jsx("span",{className:"font-bold text-orange-600",children:c.sales||0})," ä»½"]})]}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"bg-blue-50 p-2 rounded-lg border border-blue-100",children:[e.jsx("label",{className:"text-xs font-bold text-blue-600 block mb-1",children:"å¿«æ·é€‰é¡¹"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:c.category==="é¥®å“"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>$(o=>({...o,spicy:!o.spicy})),className:`px-3 py-1.5 rounded-full text-sm font-bold transition-all ${_.spicy?"bg-blue-500 text-white shadow-md":"bg-white text-gray-600 border border-gray-200"}`,children:"ðŸ§Š å†°"}),e.jsx("button",{onClick:()=>$(o=>({...o,cilantro:!o.cilantro})),className:`px-3 py-1.5 rounded-full text-sm font-bold transition-all ${_.cilantro?"bg-red-500 text-white shadow-md":"bg-white text-gray-600 border border-gray-200"}`,children:"ðŸ”¥ çƒ­"}),e.jsx("button",{onClick:()=>$(o=>({...o,scallion:!o.scallion})),className:`px-3 py-1.5 rounded-full text-sm font-bold transition-all ${_.scallion?"bg-green-500 text-white shadow-md":"bg-white text-gray-600 border border-gray-200"}`,children:"ðŸŒ¡ï¸ å¸¸æ¸©"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>$(o=>({...o,spicy:!o.spicy})),className:`px-3 py-1.5 rounded-full text-sm font-bold transition-all ${_.spicy?"bg-red-500 text-white shadow-md":"bg-white text-gray-600 border border-gray-200"}`,children:"ðŸŒ¶ï¸ åŠ ç‚¹è¾£"}),e.jsx("button",{onClick:()=>$(o=>({...o,cilantro:!o.cilantro})),className:`px-3 py-1.5 rounded-full text-sm font-bold transition-all ${_.cilantro?"bg-green-500 text-white shadow-md":"bg-white text-gray-600 border border-gray-200"}`,children:"ðŸŒ¿ åŠ é¦™èœ"}),e.jsx("button",{onClick:()=>$(o=>({...o,scallion:!o.scallion})),className:`px-3 py-1.5 rounded-full text-sm font-bold transition-all ${_.scallion?"bg-green-600 text-white shadow-md":"bg-white text-gray-600 border border-gray-200"}`,children:"ðŸ§… åŠ è‘±"})]})})]}),e.jsxs("div",{className:"bg-red-50 p-2 rounded-lg border border-red-100",children:[e.jsx("label",{className:"text-xs font-bold text-red-400 block mb-1",children:"æ•°é‡é€‰æ‹©"}),e.jsxs("div",{className:"flex items-center justify-center gap-3 py-1",children:[e.jsx("button",{onClick:()=>i(o=>Math.max(1,o-1)),className:"p-1.5 bg-white rounded-full text-gray-600 border shadow-sm active:scale-95",children:e.jsx(ue,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-xl font-bold text-gray-800",children:k}),e.jsx("button",{onClick:()=>i(o=>o+1),className:"p-1.5 bg-orange-400 text-white rounded-full shadow-md active:scale-95",children:e.jsx(ne,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"bg-green-50 p-2 rounded-lg border border-green-100",children:[e.jsx("label",{className:"text-xs font-bold text-green-600 block mb-1",children:"æœ¬èœå“ç‰¹æ®Šå¤‡æ³¨"}),e.jsx("textarea",{value:S==="æ— ç‰¹æ®Šå¤‡æ³¨"?"":S,onChange:o=>D(o.target.value),className:"w-full bg-white rounded-lg p-2 text-xs border-none focus:ring-2 focus:ring-green-200 outline-none",rows:2,placeholder:"ä¾‹å¦‚ï¼šå¤šæ”¾é¦™èœï¼Œä¸è¦å¤ªç”œ"})]})]}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("button",{onClick:()=>y(null),className:"flex-1 py-2 rounded-lg bg-gray-100 font-bold text-gray-600 active:scale-95 text-sm",children:"å–æ¶ˆ"}),e.jsxs("button",{onClick:K,className:"flex-1 py-2 rounded-lg text-white font-bold shadow-lg flex items-center justify-center gap-2 active:scale-95 bg-orange-500 shadow-orange-200 text-sm",children:[e.jsx(Ne,{className:"w-4 h-4 fill-current"}),"åŠ å…¥è´­ç‰©è½¦"]})]})]})})]})},Ce=({item:t,onSave:r,onCancel:f,showToast:x})=>{var v;const[s,n]=l.useState({...t,isSignature:((v=t==null?void 0:t.tags)==null?void 0:v.includes("æ‹›ç‰Œ"))||!1}),[g,c]=l.useState(!1),y=p=>{const{name:b,value:k}=p.target;n(i=>({...i,[b]:b==="price"||b==="stock"?parseInt(k)||0:k}))},C=async p=>{const b=p.target.files[0];if(b){c(!0);try{const k=`${s.id}-${Date.now()}-${b.name.replace(/\s/g,"_")}`,i="menu_images",{data:S,error:D}=await T.storage.from(i).upload(k,b);if(D)throw new Error(D.message);const{data:_,error:$}=T.storage.from(i).getPublicUrl(k);if($)throw new Error($.message);if(_.publicUrl)n(h=>({...h,imageUrl:_.publicUrl})),x("å®žæ‹å›¾å·²æˆåŠŸä¸Šä¼ è‡³äº‘ç«¯å¹¶èŽ·å–é“¾æŽ¥ï¼");else throw new Error("æœªèƒ½èŽ·å–åˆ°å…¬å…± URLã€‚è¯·æ£€æŸ¥ Storage æƒé™ã€‚")}catch(k){console.error("å›¾ç‰‡ä¸Šä¼ å¤±è´¥:",k),x(`ä¸Šä¼ å¤±è´¥: ${k.message}`)}finally{c(!1),p.target.value=""}}};return e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800",children:["ç¼–è¾‘ ",t.name]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"èœå"}),e.jsx("input",{name:"name",value:s.name,onChange:y,className:"mt-1 w-full p-2 border rounded-lg focus:ring-orange-500"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ä»·æ ¼ (Â¥)"}),e.jsx("input",{type:"number",name:"price",value:s.price,onChange:y,className:"mt-1 w-full p-2 border rounded-lg focus:ring-orange-500"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"é”€é‡ (åªè¯»)"}),e.jsx("input",{type:"number",value:s.sales||0,readOnly:!0,disabled:!0,className:"mt-1 w-full p-2 border rounded-lg bg-gray-100 text-gray-600 cursor-not-allowed"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ç±»åˆ«"}),e.jsx("select",{name:"category",value:s.category,onChange:y,className:"mt-1 w-full p-2 border rounded-lg focus:ring-orange-500",children:["ä¸»èœ","ä¸»é£Ÿ","ç´ èœ","æ±¤å“","é¥®å“"].map(p=>e.jsx("option",{value:p,children:p},p))})]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-red-50 p-3 rounded-lg border border-red-100",children:[e.jsx("input",{type:"checkbox",id:"isSignature",checked:s.isSignature,onChange:p=>n(b=>({...b,isSignature:p.target.checked})),className:"w-5 h-5 text-red-600 rounded focus:ring-red-500"}),e.jsxs("label",{htmlFor:"isSignature",className:"text-sm font-bold text-red-600 cursor-pointer flex items-center gap-1",children:[e.jsx("span",{className:"text-lg",children:"â­"})," è®¾ä¸ºæ‹›ç‰Œèœå“"]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"æè¿°"}),e.jsx("textarea",{name:"description",value:s.description,onChange:y,className:"mt-1 w-full p-2 border rounded-lg focus:ring-orange-500",rows:"2"})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl border border-blue-100 space-y-2",children:[e.jsxs("span",{className:"text-sm font-bold text-blue-700 flex items-center",children:[e.jsx(Xe,{className:"w-4 h-4 mr-1"})," èœå“å®žæ‹å›¾ç®¡ç† (Supabase Storage)"]}),e.jsx("input",{type:"file",accept:"image/*",onChange:C,disabled:g,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600 cursor-pointer disabled:opacity-50"}),e.jsx("div",{className:"flex items-center text-xs text-gray-500 pt-2 border-t border-blue-100",children:g?e.jsxs("span",{className:"flex items-center text-blue-600 font-semibold",children:[e.jsx(he,{className:"w-4 h-4 mr-2 animate-spin"})," æ­£åœ¨ä¸Šä¼ åˆ° Supabase Storage..."]}):e.jsxs("span",{className:"text-gray-700",children:["å½“å‰ URL:",e.jsx("span",{className:"font-mono text-xs block truncate text-gray-700 bg-white p-1 rounded mt-1",children:s.imageUrl})]})}),e.jsxs("label",{className:"block pt-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"æˆ–æ‰‹åŠ¨è¾“å…¥å›¾ç‰‡ URL (å¤‡ç”¨)"}),e.jsx("input",{name:"imageUrl",value:s.imageUrl,onChange:y,className:"mt-1 w-full p-2 border rounded-lg focus:ring-orange-500 text-sm",placeholder:"ç²˜è´´å›¾ç‰‡é“¾æŽ¥"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:f,className:"flex-1 py-2 bg-gray-300 text-gray-700 rounded-lg font-bold active:scale-95",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:()=>{var b,k;const p=s.isSignature?(b=s.tags)!=null&&b.includes("æ‹›ç‰Œ")?s.tags:[...s.tags||[],"æ‹›ç‰Œ"]:((k=s.tags)==null?void 0:k.filter(i=>i!=="æ‹›ç‰Œ"))||[];r({...s,tags:p})},disabled:g,className:`flex-1 py-2 text-white rounded-lg font-bold shadow-md shadow-orange-200 active:scale-95 ${g?"bg-gray-400 cursor-not-allowed":"bg-orange-500"}`,children:g?"è¯·ç¨å€™...":"ä¿å­˜ä¿®æ”¹"})]})]})},ot=({menuItems:t,updateMenu:r,showToast:f,onClose:x})=>{const[s,n]=l.useState(null),[g,c]=l.useState([]),[y,C]=l.useState([]),[v,p]=l.useState(!1),[b,k]=l.useState({current:0,total:0}),[i,S]=l.useState([]),D=h=>{const q=h.target.files[0];if(!q)return;n(q);const d=new FileReader;d.onload=N=>{let L=N.target.result;L.charCodeAt(0)===65279&&(L=L.slice(1));const Z=L.split(`
`).filter(j=>j.trim()).map(j=>{var R,o;const E=j.replace(/^["']|["']$/g,"").trim().split(","),A=(R=E[0])==null?void 0:R.replace(/^["']|["']$/g,"").trim(),O=(o=E[1])==null?void 0:o.replace(/^["']|["']$/g,"").trim();return{dishName:A,fileName:O}});C(Z),f(`å·²è§£æž ${Z.length} æ¡æ•°æ®`)},d.readAsText(q,"UTF-8")},_=h=>{const q=Array.from(h.target.files);c(q),f(`å·²é€‰æ‹© ${q.length} å¼ å›¾ç‰‡`)};l.useEffect(()=>{if(y.length>0&&g.length>0){const h=y.map(({dishName:q,fileName:d})=>{const N=g.find(K=>K.name===d),L=t.find(K=>K.name===q);return console.log("åŒ¹é…æ£€æŸ¥:",{dishName:q,fileName:d,foundImage:!!N,foundDish:!!L,availableImages:g.map(K=>K.name),availableDishes:t.map(K=>K.name)}),{dishName:q,fileName:d,imageFile:N,menuItem:L,status:N&&L?"ready":N?"no-dish":"no-image"}});S(h)}},[y,g,t]);const $=async()=>{const h=i.filter(N=>N.status==="ready");if(h.length===0){f("æ²¡æœ‰å¯ä¸Šä¼ çš„åŒ¹é…é¡¹");return}if(!window.confirm(`ç¡®å®šè¦ä¸Šä¼  ${h.length} å¼ å›¾ç‰‡å¹¶æ›´æ–°èœå“å—ï¼Ÿ`))return;p(!0),k({current:0,total:h.length});const q="menu_images";let d=0;for(let N=0;N<h.length;N++){const{menuItem:L,imageFile:K,fileName:Z}=h[N];try{const j=`${L.id}-${Date.now()}-${Z.replace(/\s/g,"_")}`,{data:a,error:E}=await T.storage.from(q).upload(j,K);if(E)throw E;const{data:A}=T.storage.from(q).getPublicUrl(j);A!=null&&A.publicUrl&&(await r({...L,imageUrl:A.publicUrl}),d++),k({current:N+1,total:h.length})}catch(j){console.error(`ä¸Šä¼ å¤±è´¥ ${Z}:`,j)}}p(!1),f(`æ‰¹é‡ä¸Šä¼ å®Œæˆï¼æˆåŠŸ ${d}/${h.length} å¼ `),d===h.length&&setTimeout(x,1500)};return e.jsxs("div",{className:"p-4 space-y-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5"}),"æ‰¹é‡å¯¼å…¥èœå“å›¾ç‰‡"]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200 text-sm text-blue-800",children:[e.jsx("p",{className:"font-bold mb-1",children:"ðŸ“‹ ä½¿ç”¨è¯´æ˜Žï¼š"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[e.jsxs("li",{children:["å‡†å¤‡ CSV æ–‡ä»¶ï¼Œæ ¼å¼ï¼š",e.jsx("code",{className:"bg-white px-1 rounded",children:"èœå“å,å›¾ç‰‡æ–‡ä»¶å"})]}),e.jsxs("li",{children:["æ¯è¡Œä¸€æ¡æ•°æ®ï¼Œä¾‹å¦‚ï¼š",e.jsx("code",{className:"bg-white px-1 rounded",children:"çº¢çƒ§è‚‰,hongshaorou.jpg"})]}),e.jsx("li",{children:"é€‰æ‹©å¯¹åº”çš„å›¾ç‰‡æ–‡ä»¶ï¼ˆæ”¯æŒå¤šé€‰ï¼‰"}),e.jsx("li",{children:"é¢„è§ˆåŒ¹é…ç»“æžœï¼Œç¡®è®¤åŽæ‰¹é‡ä¸Šä¼ "})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"1. ä¸Šä¼  CSV æ–‡ä»¶"}),e.jsx("input",{type:"file",accept:".csv,.txt",onChange:D,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600"}),y.length>0&&e.jsxs("p",{className:"text-xs text-green-600",children:["âœ“ å·²è§£æž ",y.length," æ¡æ•°æ®"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"2. é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼ˆå¯å¤šé€‰ï¼‰"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:_,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-500 file:text-white hover:file:bg-green-600"}),g.length>0&&e.jsxs("p",{className:"text-xs text-green-600",children:["âœ“ å·²é€‰æ‹© ",g.length," å¼ å›¾ç‰‡"]})]}),i.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"3. é¢„è§ˆåŒ¹é…ç»“æžœ"}),e.jsx("div",{className:"max-h-60 overflow-y-auto space-y-1 bg-gray-50 p-2 rounded border",children:i.map((h,q)=>e.jsxs("div",{className:`text-xs p-2 rounded flex items-center justify-between ${h.status==="ready"?"bg-green-50 text-green-700":h.status==="no-image"?"bg-yellow-50 text-yellow-700":"bg-red-50 text-red-700"}`,children:[e.jsxs("span",{className:"font-mono truncate flex-1",children:[h.dishName," â†’ ",h.fileName]}),e.jsx("span",{className:"ml-2 font-bold",children:h.status==="ready"?"âœ“ å°±ç»ª":h.status==="no-image"?"âš  ç¼ºå›¾ç‰‡":"âœ— æ— æ­¤èœå“"})]},q))}),e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsxs("span",{className:"text-green-600",children:["âœ“ å°±ç»ª: ",i.filter(h=>h.status==="ready").length]}),e.jsxs("span",{className:"text-yellow-600",children:["âš  ç¼ºå›¾ç‰‡: ",i.filter(h=>h.status==="no-image").length]}),e.jsxs("span",{className:"text-red-600",children:["âœ— æ— èœå“: ",i.filter(h=>h.status==="no-dish").length]})]})]}),v&&e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(he,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:["æ­£åœ¨ä¸Šä¼  ",b.current,"/",b.total]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${b.current/b.total*100}%`}})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:x,disabled:v,className:"flex-1 py-2 bg-gray-300 text-gray-700 rounded-lg font-bold active:scale-95 disabled:opacity-50",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:$,disabled:v||i.filter(h=>h.status==="ready").length===0,className:"flex-1 py-2 bg-orange-500 text-white rounded-lg font-bold active:scale-95 disabled:opacity-50 disabled:bg-gray-400",children:v?"ä¸Šä¼ ä¸­...":`å¼€å§‹ä¸Šä¼  (${i.filter(h=>h.status==="ready").length})`})]})]})},ct=({menuItems:t,updateMenu:r,deleteMenu:f,addMenu:x,showToast:s})=>{const[n,g]=l.useState(null),[c,y]=l.useState(!1),[C,v]=l.useState(!1),[p,b]=l.useState(!1),[k,i]=l.useState("ä¸»èœ"),S=["ä¸»èœ","ä¸»é£Ÿ","ç´ èœ","æ±¤å“","é¥®å“"],D=d=>{r(d),g(null),s("èœå“æ›´æ–°æˆåŠŸï¼")},_=d=>{x(d),y(!1),s("æ–°èœå“æ·»åŠ æˆåŠŸï¼")},$=(d,N)=>{window.confirm(`ç¡®å®šè¦åˆ é™¤ã€${N}ã€‘å—ï¼Ÿ`)&&(f(d),s("èœå“å·²åˆ é™¤"))},h=async()=>{if(window.confirm(`ç¡®å®šè¦åŒæ­¥é»˜è®¤èœå•å—ï¼Ÿ
è¿™å°†æ·»åŠ ä»£ç ä¸­æ–°å¢žçš„èœå“ï¼ˆå¦‚é¥®å“ï¼‰ï¼Œä¸ä¼šåˆ é™¤çŽ°æœ‰èœå“ã€‚`)){b(!0);try{const d=new Set(t.map(j=>j.id)),N=le.filter(j=>!d.has(j.id));if(N.length===0){s("æ‰€æœ‰é»˜è®¤èœå“å·²å­˜åœ¨ï¼Œæ— éœ€åŒæ­¥"),b(!1);return}const L=N.map(({imageUrl:j,...a})=>({...a,image_url:j})),{data:K,error:Z}=await T.from("menu").insert(L).select();if(Z)throw Z;s(`æˆåŠŸåŒæ­¥ ${N.length} ä¸ªæ–°èœå“ï¼`),setTimeout(()=>window.location.reload(),1500)}catch(d){console.error("åŒæ­¥å¤±è´¥:",d),s("åŒæ­¥å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{b(!1)}}},q=t.filter(d=>d.category===k);return e.jsxs("div",{className:"p-4 pt-8 pb-20 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[e.jsx(Je,{className:"w-6 h-6 mr-2 text-gray-500"}),"èœå•åŠåº“å­˜ç®¡ç†"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:h,disabled:p,className:"px-3 py-2 bg-purple-500 text-white rounded-full font-bold shadow-lg active:scale-95 flex items-center gap-2 disabled:opacity-50 text-sm",children:[p?e.jsx(he,{className:"w-4 h-4 animate-spin"}):e.jsx($e,{className:"w-4 h-4"}),p?"åŒæ­¥ä¸­...":"åŒæ­¥èœå•"]}),e.jsxs("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-full font-bold shadow-lg active:scale-95 flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5"})," æ‰¹é‡å¯¼å…¥"]}),e.jsxs("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-green-500 text-white rounded-full font-bold shadow-lg active:scale-95 flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5"})," æ–°å¢žèœå“"]})]})]}),e.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:S.map(d=>e.jsxs("button",{onClick:()=>i(d),className:`px-4 py-2 rounded-full font-bold text-sm whitespace-nowrap transition-all ${k===d?"bg-orange-500 text-white shadow-lg":"bg-white text-gray-600 border border-gray-200"}`,children:[d," (",t.filter(N=>N.category===d).length,")"]},d))}),q.map(d=>e.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("span",{className:"text-4xl",children:d.image}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-bold text-gray-800",children:d.name}),e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-600 text-xs rounded-full",children:d.category})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:d.description}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["é”€é‡: ",e.jsx("span",{className:"font-bold text-orange-600",children:d.sales||0})," ä»½"]}),e.jsxs("p",{className:"text-sm text-orange-500 font-bold",children:["Â¥",d.price]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(d),className:"p-2 bg-orange-500 text-white rounded-full shadow-md active:scale-95 transition-transform",children:e.jsx(Me,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>$(d.id,d.name),className:"p-2 bg-red-500 text-white rounded-full shadow-md active:scale-95 transition-transform",children:e.jsx(Ee,{className:"w-5 h-5"})})]})]})},d.id)),q.length===0&&e.jsxs("div",{className:"text-center text-gray-400 py-10",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ½ï¸"}),e.jsx("p",{children:"è¯¥åˆ†ç±»æš‚æ— èœå“"})]}),e.jsx(Y,{isOpen:!!n,onClose:()=>g(null),children:n&&e.jsx(Ce,{item:n,onSave:D,onCancel:()=>g(null),showToast:s})}),e.jsx(Y,{isOpen:c,onClose:()=>y(!1),children:e.jsx(Ce,{item:{id:"m-"+Date.now(),name:"",description:"",price:19,stock:99,category:"ä¸»é£Ÿ",method:"",flavor:"",image:"ðŸ½ï¸",imageUrl:"https://placehold.co/320x180/facc15/374151?text=æ–°èœå“",tags:[]},onSave:_,onCancel:()=>y(!1),showToast:s})}),e.jsx(Y,{isOpen:C,onClose:()=>v(!1),children:e.jsx(ot,{menuItems:t,updateMenu:r,showToast:s,onClose:()=>v(!1)})})]})},dt=({setRole:t,menuItems:r,updateMenu:f,deleteMenu:x,addMenu:s,allOrders:n,showToast:g})=>{const[c,y]=l.useState("orders"),[C,v]=l.useState("pending"),[p,b]=l.useState("all"),[k,i]=l.useState(null),S=l.useMemo(()=>pe(n),[n]),D=l.useMemo(()=>{const j=new Set;return n.forEach(a=>{if(a.status!=="cancelled"&&a.status!=="rejected"){const E=ee(a.created_at);j.add(E)}}),Array.from(j).sort().reverse()},[n]),_=async(j,a)=>{try{const E={status:a};a==="cooking"?E.cooking_started_at=new Date().toISOString():a==="completed"&&(E.completed_at=new Date().toISOString());const{data:A,error:O}=await T.from("orders").update(E).eq("id",j).select();if(O)throw new Error(O.message);if(a==="completed"&&A&&A.length>0){const R=A[0];console.log("å¼€å§‹æ›´æ–°é”€é‡ï¼Œè®¢å•å•†å“:",R.items);for(const o of R.items){console.log(`æ­£åœ¨æ›´æ–°èœå“: ${o.name} (ID: ${o.id}), æ•°é‡: ${o.quantity}`);const{data:u,error:U}=await T.from("menu").select("sales").eq("id",o.id).single();if(console.log("æŸ¥è¯¢åˆ°å½“å‰é”€é‡:",u),!U&&u){const H=u.sales||0,W=H+o.quantity;console.log(`æ›´æ–°é”€é‡: ${H} + ${o.quantity} = ${W}`);const{error:Q}=await T.from("menu").update({sales:W}).eq("id",o.id);Q?console.error(`æ›´æ–°èœå“ ${o.name} é”€é‡å¤±è´¥:`,Q):console.log(`âœ“ èœå“ ${o.name} é”€é‡æ›´æ–°æˆåŠŸ: ${W}`)}else console.error(`æŸ¥è¯¢èœå“ ${o.name} å¤±è´¥:`,U)}}}catch(E){console.error("æ›´æ–°çŠ¶æ€å¤±è´¥ Error:",E)}},$=[{key:"all",label:"æ‰€æœ‰è®¢å•",Icon:me,activeBg:"bg-gray-100",activeText:"text-gray-700"},{key:"pending",label:"å¾…å¤„ç†",Icon:fe,activeBg:"bg-orange-100",activeText:"text-orange-600"},{key:"cooking",label:"çƒ¹é¥ªä¸­",Icon:ke,activeBg:"bg-blue-100",activeText:"text-blue-600"},{key:"completed",label:"å·²å®Œæˆ",Icon:Ze,activeBg:"bg-green-100",activeText:"text-green-600"},{key:"rejected",label:"å·²æ‹’ç»",Icon:Ee,activeBg:"bg-red-100",activeText:"text-red-600"}],h=l.useMemo(()=>[...n].filter(a=>a.status!=="cancelled"&&a.status!=="deleted").filter(a=>p==="all"?!0:ee(a.created_at)===p).sort((a,E)=>{const A={pending:0,cooking:1,completed:2,rejected:3},O=A[a.status]-A[E.status];return O!==0?O:new Date(E.created_at).getTime()-new Date(a.created_at).getTime()}).filter(a=>C==="all"?!0:a.status===C),[n,C,p]),q=l.useMemo(()=>[...n].filter(j=>j.status==="deleted").sort((j,a)=>new Date(a.created_at).getTime()-new Date(j.created_at).getTime()),[n]),d=async j=>{if(window.confirm("ç¡®å®šè¦æ°¸ä¹…åˆ é™¤æ­¤è®¢å•å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼"))try{const{error:a}=await T.from("orders").delete().eq("id",j);if(a)throw new Error(a.message);g("è®¢å•å·²æ°¸ä¹…åˆ é™¤")}catch(a){console.error("æ°¸ä¹…åˆ é™¤å¤±è´¥:",a),g("åˆ é™¤å¤±è´¥ï¼Œè¯·é‡è¯•")}},N=async j=>{try{const{error:a}=await T.from("orders").update({status:"pending"}).eq("id",j);if(a)throw new Error(a.message);g("è®¢å•å·²æ¢å¤åˆ°å¾…å¤„ç†")}catch(a){console.error("æ¢å¤å¤±è´¥:",a),g("æ¢å¤å¤±è´¥ï¼Œè¯·é‡è¯•")}},L=async()=>{if(window.confirm(`ç¡®å®šè¦æ¸…ç©ºå›žæ”¶ç«™å—ï¼Ÿè¿™å°†æ°¸ä¹…åˆ é™¤ ${q.length} ä¸ªè®¢å•ï¼Œæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼`))try{const j=q.map(E=>E.id),{error:a}=await T.from("orders").delete().in("id",j);if(a)throw new Error(a.message);g(`å·²æ¸…ç©ºå›žæ”¶ç«™ï¼Œåˆ é™¤äº† ${j.length} ä¸ªè®¢å•`)}catch(j){console.error("æ¸…ç©ºå›žæ”¶ç«™å¤±è´¥:",j),g("æ¸…ç©ºå¤±è´¥ï¼Œè¯·é‡è¯•")}},K=()=>e.jsxs("div",{className:"px-4 space-y-4 pt-8 pb-24",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-700",children:["ðŸ—‘ï¸ å›žæ”¶ç«™ (",q.length,")"]}),q.length>0&&e.jsx("button",{onClick:L,className:"px-4 py-2 bg-red-500 text-white rounded-lg font-bold text-sm hover:bg-red-600 transition active:scale-95",children:"æ¸…ç©ºå›žæ”¶ç«™"})]}),q.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-20",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ—‘ï¸"}),e.jsx("p",{className:"text-lg",children:"å›žæ”¶ç«™æ˜¯ç©ºçš„"}),e.jsx("p",{className:"text-sm mt-2",children:"å·²åˆ é™¤çš„è®¢å•ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ"})]}):q.map(j=>{const{displayId:a,displayTime:E}=se(j.created_at,S);return e.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-md border-l-4 border-gray-400 opacity-75",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-start bg-gray-50/50",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 text-lg",children:["è®¢å•å·: ",a]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["æ—¶é—´: ",E]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:j.customer_name})]}),e.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold bg-gray-200 text-gray-600",children:"å·²åˆ é™¤"})]}),e.jsx("div",{className:"p-4",children:j.items.map((A,O)=>e.jsxs("div",{className:"flex justify-between items-center mb-2 pb-2 border-b border-gray-50 last:border-b-0 last:pb-0",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-700",children:A.name}),A.special_request&&A.special_request!=="æ— ç‰¹æ®Šå¤‡æ³¨"&&e.jsxs("span",{className:"text-xs text-red-500 italic",children:["âš ï¸ å¤‡æ³¨: ",A.special_request]})]}),e.jsxs("span",{className:"font-bold text-gray-900",children:["x",A.quantity]})]},O))}),e.jsxs("div",{className:"p-3 bg-gray-50 flex gap-3",children:[e.jsx("button",{onClick:()=>N(j.id),className:"flex-1 py-2 bg-green-500 text-white rounded-lg font-bold text-sm hover:bg-green-600 transition active:scale-95",children:"æ¢å¤è®¢å•"}),e.jsx("button",{onClick:()=>d(j.id),className:"flex-1 py-2 bg-red-500 text-white rounded-lg font-bold text-sm hover:bg-red-600 transition active:scale-95",children:"æ°¸ä¹…åˆ é™¤"})]})]},j.id)})]}),Z=()=>{var j;return e.jsxs("div",{className:"px-4 space-y-4 pt-8 pb-24",children:[e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[e.jsx("button",{onClick:()=>b("all"),className:`px-4 py-2 rounded-full whitespace-nowrap text-sm font-medium transition-all ${p==="all"?"bg-orange-500 text-white shadow-lg":"bg-white text-gray-600 border border-gray-200"}`,children:"å…¨éƒ¨æ—¥æœŸ"}),D.map(a=>{a.substring(0,4);const E=a.substring(4,6),A=a.substring(6,8);return e.jsxs("button",{onClick:()=>b(a),className:`px-4 py-2 rounded-full whitespace-nowrap text-sm font-medium transition-all ${p===a?"bg-orange-500 text-white shadow-lg":"bg-white text-gray-600 border border-gray-200"}`,children:[E,"/",A]},a)})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:$.map(({key:a,label:E,Icon:A,activeBg:O,activeText:R})=>{const o=a==="all"?n.filter(U=>U.status!=="rejected"&&U.status!=="cancelled").length:n.filter(U=>U.status===a).length,u=C===a;return e.jsxs("button",{onClick:()=>v(a),className:`rounded-xl p-2 text-center transition-all shadow-sm active:scale-95 ${u?O:"bg-white text-gray-50 hover:bg-gray-50"} border ${u?"border-transparent":"border-gray-100"}`,children:[e.jsxs("div",{className:`text-xl font-bold flex items-center justify-center ${u?R:"text-gray-700"}`,children:[e.jsx(A,{className:"w-5 h-5 mr-1"}),o]}),e.jsx("div",{className:`text-xs ${u?R:"text-gray-500"}`,children:E})]},a)})}),h.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-10",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ˜´"}),e.jsx("p",{children:C==="all"?"å½“å‰æ²¡æœ‰è®¢å•":`æ²¡æœ‰å¤„äºŽã€${(j=$.find(a=>a.key===C))==null?void 0:j.label}ã€‘çŠ¶æ€çš„è®¢å•`})]}):h.map(a=>{const{displayId:E,displayTime:A}=se(a.created_at,S);return e.jsxs("div",{className:`bg-white rounded-xl overflow-hidden shadow-md border-l-4 ${a.status==="pending"?"border-orange-500":a.status==="cooking"?"border-blue-500":a.status==="rejected"?"border-red-500":"border-green-500"}`,children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 flex justify-between items-start bg-gray-50/50",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 text-lg",children:["è®¢å•å·: ",E]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["æ—¶é—´: ",A]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a.customer_name})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${a.status==="pending"?"bg-orange-100 text-orange-600":a.status==="cooking"?"bg-blue-100 text-blue-600":a.status==="rejected"?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:a.status==="pending"?"å¾…æŽ¥å•":a.status==="cooking"?"çƒ¹é¥ªä¸­":a.status==="rejected"?"å·²æ‹’ç»":"å·²å®Œæˆ"})]}),e.jsx("div",{className:"p-4",children:a.items.map((O,R)=>e.jsxs("div",{className:"flex justify-between items-center mb-2 pb-2 border-b border-gray-50 last:border-b-0 last:pb-0",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-700",children:O.name}),O.special_request&&O.special_request!=="æ— ç‰¹æ®Šå¤‡æ³¨"&&e.jsxs("span",{className:"text-xs text-red-500 italic",children:["âš ï¸ å¤‡æ³¨: ",O.special_request]})]}),e.jsxs("span",{className:"font-bold text-gray-900",children:["x",O.quantity]})]},R))}),a.status!=="completed"&&a.status!=="rejected"&&e.jsxs("div",{className:"p-3 bg-gray-50 space-y-2",children:[e.jsxs("button",{onClick:()=>i(a),className:"w-full py-2 bg-gray-100 text-gray-700 rounded-lg font-bold text-sm active:scale-95 transition-transform flex items-center justify-center gap-1",children:[e.jsx(ce,{className:"w-4 h-4"})," æŸ¥çœ‹è¯¦æƒ…"]}),e.jsxs("div",{className:"flex gap-3",children:[a.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>_(a.id,"rejected"),className:"flex-1 py-2 bg-white border border-gray-200 text-gray-500 rounded-lg font-bold text-sm hover:bg-red-50 transition active:scale-95",children:"æ®‹å¿æ‹’ç»"}),e.jsx("button",{onClick:()=>_(a.id,"cooking"),className:"flex-1 py-2 bg-orange-500 text-white rounded-lg font-bold text-sm shadow-md shadow-orange-200 hover:bg-orange-600 transition active:scale-95",children:"å¼€å§‹çƒ¹é¥ª"})]}),a.status==="cooking"&&e.jsx("button",{onClick:()=>_(a.id,"completed"),className:"flex-1 py-2 bg-green-500 text-white rounded-lg font-bold text-sm shadow-md shadow-green-200 hover:bg-green-600 transition active:scale-95",children:"å®Œæˆå‡ºé¤"})]}),e.jsxs("button",{onClick:()=>_(a.id,"deleted"),className:"w-full py-2 bg-red-50 text-red-600 border border-red-200 rounded-lg font-bold text-sm hover:bg-red-100 transition active:scale-95 flex items-center justify-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"})," åˆ é™¤è®¢å•"]})]}),(a.status==="completed"||a.status==="rejected")&&e.jsxs("div",{className:"p-3 bg-gray-50 space-y-2",children:[e.jsxs("button",{onClick:()=>i(a),className:"w-full py-2 bg-gray-100 text-gray-700 rounded-lg font-bold text-sm active:scale-95 transition-transform flex items-center justify-center gap-1",children:[e.jsx(ce,{className:"w-4 h-4"})," æŸ¥çœ‹è¯¦æƒ…"]}),e.jsxs("button",{onClick:()=>_(a.id,"deleted"),className:"w-full py-2 bg-red-50 text-red-600 border border-red-200 rounded-lg font-bold text-sm hover:bg-red-100 transition active:scale-95 flex items-center justify-center gap-1",children:[e.jsx(we,{className:"w-4 h-4"})," åˆ é™¤è®¢å•"]})]})]},a.id)})]})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsxs("div",{className:"bg-white px-4 py-4 shadow-sm flex justify-between items-center sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"w-6 h-6 text-gray-800"}),e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"å¤§åŽ¨æŽ§åˆ¶å°"})]}),e.jsx("button",{onClick:()=>t(null),className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center hover:bg-orange-100 transition shadow-md",title:"è¿”å›žé¦–é¡µ",children:e.jsx(xe,{className:"w-5 h-5 text-gray-600 hover:text-orange-500"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pb-20",children:c==="orders"?Z():c==="trash"?K():e.jsx(ct,{menuItems:r,updateMenu:f,deleteMenu:x,addMenu:s,showToast:g})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white border-t py-2 flex justify-around shadow-lg z-20",children:[e.jsxs("button",{onClick:()=>y("orders"),className:`flex flex-col items-center p-2 rounded-lg transition ${c==="orders"?"text-orange-500":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(ke,{className:"w-6 h-6 mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"è®¢å•ç®¡ç†"})]}),e.jsxs("button",{onClick:()=>y("trash"),className:`flex flex-col items-center p-2 rounded-lg transition ${c==="trash"?"text-orange-500":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx($e,{className:"w-6 h-6 mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"å›žæ”¶ç«™"})]}),e.jsxs("button",{onClick:()=>y("menu"),className:`flex flex-col items-center p-2 rounded-lg transition ${c==="menu"?"text-orange-500":"text-gray-400 hover:text-gray-600"}`,children:[e.jsx(me,{className:"w-6 h-6 mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"èœå•ç®¡ç†"})]})]}),k&&e.jsx(De,{order:k,onClose:()=>i(null),sequenceMap:S})]})};function xt(){const[t,r]=l.useState(()=>localStorage.getItem("userRole")||null),[f,x]=l.useState(()=>!localStorage.getItem("userRole")),[s,n]=l.useState(()=>localStorage.getItem("pushPlus_senderToken")||""),[g,c]=l.useState(()=>localStorage.getItem("pushPlus_friendToken_kitchen")||""),[y,C]=l.useState(()=>localStorage.getItem("pushPlus_friendToken_customer")||""),[v,p]=l.useState(!1),[b,k]=l.useState(""),[i,S]=l.useState(""),[D,_]=l.useState(""),[$,h]=l.useState(null),[q,d]=l.useState([]),[N,L]=l.useState([]),[K,Z]=l.useState(""),[j,a]=l.useState(!0),[E,A]=l.useState("menu"),O={uid:st},R=l.useRef([]),o=l.useRef(!1),u=l.useRef(null);l.useEffect(()=>{const m=V=>{$&&(V.preventDefault(),h(null),window.history.pushState(null,"",window.location.pathname))};return $&&window.history.pushState(null,"",window.location.pathname),window.addEventListener("popstate",m),()=>{window.removeEventListener("popstate",m)}},[$]);const U=l.useCallback(m=>{Z(m)},[]),H=l.useCallback(async(m,V,w="ðŸ””",M=null)=>{const F=localStorage.getItem("pushPlus_senderToken"),G=M==="kitchen"?localStorage.getItem("pushPlus_friendToken_kitchen"):M==="customer"?localStorage.getItem("pushPlus_friendToken_customer"):null;if(F&&G){const P=new Date,I=`${P.getHours().toString().padStart(2,"0")}:${P.getMinutes().toString().padStart(2,"0")}:${P.getSeconds().toString().padStart(2,"0")}`,z=`
        <div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; padding: 15px; background: linear-gradient(135deg, #fff5f5 0%, #fff8e1 100%); border-radius: 12px;">
          <div style="font-size: 24px; margin-bottom: 10px;">${w}</div>
          <h2 style="color: #e65100; margin: 0 0 10px 0; font-size: 18px;">${m}</h2>
          <p style="color: #333; margin: 0; font-size: 14px; line-height: 1.6;">${V}</p>
          <p style="color: #999; font-size: 12px; margin-top: 15px;">æ¥è‡ªï¼šå°è’‹ç‚’èœé¦† Â· ${I}</p>
        </div>
      `;Se(F,`ðŸ³ ${m}`,z,"html",G),console.log(`PushPlus å¥½å‹æŽ¨é€: ${M}`)}else console.log(F?`PushPlus: ${M} çš„å¥½å‹ä»¤ç‰Œæœªé…ç½®`:"PushPlus: å‘é€è€… token æœªé…ç½®");if(M&&t!==M){console.log(`æœ¬åœ°é€šçŸ¥è¢«è¿‡æ»¤: ç›®æ ‡èº«ä»½=${M}, å½“å‰èº«ä»½=${t}`);return}"Notification"in window&&Notification.permission==="granted"&&(new Notification(m,{body:V,icon:w,badge:w,tag:"order-notification",requireInteraction:!0,vibrate:[200,100,200]}),new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBDGH0fPTgjMGHm7A7+OZRQ0PVajn77FZGAg+ltv0xXEoCi6Czv").play().catch(I=>console.log("æ— æ³•æ’­æ”¾æç¤ºéŸ³:",I)))},[U,t]);l.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]),l.useEffect(()=>{(async()=>{const{data:w,error:M}=await T.from("menu").select("*").order("id",{ascending:!0});if(M){if(console.error("åŠ è½½èœå•å¤±è´¥:",M),w===null||w.length===0){console.log("æ•°æ®åº“èœå•ä¸ºç©ºï¼Œæ’å…¥åˆå§‹æ•°æ®...");const{error:F}=await T.from("menu").insert(le);F||d(le)}a(!1);return}if(!w||w.length===0){console.log("æ•°æ®åº“èœå•ä¸ºç©ºï¼Œæ’å…¥åˆå§‹æ•°æ®...");const F=le.map(({imageUrl:I,...z})=>({...z,image_url:I})),{data:G,error:P}=await T.from("menu").insert(F).select();if(!P&&G){const I=G.map(z=>({...z,imageUrl:z.image_url}));d(I)}else console.error("æ’å…¥åˆå§‹èœå•å¤±è´¥:",P)}else{const F=w.map(G=>({...G,imageUrl:G.image_url}));d(F)}a(!1)})();const V=T.channel("menu-realtime-channel").on("postgres_changes",{event:"INSERT",schema:"public",table:"menu"},w=>{console.log("æ–°èœå“:",w.new);const M={...w.new,imageUrl:w.new.image_url};d(F=>[...F,M])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"menu"},w=>{console.log("èœå“æ›´æ–°:",w.new);const M={...w.new,imageUrl:w.new.image_url};d(F=>F.map(G=>G.id===M.id?M:G))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"menu"},w=>{console.log("èœå“åˆ é™¤:",w.old),d(M=>M.filter(F=>F.id!==w.old.id))}).subscribe();return()=>{T.removeChannel(V)}},[]),l.useEffect(()=>{(async()=>{const{data:w,error:M}=await T.from("orders").select("*").order("created_at",{ascending:!1});if(M){console.error("Supabase query failed:",M);return}L(w||[])})();const V=T.channel("orders-realtime-channel").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},w=>{console.log("æ–°è®¢å•:",w.new),L(M=>[w.new,...M])}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders"},w=>{console.log("è®¢å•æ›´æ–°:",w.new),L(M=>M.map(F=>F.id===w.new.id?w.new:F))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"orders"},w=>{console.log("è®¢å•åˆ é™¤:",w.old),L(M=>M.filter(F=>F.id!==w.old.id))}).subscribe();return()=>{T.removeChannel(V)}},[]),l.useEffect(()=>{var F,G;if(!$){R.current=N,u.current=$;return}if(!o.current){o.current=!0,R.current=N,u.current=$;return}if(u.current!==$){u.current=$,R.current=N;return}const m=R.current||[];if(m.length===0&&N.length===0)return;const V=N.filter(P=>!m.some(I=>I.id===P.id));if(V.length>0){const P=V[0],I=((G=(F=P.items)==null?void 0:F[0])==null?void 0:G.name)||"çˆ±å¿ƒæ–™ç†",z=P.customer_name||"å®¢äºº";H("ðŸ´ æ–°è®¢å•",`${z} åˆšä¸‹å•äº† ${I}`,"ðŸ´","kitchen")}N.reduce((P,I)=>{const z=m.find(J=>J.id===I.id);return z&&z.status!==I.status&&P.push(I),P},[]).forEach(P=>{var I,z,J,be,ye,je;if(P.user_id===O.uid){const ie={cooking:{title:"ðŸ‘¨â€ðŸ³ å¤§åŽ¨å·²æŽ¥å•",msg:"æ­£åœ¨çƒ¹é¥ªä¸­ï½ž"},completed:{title:"âœ… å‡ºé¤å®Œæˆ",msg:"å¿«æ¥é¢†å–ç¾Žå‘³ï½ž"},rejected:{title:"âŒ è®¢å•è¢«æ‹’ç»",msg:"å¤§åŽ¨æš‚æ—¶å¿™ä¸è¿‡æ¥ï¼Œç¨åŽå†è¯•å“¦ï½ž"},cancelled:{title:"ðŸš« è®¢å•å·²å–æ¶ˆ",msg:"æ‚¨çš„è®¢å•å·²å–æ¶ˆ"}}[P.status];if(ie){const Te=((z=(I=P.items)==null?void 0:I[0])==null?void 0:z.name)||"èœå“";H(ie.title,`${Te} - ${ie.msg}`,"ðŸ””","customer")}}if(P.status==="pending"){const ae=((be=(J=P.items)==null?void 0:J[0])==null?void 0:be.name)||"èœå“";H("ðŸ”” è®¢å•çŠ¶æ€å˜åŒ–",`æœ‰è®¢å•å›žåˆ°äº†å¾…å¤„ç†çŠ¶æ€: ${ae}`,"ðŸ””","kitchen")}if(P.status==="cancelled"){const ae=((je=(ye=P.items)==null?void 0:ye[0])==null?void 0:je.name)||"èœå“";H("âŒ è®¢å•å–æ¶ˆ",`å®¢äººå–æ¶ˆäº†è®¢å•: ${ae}`,"âŒ","kitchen")}}),N.reduce((P,I)=>{const z=m.find(J=>J.id===I.id);return z&&I.urgent&&(!z.urgent||I.urgent_count>(z.urgent_count||0))&&P.push(I),P},[]).forEach(P=>{var z,J;const I=((J=(z=P.items)==null?void 0:z[0])==null?void 0:J.name)||"èœå“";H("ðŸ”” å‚¬å•é€šçŸ¥",`å®¢äººåœ¨å‚¬å•å•¦ï¼è®¢å•: ${I}`,"ðŸ””","kitchen")}),R.current=N},[N,$,H,O.uid]);const W=l.useCallback(async m=>{d(w=>w.map(M=>M.id===m.id?m:M));const{error:V}=await T.from("menu").update({name:m.name,description:m.description,price:m.price,stock:m.stock,category:m.category,method:m.method,flavor:m.flavor,image:m.image,image_url:m.imageUrl||m.image_url,tags:m.tags||[],updated_at:new Date().toISOString()}).eq("id",m.id);V&&console.error("æ›´æ–°èœå•åˆ°äº‘ç«¯å¤±è´¥:",V)},[]),Q=l.useCallback(async m=>{d(w=>w.filter(M=>M.id!==m));const{error:V}=await T.from("menu").delete().eq("id",m);V&&console.error("ä»Žäº‘ç«¯åˆ é™¤èœå•å¤±è´¥:",V)},[]),X=l.useCallback(async m=>{d(w=>[...w,m]);const{error:V}=await T.from("menu").insert([{id:m.id,name:m.name,description:m.description,price:m.price,stock:m.stock,category:m.category,method:m.method,flavor:m.flavor,image:m.image,image_url:m.imageUrl||m.image_url,tags:m.tags||[]}]);V&&console.error("æ·»åŠ èœå•åˆ°äº‘ç«¯å¤±è´¥:",V)},[]);return!O||j?e.jsx(at,{}):v?e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 via-yellow-50 to-orange-100 flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-6 left-6 text-4xl opacity-20 animate-bounce",children:"ðŸ³"}),e.jsx("div",{className:"absolute top-20 right-10 text-3xl opacity-20 animate-pulse",children:"ðŸ¥˜"}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-5 max-w-sm w-full z-10 animate-in zoom-in duration-500 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ“±"}),e.jsx("h2",{className:"text-lg font-black text-gray-800 mb-1",children:"é…ç½®å¾®ä¿¡æŽ¨é€"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PushPlus å¥½å‹ä¸€å¯¹ä¸€æŽ¨é€"})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-xl mb-4 text-xs text-blue-800",children:[e.jsx("p",{className:"font-bold mb-1",children:"ðŸ“‹ é…ç½®è¯´æ˜Žï¼š"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"å‘é€è€… Token"}),"ï¼šæ‚¨å·²å®žåè®¤è¯çš„ tokenï¼ˆç”¨äºŽè°ƒç”¨ APIï¼‰"]}),e.jsxs("li",{children:["â€¢ ",e.jsx("strong",{children:"å¥½å‹ä»¤ç‰Œ"}),"ï¼šåœ¨ PushPlusã€Œå¥½å‹æ¶ˆæ¯ã€ä¸­æ·»åŠ å¥½å‹åŽèŽ·å–"]}),e.jsxs("li",{children:["â€¢ å¥½å‹åªéœ€å…³æ³¨å…¬ä¼—å·ï¼Œ",e.jsx("strong",{children:"æ— éœ€å®žåè®¤è¯"}),"å³å¯æŽ¥æ”¶"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"ðŸ”‘ å‘é€è€… Tokenï¼ˆå·²å®žåï¼‰"}),e.jsx("input",{type:"text",value:b,onChange:m=>k(m.target.value),placeholder:"æ‚¨çš„ PushPlus Token",className:"w-full px-3 py-2 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:outline-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"ðŸ‘¨â€ðŸ³ å¤§åŽ¨å¥½å‹ä»¤ç‰Œ"}),e.jsx("input",{type:"text",value:i,onChange:m=>S(m.target.value),placeholder:"æŽ¨é€æ–°è®¢å•é€šçŸ¥ç»™å¤§åŽ¨",className:"w-full px-3 py-2 border-2 border-gray-200 rounded-xl focus:border-purple-400 focus:outline-none text-sm"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"é¡¾å®¢ä¸‹å•æ—¶æŽ¨é€ç»™å¤§åŽ¨"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"ðŸ½ï¸ é¡¾å®¢å¥½å‹ä»¤ç‰Œ"}),e.jsx("input",{type:"text",value:D,onChange:m=>_(m.target.value),placeholder:"æŽ¨é€è®¢å•çŠ¶æ€ç»™é¡¾å®¢",className:"w-full px-3 py-2 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:outline-none text-sm"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"å¤§åŽ¨å‡ºé¤æ—¶æŽ¨é€ç»™é¡¾å®¢"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:()=>{p(!1),k(s),S(g),_(y)},className:"flex-1 py-3 bg-gray-200 text-gray-700 rounded-xl font-bold text-sm active:scale-95",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:async()=>{if(b.trim()&&(localStorage.setItem("pushPlus_senderToken",b.trim()),n(b.trim())),i.trim()&&(localStorage.setItem("pushPlus_friendToken_kitchen",i.trim()),c(i.trim())),D.trim()&&(localStorage.setItem("pushPlus_friendToken_customer",D.trim()),C(D.trim())),b.trim()){U("æ­£åœ¨å‘é€æµ‹è¯•é€šçŸ¥...");const m=await Se(b.trim(),"ðŸŽ‰ é…ç½®æˆåŠŸ",'<div style="text-align:center;padding:20px;"><h2 style="color:#e65100;">å°è’‹ç‚’èœé¦†</h2><p>âœ… æŽ¨é€é…ç½®å·²ä¿å­˜ï¼</p></div>',"html");U(m?"âœ… é…ç½®å·²ä¿å­˜ï¼Œæµ‹è¯•é€šçŸ¥å·²å‘é€ï¼":"âš ï¸ é…ç½®å·²ä¿å­˜ï¼Œä½†æµ‹è¯•é€šçŸ¥å‘é€å¤±è´¥")}else U("âœ… é…ç½®å·²ä¿å­˜");p(!1)},className:"flex-1 py-3 bg-gradient-to-r from-green-400 to-green-500 text-white rounded-xl font-bold text-sm active:scale-95",children:"ä¿å­˜é…ç½®"})]}),e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 rounded-xl text-xs text-yellow-800",children:[e.jsx("p",{className:"font-bold mb-1",children:"ðŸ’¡ å¦‚ä½•èŽ·å–å¥½å‹ä»¤ç‰Œï¼Ÿ"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[e.jsx("li",{children:"ç™»å½• pushplus.plus ç½‘ç«™"}),e.jsx("li",{children:"ç‚¹å‡»ã€Œå¥½å‹æ¶ˆæ¯ã€â†’ã€Œæˆ‘çš„å¥½å‹ã€"}),e.jsx("li",{children:"æ·»åŠ å¥½å‹ï¼ˆå¥½å‹éœ€å…ˆå…³æ³¨å…¬ä¼—å·ï¼‰"}),e.jsx("li",{children:"å¤åˆ¶å¥½å‹çš„ã€Œå¥½å‹ä»¤ç‰Œã€"})]})]})]})]}):f?e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 via-yellow-50 to-orange-100 flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-6 left-6 text-4xl opacity-20 animate-bounce",children:"ðŸ³"}),e.jsx("div",{className:"absolute top-20 right-10 text-3xl opacity-20 animate-pulse",children:"ðŸ¥˜"}),e.jsx("div",{className:"absolute bottom-24 left-12 text-3xl opacity-20 animate-bounce delay-100",children:"ðŸœ"}),e.jsx("div",{className:"absolute bottom-16 right-8 text-4xl opacity-20 animate-pulse delay-200",children:"ðŸ²"}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 max-w-sm w-full z-10 animate-in zoom-in duration-500",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-6xl mb-3",children:"ðŸ‘‹"}),e.jsx("h2",{className:"text-2xl font-black text-gray-800 mb-2",children:"æ¬¢è¿Žæ¥åˆ°"}),e.jsx("h1",{className:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-orange-600 to-red-500",children:"å°è’‹ç‚’èœé¦†"}),e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"è¯·é€‰æ‹©æ‚¨çš„èº«ä»½"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>{localStorage.setItem("userRole","customer"),r("customer"),x(!1),U("å·²é€‰æ‹©é¡¾å®¢èº«ä»½")},className:"w-full bg-gradient-to-r from-orange-400 to-orange-500 hover:from-orange-500 hover:to-orange-600 p-4 rounded-2xl shadow-lg flex items-center gap-3 transition-all duration-300 hover:scale-105 active:scale-95",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center text-3xl shadow-md",children:"ðŸ½ï¸"}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("h3",{className:"text-lg font-black text-white",children:"æˆ‘æ˜¯é¡¾å®¢"}),e.jsx("p",{className:"text-orange-100 text-xs",children:"ç‚¹èœã€æŸ¥çœ‹è®¢å•çŠ¶æ€"})]}),e.jsx("div",{className:"text-xl text-white",children:"â†’"})]}),e.jsxs("button",{onClick:()=>{localStorage.setItem("userRole","kitchen"),r("kitchen"),x(!1),U("å·²é€‰æ‹©å¤§åŽ¨èº«ä»½")},className:"w-full bg-gradient-to-r from-purple-400 to-indigo-500 hover:from-purple-500 hover:to-indigo-600 p-4 rounded-2xl shadow-lg flex items-center gap-3 transition-all duration-300 hover:scale-105 active:scale-95",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center text-3xl shadow-md",children:"ðŸ‘¨â€ðŸ³"}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("h3",{className:"text-lg font-black text-white",children:"æˆ‘æ˜¯å¤§åŽ¨"}),e.jsx("p",{className:"text-purple-100 text-xs",children:"æŽ¥å•ã€ç®¡ç†èœå•"})]}),e.jsx("div",{className:"text-xl text-white",children:"â†’"})]})]}),e.jsx("p",{className:"text-center text-xs text-gray-400 mt-6",children:"ðŸ’¡ èº«ä»½é€‰æ‹©åŽå¯åœ¨é¦–é¡µé…ç½®å¾®ä¿¡æŽ¨é€"})]})]}):$?e.jsxs("div",{className:"font-sans max-w-md mx-auto bg-white min-h-screen shadow-2xl overflow-hidden relative",children:[e.jsx(Pe,{message:K,onClose:()=>Z("")}),t&&$&&e.jsxs("div",{className:"fixed top-4 left-4 z-50 flex items-center gap-2 animate-in slide-in-from-left",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm px-3 py-1.5 rounded-full shadow-lg text-xs font-medium border border-gray-200",children:t==="customer"?"ðŸ½ï¸ é¡¾å®¢":"ðŸ‘¨â€ðŸ³ å¤§åŽ¨"}),e.jsx("button",{onClick:()=>{window.confirm("ç¡®å®šè¦æ¸…é™¤èº«ä»½ä¿¡æ¯å—ï¼Ÿä¸‹æ¬¡æ‰“å¼€å°†é‡æ–°é€‰æ‹©ã€‚")&&(localStorage.removeItem("userRole"),r(null),h(null),x(!0),U("å·²æ¸…é™¤èº«ä»½ï¼Œè¯·é‡æ–°é€‰æ‹©"))},className:"bg-red-500 hover:bg-red-600 text-white w-6 h-6 rounded-full shadow-lg text-xs font-bold active:scale-95 transition flex items-center justify-center",title:"æ¸…é™¤èº«ä»½",children:"âœ•"})]}),$==="customer"?e.jsx(it,{userId:O.uid,setRole:h,menuItems:q,allOrders:N,initialView:E}):e.jsx(dt,{setRole:h,menuItems:q,updateMenu:W,deleteMenu:Q,addMenu:X,allOrders:N,showToast:U})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 via-yellow-50 to-orange-100 flex flex-col items-center justify-between p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-6 left-6 text-4xl opacity-20 animate-bounce",children:"ðŸ³"}),e.jsx("div",{className:"absolute top-20 right-10 text-3xl opacity-20 animate-pulse",children:"ðŸ¥˜"}),e.jsx("div",{className:"absolute bottom-24 left-12 text-3xl opacity-20 animate-bounce delay-100",children:"ðŸœ"}),e.jsx("div",{className:"absolute bottom-16 right-8 text-4xl opacity-20 animate-pulse delay-200",children:"ðŸ²"}),t&&e.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2 animate-in slide-in-from-left z-20",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm px-3 py-1.5 rounded-full shadow-lg text-xs font-medium border border-gray-200",children:t==="customer"?"ðŸ½ï¸ é¡¾å®¢":"ðŸ‘¨â€ðŸ³ å¤§åŽ¨"}),e.jsx("button",{onClick:()=>{window.confirm("ç¡®å®šè¦æ¸…é™¤èº«ä»½ä¿¡æ¯å—ï¼Ÿä¸‹æ¬¡æ‰“å¼€å°†é‡æ–°é€‰æ‹©ã€‚")&&(localStorage.removeItem("userRole"),r(null),x(!0),U("å·²æ¸…é™¤èº«ä»½ï¼Œè¯·é‡æ–°é€‰æ‹©"))},className:"bg-red-500 hover:bg-red-600 text-white w-6 h-6 rounded-full shadow-lg text-xs font-bold active:scale-95 transition flex items-center justify-center",title:"æ¸…é™¤èº«ä»½",children:"âœ•"})]}),e.jsxs("button",{onClick:()=>{k(s),S(g),_(y),p(!0)},className:"absolute top-4 right-4 bg-white/95 backdrop-blur-sm px-3 py-1.5 rounded-full shadow-lg text-xs font-medium border border-gray-200 flex items-center gap-1 z-20 active:scale-95 transition",title:"é…ç½®å¾®ä¿¡æŽ¨é€",children:[e.jsx(fe,{className:"w-4 h-4"}),s?"âœ…":"âš ï¸"]}),e.jsxs("div",{className:"text-center mt-6 z-10",children:[e.jsx("div",{className:"inline-block mb-2 animate-in zoom-in duration-500",children:e.jsx("div",{className:"text-5xl mb-1",children:"â¤ï¸"})}),e.jsx("h1",{className:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-orange-600 to-red-500 mb-2 animate-in slide-in-from-top duration-700",children:"å°è’‹ç‚’èœé¦†"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-600 animate-in fade-in duration-1000",children:[e.jsx("span",{className:"text-xl",children:"ðŸ‘¨â€ðŸ³"}),e.jsx("p",{className:"text-sm font-medium",children:"çˆ±å¿ƒåŽ¨æˆ¿ Â· æ¸©æš–æ–™ç†"}),e.jsx("span",{className:"text-xl",children:"ðŸ½ï¸"})]})]}),e.jsx("div",{className:"z-10 animate-in zoom-in duration-700 delay-200",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-7xl filter drop-shadow-2xl",children:"ðŸ‘¨â€ðŸ³"}),e.jsx("div",{className:"absolute -top-1 -right-1 text-3xl animate-bounce",children:"â¤ï¸"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 text-2xl animate-pulse",children:"âœ¨"})]})}),e.jsxs("div",{className:"w-full max-w-sm space-y-3 mb-4 z-10",children:[e.jsxs("button",{onClick:()=>{h("customer"),A("menu")},className:"w-full bg-gradient-to-r from-orange-400 to-orange-500 hover:from-orange-500 hover:to-orange-600 p-4 rounded-2xl shadow-xl shadow-orange-200 flex items-center gap-3 transition-all duration-300 hover:scale-105 active:scale-95 border-2 border-white animate-in slide-in-from-bottom duration-500",children:[e.jsx("div",{className:"w-14 h-14 bg-white rounded-xl flex items-center justify-center text-3xl shadow-lg transform -rotate-6 hover:rotate-0 transition-transform",children:"ðŸ½ï¸"}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("h3",{className:"text-xl font-black text-white mb-0.5",children:"æˆ‘è¦ç‚¹èœ"}),e.jsx("p",{className:"text-orange-100 text-xs font-medium",children:"è‚šå­é¥¿äº†ï¼Œæƒ³åƒå¥½åƒçš„ï½ž"})]}),e.jsx("div",{className:"text-2xl text-white",children:"â†’"})]}),e.jsxs("button",{onClick:()=>{h("customer"),A("history")},className:"w-full bg-gradient-to-r from-red-400 to-pink-500 hover:from-red-500 hover:to-pink-600 p-4 rounded-2xl shadow-xl shadow-pink-200 flex items-center gap-3 transition-all duration-300 hover:scale-105 active:scale-95 border-2 border-white animate-in slide-in-from-bottom duration-500 delay-100",children:[e.jsx("div",{className:"w-14 h-14 bg-white rounded-xl flex items-center justify-center text-3xl shadow-lg transform rotate-6 hover:rotate-0 transition-transform",children:"ðŸ“"}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("h3",{className:"text-xl font-black text-white mb-0.5",children:"æˆ‘çš„è®¢å•"}),e.jsx("p",{className:"text-pink-100 text-xs font-medium",children:"æŸ¥çœ‹è®¢å•çŠ¶æ€å’ŒåŽ†å²ï½ž"})]}),e.jsx("div",{className:"text-2xl text-white",children:"â†’"})]}),e.jsxs("button",{onClick:()=>{h("kitchen")},className:"w-full bg-gradient-to-r from-purple-400 to-indigo-500 hover:from-purple-500 hover:to-indigo-600 p-4 rounded-2xl shadow-xl shadow-purple-200 flex items-center gap-3 transition-all duration-300 hover:scale-105 active:scale-95 border-2 border-white animate-in slide-in-from-bottom duration-500 delay-200",children:[e.jsx("div",{className:"w-14 h-14 bg-white rounded-xl flex items-center justify-center text-3xl shadow-lg transform -rotate-6 hover:rotate-0 transition-transform",children:"ðŸŽ"}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("h3",{className:"text-xl font-black text-white mb-0.5",children:"å¤§åŽ¨ç‰¹ä¾›"}),e.jsx("p",{className:"text-purple-100 text-xs font-medium",children:"ç®¡ç†èœå•ï¼Œç²¾å¿ƒçƒ¹é¥ªï½ž"})]}),e.jsx("div",{className:"text-2xl text-white",children:"â†’"})]})]}),e.jsx("div",{className:"absolute bottom-2 text-center text-xs text-gray-400 animate-in fade-in duration-1000 delay-500",children:e.jsx("p",{children:"ðŸ’ ç”¨çˆ±çƒ¹é¥ªæ¯ä¸€é¤ ðŸ’"})})]})}const te="/couple-ordering/";"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register(te+"sw.js",{scope:te}).then(t=>{console.log("SW registered:",t)}).catch(t=>{console.error("SW registration failed:",t)})});const mt=()=>{const t=document.createElement("link");t.rel="manifest",t.href=te+"manifest.json",document.head.appendChild(t);const r=document.createElement("link");r.rel="icon",r.type="image/png",r.sizes="192x192",r.href=te+"icon-192.png",document.head.appendChild(r);const f=document.createElement("link");f.rel="apple-touch-icon",f.href=te+"icon-192.png",document.head.appendChild(f)};mt();oe.createRoot(document.getElementById("root")).render(e.jsx(Oe.StrictMode,{children:e.jsx(xt,{})}));
